<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Liquidsoap</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!-- Extra details for Live View on GitHub Pages -->
    <!-- Canonical SEO -->
    <link rel="canonical" href="https://www.liquidsoap.info/" />
    <!--  Social tags      -->
    <meta name="keywords" content="radio, audio, video, streaming, icecast, shoutcast">
    <meta name="description" content="Swiss-army knife for multimedia streaming">
    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Liquidsoap Streaming Language">
    <meta itemprop="description" content="Swiss-army knife for multimedia streaming">
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="product">
    <meta name="twitter:site" content="@LiquidsoapMedia">
    <meta name="twitter:title" content="Liquidsoap Streaming Language">
    <meta name="twitter:description" content="Swiss-army knife for multimedia streaming">
    <meta name="twitter:creator" content="@LiquidsoapMedia">
    <meta name="twitter:image" content="https://www.liquidsoap.info//assets/img/bottle_invert.png">
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="/assets/css/custom.css" rel="stylesheet" />
    <link href="/assets/css/material-kit.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <!-- Documentation extras -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <link rel="stylesheet" href="/assets/demo/docs.min.css">
    <style>
    .navbar-absolute-logo {
      padding-left: 45px;
    }

    .navbar-absolute-logo img {
      position: absolute;
      left: 15px;
      margin-top: -6px;
    }

    body {
      background: white;
    }

    p {
        font-size: 16px;
        text-align: justify;
    }
    </style>
    <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    </style>
  </head>

  <body class="bd-docs" data-spy="scroll" data-target=".bd-sidenav-active">
    <a id="skippy" class="sr-only sr-only-focusable" href="#content">
      <div class="container">
        <span class="skiplink-text">Skip to main content</span>
      </div>
    </a>
    <header class="navbar navbar-expand navbar-dark bg-primary flex-column flex-md-row bd-navbar">
      <a class="navbar-brand mr-0 mr-md-2 navbar-absolute-logo" href="/doc-2.3.2">
        <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 600 600" focusable="false" style="width: 25px; height: 25px;">
          <title>Liquidsoap</title>
          <style type="text/css">
.st0{fill:#FFFFFF;}
          </style>
          <g>
          <path class="st0" d="M102.4,593.8c-0.7-2.8-3.4-2.5-5.3-3.3c-24.6-10.2-37.2-28.7-37.2-55.6c-0.1-72.1,0-144.2,0-216.3
          c0-52.3,0-104.6,0-156.9c0-37.6,23.1-60.9,60.6-61.1c12-0.1,23.9-0.2,35.9,0c15.7,0.3,26.7,10.1,26.3,23
          c-0.4,12.5-11.1,21.5-26.3,21.8c-12,0.2-23.9-0.1-35.9,0.1c-11.8,0.1-15.6,3.7-15.6,15.3c-0.1,124.4,0,248.8-0.1,373.2
          c0,10.3,4.5,15.1,14.8,15.1c69.1-0.1,138.2,0,207.3-0.1c12.3,0,15.5-3.7,15.5-17.7c0-74.7,0-149.4,0-224.2c0-47.8,0-95.6,0-143.5
          c0-15.2-3-18.1-18.4-18.2c-10.8,0-21.7,0.1-32.5,0c-16-0.2-26.7-9.4-26.6-22.5c0.1-13,10.9-22.1,26.9-22.3
          c13.4-0.2,26.9-0.3,40.3,0.1c30.8,1,54.9,24.5,55,55.2c0.3,127.4,0.3,254.8,0.1,382.2c0,25.5-15.8,45.7-40.2,53.3
          c-1.7,0.5-3.8,0-4.5,2.4C262.3,593.8,182.4,593.8,102.4,593.8z"/>
          <path class="st0" d="M537.4,212.6c-16.8,23-56.5,16.5-68.6-9.5c-8-17.2-12.4-32.7-12-54.5c4.6,4.1,8.3,7.5,12.1,10.7
          c10.3,8.6,21,14,35.5,11.8c12.5-1.9,21.5,6,28.2,16.3c2,3,1.3,7.3,4.8,9.5C537.4,202.2,537.4,207.4,537.4,212.6z"/>
          <path class="st0" d="M200.6,230.4c0-55.3,0-110.5,0-165.8c0-40.7,22.3-62.7,63.2-62.7c50.4,0,100.8,0,151.3,0
          c36.1,0,59.1,21.9,60.4,57.7c0.5,13.1,0.4,26.1,0,39.2c-0.4,15.1-10.1,25.8-22.5,25.7c-12-0.1-21.6-10.1-22.3-24.8
          c-0.6-12.7-0.4-25.4-0.1-38.1c0.2-10.4-4.5-14.9-14.9-14.9c-51.5,0.1-103.1,0-154.6,0.1c-12.7,0-15.5,3.2-15.5,17.5
          c0,105.3,0,210.6,0,316c0,7.8,0.1,15.7,0,23.5c-0.2,17.5-9.4,28.9-23,28.6c-13.5-0.3-21.9-10.9-21.9-28.3
          C200.6,346.2,200.6,288.3,200.6,230.4z"/>
          </g>
        </svg>
        Liquidsoap
      </a>
      <ul class="navbar-nav flex-row d-none d-md-flex">
        <li class="nav-item dropdown">
          <a data-versions="dev 2.2.5 2.3.0 2.3.1 2.3.2 2.3.3
2.4.0" data-version="2.3.2" class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="liq-version" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            2.3.2
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="liq-version" id="liq-versions">
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://github.com/savonet/liquidsoap" target="_blank" rel="noopener" aria-label="GitHub">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false">
              <title>GitHub</title>
              <path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://twitter.com/liquidsoapmedia" target="_blank" rel="noopener" aria-label="Twitter">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false">
              <title>Twitter</title>
              <path d="M160.83 416.32c193.2 0 298.92-160.22 298.92-298.92 0-4.51 0-9-.2-13.52A214 214 0 0 0 512 49.38a212.93 212.93 0 0 1-60.44 16.6 105.7 105.7 0 0 0 46.3-58.19 209 209 0 0 1-66.79 25.37 105.09 105.09 0 0 0-181.73 71.91 116.12 116.12 0 0 0 2.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48 0 0 0 68 159.6a106.27 106.27 0 0 1-47.53-13.11v1.43a105.28 105.28 0 0 0 84.21 103.06 105.67 105.67 0 0 1-47.33 1.84 105.06 105.06 0 0 0 98.14 72.94A210.72 210.72 0 0 1 25 370.84a202.17 202.17 0 0 1-25-1.43 298.85 298.85 0 0 0 160.83 46.92" fill="currentColor" />
            </svg>
          </a>
        </li>
      </ul>
      <div class="navbar-nav-scroll ml-md-auto ">
        <ul class="navbar-nav bd-navbar-nav flex-row">
          <!--
            <li class="nav-item">
            <a class="nav-link" href=""> <i class="material-icons">card_membership</i> PRO Services </a>
            </li>
            -->
          <li class="nav-item">
            <script async src="https://cse.google.com/cse.js?cx=24f50f6f088994c53"></script>
            <style>
.cse .gsc-control-cse, .gsc-control-cse {
  background-color: transparent;
  border: none;
  width: 300px;
}
            </style>
            <div class="gcse-search"></div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/savonet/liquidsoap/issues" target="_blank" rel="noopener"><i class="material-icons">star</i> Get Help</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
        </ul>
      </div>
      <a href="https://github.com/savonet/liquidsoap" class="github-corner" aria-label="View source on Github">
        <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#9c27b0; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
          <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
          <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
          <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
      </a>
      <style>
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out
}

        @keyframes octocat-wave {
          0%,
          100% {
            transform: rotate(0)
          }
          20%,
          60% {
            transform: rotate(-25deg)
          }
          40%,
          80% {
            transform: rotate(10deg)
          }
        }

        @media (max-width:500px) {
          .github-corner:hover .octo-arm {
            animation: none
          }
          .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out
          }
        }
      </style>
    </header>
    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
          <nav class="collapse bd-links" id="bd-docs-nav">
            <div class="bd-toc-item active">
              <ul class="nav bd-sidenav">
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/doc-2.3.2/install.html">
                    Install
                  </a>
                </li>
                <li>
                  <a href="/doc-2.3.2/migrating.html">
                    Migrating from previous versions
                  </a>
                </li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="#">
                    Starters
                  </a>
                </li>
                <li><a href="/doc-2.3.2/book.html">The book</a></li>
                <li>
                  <a href="/doc-2.3.2/presentations.html">Video Presentations</a>
                </li>
                <li>
                  <a href="/doc-2.3.2/help.html">How to find help</a>
                </li>
                <li>
                  <a href="/doc-2.3.2/faq.html">Frequently Asked Questions</a>
                </li>
                <li><a href="/doc-2.3.2/quick_start.html">Quickstart</a></li>
                <li>
                  <a href="/doc-2.3.2/complete_case.html">Complete case analysis</a>
                </li>
                <li>
                  <a href="/doc-2.3.2/cookbook.html">Cookbook</a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Reference
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.3.2/language.html">Script language</a></li>
                <li>
                  <a href="/doc-2.3.2/reference.html">Core API</a></li>
                <li>
                  <a href="/doc-2.3.2/reference-extras.html">Extra API</a></li>
                <li>
                  <a href="/doc-2.3.2/reference-deprecated.html">Deprecated API</a></li>
                <li>
                  <a href="/doc-2.3.2/multitrack.html">Multitrack</a></li>
                <li>
                  <a href="/doc-2.3.2/protocols.html">Protocols</a></li>
                <li>
                  <a href="/doc-2.3.2/settings.html">Settings</a></li>
                <li>
                  <a href="/doc-2.3.2/ffmpeg.html">FFmpeg support</a></li>
                <li>
                  <a href="/doc-2.3.2/encoding_formats.html">Encoding formats</a></li>
                <li>
                  <a href="/doc-2.3.2/video.html">Videos streams</a></li>
                <li>
                  <a href="/doc-2.3.2/memory.html">Memory management</a></li>
                <li>
                  <a href="/doc-2.3.2/json.html">JSON import/export</a></li>
                <li>
                  <a href="/doc-2.3.2/xml.html">XML import/export</a></li>
                <li>
                  <a href="/doc-2.3.2/yaml.html">YAML import/export</a></li>
                <li>
                  <a href="/doc-2.3.2/ladspa.html">LADSPA plugins</a></li>
                <li>
                  <a href="/doc-2.3.2/playlist_parsers.html">Playlist parsers</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Core
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.3.2/sources.html">Sources</a></li>
                <li>
                  <a href="/doc-2.3.2/clocks.html">Clocks</a></li>
                <li>
                  <a href="/doc-2.3.2/requests.html">Requests</a></li>
                <li>
                  <a href="/doc-2.3.2/protocols-presentation.html">Protocols</a></li>
                <li>
                  <a href="/doc-2.3.2/stream_content.html">Stream contents</a></li>
                <li>
                  <a href="/doc-2.3.2/strings_encoding.html">Strings encoding</a></li>
                <li>
                  <a href="/doc-2.3.2/script_loading.html">Script loading</a></li>
                <li><a href="/doc-2.3.2/phases.html">Execution phases</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Specific tutorials
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.3.2/harbor_http.html">Using the HTTP server</a></li>
                <li>
                  <a href="/doc-2.3.2/blank.html">Blank detection</a></li>
                <li>
                  <a href="/doc-2.3.2/metadata.html">Customize metadata</a></li>
                <li>
                  <a href="/doc-2.3.2/seek.html">Seek and cue support</a></li>
                <li>
                  <a href="/doc-2.3.2/external_decoders.html">External decoders</a></li>
                <li>
                  <a href="/doc-2.3.2/external_streams.html">External streams</a></li>
                <li>
                  <a href="/doc-2.3.2/external_encoders.html">External encoders</a></li>
                <li>
                  <a href="/doc-2.3.2/hls_output.html">HLS output</a></li>
                <li>
                  <a href="/doc-2.3.2/http_input.html">HTTP input</a></li>
                <li>
                  <a href="/doc-2.3.2/harbor.html">Harbor input</a></li>
                <li>
                  <a href="/doc-2.3.2/stereotool.html">Stereotool</a></li>
                <li>
                  <a href="/doc-2.3.2/server.html">Using the telnet server</a></li>
                <li>
                  <a href="/doc-2.3.2/icy_metadata.html">ICY metadata update</a></li>
                <li>
                  <a href="/doc-2.3.2/replay_gain.html">Normalization and replay gain</a></li>
                <li>
                  <a href="/doc-2.3.2/request_sources.html">Requests-based sources</a></li>
                <li>
                  <a href="/doc-2.3.2/shoutcast.html">Shoutcast output</a></li>
                <li>
                  <a href="/doc-2.3.2/dynamic_sources.html">Dynamic source creation</a></li>
                <li>
                  <a href="/doc-2.3.2/crossfade.html">Crossfading</a></li>
                <li>
                  <a href="/doc-2.3.2/in_production.html">Using in production</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    User scripts
                  </a>
                </li>
                <li>
                  <a href="/doc-2.3.2/beets.html">Beets</a></li>
                <li>
                  <a href="/doc-2.3.2/geekradio.html">Geekradio</a></li>
                <li>
                  <a href="/doc-2.3.2/radiopi.html">RadioPi</a></li>
                <li>
                  <a href="/doc-2.3.2/dolebrai.html">Dolebraï</a></li>
                <li>
                  <a href="/doc-2.3.2/frequence3.html">Frequence3</a></li>
                <li>
                  <a href="/doc-2.3.2/video-static.html">Video with a single static image</a></li>
                <li>
                  <a href="/doc-2.3.2/split-cue.html">Split a CUE sheet</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    Behind the curtains
                  </a>
                </li>
                <li>
                  <a href="/doc-2.3.2/publications.html">Some presentations and publications</a></li>
                <li>
                  <a href="https://github.com/savonet">OCaml libraries</a></li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/legacy">
                    Legacy website
                  </a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
        <!--
          <div class="d-none d-xl-block col-xl-2 bd-toc">
          <ul class="section-nav">
          <li class="toc-entry toc-h2">
          <a href="#quick-start">Quick start</a>
          <ul>
          <li class="toc-entry toc-h3">
          <a href="#css">CSS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#js">JS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#fonts-and-icons">Fonts and Icons</a>
          </li>
          </ul>
          </li>
          <li class="toc-entry toc-h2">
          <a href="#starter-template">Starter template</a>
          </li>
          </ul>
          </div>
        -->
          <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
          <h1 id="quickstart"><a href="#quickstart"
class="anchor">Quickstart</a></h1>
<h2 id="the-internet-radio-toolchain"><a
href="#the-internet-radio-toolchain" class="anchor">The Internet radio
toolchain</a></h2>
<p><a href="index.html">Liquidsoap</a> is a general audio stream
generator, but is mainly intended for Internet radios. Before starting
with the proper Liquidsoap tutorial let’s describe quickly the
components of the internet radio toolchain, in case the reader is not
familiar with it.</p>
<p>The chain is made of:</p>
<ul>
<li>the stream generator (Liquidsoap, <a
href="https://www.icecast.org/ices/">ices</a>, or for example a
DJ-software running on your local PC) which creates an audio stream (Ogg
Vorbis or MP3);</li>
<li>the streaming media server (<a
href="http://www.icecast.org">Icecast</a>, <a
href="https://en.wikipedia.org/wiki/HTTP_Live_Streaming">HLS</a> (via a
HTTP server), …) which relays several streams from their sources to
their listeners;</li>
<li>the media player (iTunes, VLC, a web browser, …) which gets the
audio stream from the streaming media server and plays it to the
listener’s speakers.</li>
</ul>
<figure>
<img src="/assets/img/schema-webradio-inkscape.png"
alt="Internet radio toolchain" />
<figcaption aria-hidden="true">Internet radio toolchain</figcaption>
</figure>
<p>The stream is always passed from the stream generator to the server,
whether or not there are listeners. It is then sent by the server to
every listener. The more listeners you have, the more bandwidth you
need.</p>
<p>If you use Icecast, you can broadcast more than one audio feed using
the same server. Each audio feed or stream is identified by its “mount
point” on the server. If you connect to the <code>foo.ogg</code> mount
point, the URL of your stream will be <a
href="http://localhost:8000/foo.ogg">http://localhost:8000/foo.ogg</a> –
assuming that your Icecast is on localhost on port 8000. If you need
further information on this you might want to read Icecast’s <a
href="http://www.icecast.org">documentation</a>. A proper setup of a
streaming server is required for running Liquidsoap.</p>
<p>Now, let’s create an audio stream.</p>
<h2 id="starting-to-use-liquidsoap"><a
href="#starting-to-use-liquidsoap" class="anchor">Starting to use
Liquidsoap</a></h2>
<p>We assume that you have a fully installed Liquidsoap. In particular
the library <code>stdlib.liq</code> and its accompanying scripts should
have been installed, otherwise Liquidsoap won’t know the operators which
have been defined there.</p>
<h3 id="sources"><a href="#sources" class="anchor">Sources</a></h3>
<p>A stream is built with Liquidsoap by using or creating sources. A
source is a media stream containing audio and/or video, track marks and
metadata. In the following picture we represent a stream which has at
least three tracks (one of which starts before the snapshot), and a few
metadata packets (notice that they do not necessarily coincide with new
tracks).</p>
<figure>
<img src="/assets/img/stream.png" alt="A stream" />
<figcaption aria-hidden="true">A stream</figcaption>
</figure>
<p>Liquidsoap provides many functions for creating sources from scratch
(e.g. <code>playlist</code>), and also for creating complex sources by
putting together simpler ones (e.g. <code>switch</code> in the following
example). Eventually, sources are plugged into outputs (typically named
<code>output.*</code>) which continuously pull the source’s content and
output it to speakers, to a file, to a streaming server, etc. These
outputs what brings life into your sources.</p>
<h3 id="that-source-is-fallible"><a href="#that-source-is-fallible"
class="anchor">That source is fallible!</a></h3>
<p>A couple of things can go wrong in your streaming system. In
Liquidsoap, we say that a source is <em>infallible</em> if it is always
available. Otherwise, it is <em>fallible</em>, meaning that something
could go wrong and the source would not be available. By default, an
output requires that its input source is infallible, otherwise it
complains that “That source is fallible!”</p>
<p>For example, a normal <code>playlist</code> is fallible. Firstly,
because it could contain only invalid files, or at least spend too much
time on invalid files to be able to prepare a valid one on time.
Moreover, a playlist could contain remote files, which may not be
accessible quickly at all times. A queue of user requests is another
example of fallible source. Also, if <code>file.ogg</code> is a valid
local file, then <code>single("file.ogg")</code> is an infallible
source.</p>
<p>When an output complains about its source being fallible, you have to
turn it into an infallible one. Many solutions are available. The
function <code>mksafe</code> takes a source and returns an infallible
source, streaming silence when the input stream becomes unavailable. In
a radio-like stream, silence is not the preferred solution, and you will
probably prefer to <code>fallback</code> on an infallible “security”
source:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">fallback</span>([your_fallible_source_here, <span class="dt">single</span>(<span class="st">&quot;failure.ogg&quot;</span>)])</span></code></pre></div>
<p>Finally, if you do not care about failures, you can pass the
parameter <code>fallible=true</code> to most outputs (or pass the option
<code>--no-fallible-check</code> to Liquidsoap). In that case, the
output will accept a fallible source, and stop whenever the source fails
and restart when it is ready to produce data again.</p>
<h2 id="one-line-expressions"><a href="#one-line-expressions"
class="anchor">One-line expressions</a></h2>
<p>Liquidsoap is a scripting language. Many simple setups can be
achieved by evaluating one-line expressions.</p>
<h3 id="playlists"><a href="#playlists"
class="anchor">Playlists</a></h3>
<p>In the first example we’ll play a playlist. Let’s put a list of audio
files in <code>playlist.pls</code>: one filename per line, lines
starting with a <code>#</code> are ignored. You can also put remote
files’ URLs, if your liquidsoap has <a
href="help.html#plugins">support</a> for the corresponding protocols.
Then just run:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>liquidsoap &#39;<span class="dt">output</span>(<span class="dt">playlist</span>(<span class="st">&quot;playlist.pls&quot;</span>))&#39;</span></code></pre></div>
<p>Other playlist formats are supported, such as M3U and, depending on
your configuration, XSPF. Instead of giving the filename of a playlist,
you can also use a directory name, and liquidsoap will recursively look
for audio files in it.</p>
<p>Depending on your configuration, the output <code>output</code> will
use AO, Alsa or OSS, or won’t do anything if you do not have support for
these libs. In that case, the next example is for you.</p>
<h3 id="streaming-out-to-a-server"><a href="#streaming-out-to-a-server"
class="anchor">Streaming out to a server</a></h3>
<p><strong>Note:</strong> in the following, we assume that you have
installed the following optional dependencies:</p>
<ul>
<li><code>cry</code> for icecast output</li>
<li><code>vorbis</code> for ogg/vorbis encoding</li>
<li><code>ffmpeg</code> for ffmpeg encoding</li>
</ul>
<p>Liquidsoap is capable of playing audio on your speakers, but it can
also send audio to a streaming server such as Icecast or Shoutcast. One
instance of liquidsoap can stream one audio feed in many formats (and
even many audio feeds in many formats!).</p>
<p>You may already have an Icecast server. Otherwise you can install and
configure your own Icecast server. The configuration typically consists
in setting the admin and source passwords, in
<code>/etc/icecast2/icecast.xml</code>. These passwords should really be
changed if your server is visible from the hostile internet, unless you
want people to kick your source as admins, or add their own source and
steal your bandwidth.</p>
<p>We are now going to send an audio stream, encoded as Ogg Vorbis, to
an Icecast server:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>liquidsoap \</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  &#39;<span class="dt">output.icecast</span>(<span class="ot">%vorbis</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>     <span class="va">host</span> = <span class="st">&quot;localhost&quot;</span>, <span class="va">port</span> = <span class="dv">8000</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>     <span class="va">password</span> = <span class="st">&quot;hackme&quot;</span>, <span class="va">mount</span> = <span class="st">&quot;liq.ogg&quot;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>     <span class="dt">mksafe</span>(<span class="dt">playlist</span>(<span class="st">&quot;playlist.m3u&quot;</span>)))&#39;</span></code></pre></div>
<p>The main difference with the previous is that we used
<code>output.icecast</code> instead of <code>output</code>. The second
difference is the use of the <code>mksafe</code> which turns your
fallible playlist source into an infallible source.</p>
<p>If you want to use HLS instead for streaming, you can do:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>liquidsoap \</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  &#39;<span class="dt">output.file.hls</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;/path/to/hls/directory&quot;</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    [(<span class="st">&quot;aac&quot;</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      <span class="ot">%ffmpeg</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">format</span>=<span class="st">&quot;mpegts&quot;</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="ot">%audio</span>(<span class="va">codec</span>=<span class="st">&quot;aac&quot;</span>, <span class="va">b</span>=<span class="st">&quot;128k&quot;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>      ))],</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>     <span class="dt">mksafe</span>(<span class="dt">playlist</span>(<span class="st">&quot;playlist.m3u&quot;</span>)))&#39;</span></code></pre></div>
<p>Once started, this will place all the files required for HLS stream
into the local path <code>"/path/to/hls/directory"</code> which you can
then server over HTTP. The HLS output has many interesting options,
including callbacks to upload its files and more. See the <a
href="hls_output.html">HLS Output</a> page for more details.</p>
<h3 id="input-from-another-streaming-server"><a
href="#input-from-another-streaming-server" class="anchor">Input from
another streaming server</a></h3>
<p>Liquidsoap can use another stream as an audio source. This may be
useful if you do some live shows.</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>liquidsoap \</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  &#39;<span class="dt">output</span>(<span class="dt">input.http</span>(<span class="st">&quot;https://icecast.radiofrance.fr/fip-hifi.aac&quot;</span>))&#39;</span></code></pre></div>
<h3 id="input-from-the-soundcard"><a href="#input-from-the-soundcard"
class="anchor">Input from the soundcard</a></h3>
<p>If you’re lucky and have a working ALSA support, try one of these…
but beware that ALSA may not work out of the box.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>liquidsoap &#39;<span class="dt">output.alsa</span>(<span class="dt">input.alsa</span>())&#39;</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>liquidsoap &#39;<span class="dt">output.alsa</span>(<span class="dt">input.alsa</span>())&#39;</span></code></pre></div>
<h3 id="other-examples"><a href="#other-examples" class="anchor">Other
examples</a></h3>
<p>You can play with many more examples. Here are a few more. To build
your own, lookup the <a href="reference.html">API documentation</a> to
check what functions are available, and what parameters they accept.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Listen to your playlist, but normalize the volume</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>liquidsoap &#39;<span class="dt">output</span>(<span class="dt">normalize</span>(<span class="dt">playlist</span>(<span class="st">&quot;playlist_file&quot;</span>)))&#39;</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ... same, but also add smart cross-fading</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>liquidsoap &#39;<span class="dt">output</span>(<span class="dt">crossfade</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>              <span class="dt">normalize</span>(<span class="dt">playlist</span>(<span class="st">&quot;playlist_file&quot;</span>))))&#39;</span></code></pre></div>
<h2 id="script-files"><a href="#script-files" class="anchor">Script
files</a></h2>
<p>We have seen how to create a very basic stream using one-line
expressions. If you need something a little bit more complicated, they
will prove uneasy to manage. In order to make your code more readable,
you can write it down to a file, named with the extension
<code>.liq</code> (eg: <code>myscript.liq</code>).</p>
<p>To run the script:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>liquidsoap myscript.liq</span></code></pre></div>
<p>On UNIX, you can also put <code>#!/path/to/your/liquidsoap</code> as
the first line of your script (“shebang”). Don’t forget to make the file
executable:</p>
<pre><code>chmod u+x myscript.liq</code></pre>
<p>Then you’ll be able to run it like this:</p>
<pre><code>./myscript.liq</code></pre>
<p>Usually, the path of the liquidsoap executable is
<code>/usr/bin/liquidsoap</code>, and we’ll use this in the
following.</p>
<h2 id="a-simple-radio"><a href="#a-simple-radio" class="anchor">A
simple radio</a></h2>
<p>In this section, we build a basic radio station that plays songs
randomly chosen from a playlist, adds a few jingles (more or less one
every four songs), and output an Ogg Vorbis stream to an Icecast
server.</p>
<p>Before reading the code of the corresponding liquidsoap script, it
might be useful to visualize the streaming process with the following
tree-like diagram. The idea is that the audio streams flows through this
diagram, following the arrows. In this case the nodes
(<code>fallback</code> and <code>random</code>) select one of the
incoming streams and relay it. The final node
<code>output.icecast</code> is an output: it actively pulls the data out
of the graph and sends it to the world.</p>
<figure>
<img src="/assets/img/basic-radio-graph.png"
alt="Graph for ‘basic-radio.liq’" />
<figcaption aria-hidden="true">Graph for ‘basic-radio.liq’</figcaption>
</figure>
<div class="sourceCode" id="cb13" data-include="basic-radio.liq"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ot">#!/usr/bin/liquidsoap</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Log dir</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="dt">log.file.path.set</span>(<span class="st">&quot;/tmp/basic-radio.log&quot;</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Music</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="va">myplaylist</span> = <span class="dt">playlist</span>(<span class="st">&quot;~/radio/music.m3u&quot;</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Some jingles</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="va">jingles</span> = <span class="dt">playlist</span>(<span class="st">&quot;~/radio/jingles.m3u&quot;</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># If something goes wrong, we&#39;ll play this</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="va">security</span> = <span class="dt">single</span>(<span class="st">&quot;~/radio/sounds/default.ogg&quot;</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Start building the feed with music</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="va">radio</span> = myplaylist</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Now add some jingles</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="va">radio</span> = <span class="dt">random</span>(<span class="va">weights</span>=[<span class="dv">1</span>, <span class="dv">4</span>], [jingles, radio])</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="co"># And finally the security</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="va">radio</span> = <span class="dt">fallback</span>(<span class="va">track_sensitive</span>=<span class="dv">false</span>, [radio, security])</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Stream it out</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="dt">output.icecast</span>(</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="ot">%vorbis</span>,</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="va">host</span>=<span class="st">&quot;localhost&quot;</span>,</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="va">port</span>=<span class="dv">8000</span>,</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="va">password</span>=<span class="st">&quot;hackme&quot;</span>,</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="va">mount</span>=<span class="st">&quot;basic-radio.ogg&quot;</span>,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>  radio</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<h2 id="whats-next"><a href="#whats-next" class="anchor">What’s
next?</a></h2>
<p>You can first have a look at a <a href="complete_case.html">more
complex example</a>. There is also a second tutorial about <a
href="advanced.html">advanced techniques</a>.</p>
<p>You should definitely learn <a href="help.html">how to get help</a>.
If you know enough liquidsoap for your use, you’ll only need to refer to
the <a href="reference.html">scripting reference</a>, or see the <a
href="cookbook.html">cookbook</a>. At some point, you might read more
about Liquidsoap’s <a href="language.html">scripting language</a>. For a
better understanding of liquidsoap, it is also useful to read a bit
about the notions of <a href="sources.html">sources</a> and <a
href="requests.html">requests</a>.</p>
          <div id="footer"></div>
        </main>
      </div>
    </div>
    <!--   Core JS Files   -->

    <script src="/assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript"></script>
    <script src="/assets/js/liq-jquery.js" type="text/javascript"></script>
  </body>

</html>
