<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Liquidsoap</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!-- Extra details for Live View on GitHub Pages -->
    <!-- Canonical SEO -->
    <link rel="canonical" href="https://www.liquidsoap.info/" />
    <!--  Social tags      -->
    <meta name="keywords" content="radio, audio, video, streaming, icecast, shoutcast">
    <meta name="description" content="Swiss-army knife for multimedia streaming">
    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Liquidsoap Streaming Language">
    <meta itemprop="description" content="Swiss-army knife for multimedia streaming">
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="product">
    <meta name="twitter:site" content="@LiquidsoapMedia">
    <meta name="twitter:title" content="Liquidsoap Streaming Language">
    <meta name="twitter:description" content="Swiss-army knife for multimedia streaming">
    <meta name="twitter:creator" content="@LiquidsoapMedia">
    <meta name="twitter:image" content="https://www.liquidsoap.info//assets/img/bottle_invert.png">
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="/assets/css/custom.css" rel="stylesheet" />
    <link href="/assets/css/material-kit.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <!-- Documentation extras -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <link rel="stylesheet" href="/assets/demo/docs.min.css">
    <style>
    .navbar-absolute-logo {
      padding-left: 45px;
    }

    .navbar-absolute-logo img {
      position: absolute;
      left: 15px;
      margin-top: -6px;
    }

    body {
      background: white;
    }

    p {
        font-size: 16px;
        text-align: justify;
    }
    </style>
  </head>

  <body class="bd-docs" data-spy="scroll" data-target=".bd-sidenav-active">
    <a id="skippy" class="sr-only sr-only-focusable" href="#content">
      <div class="container">
        <span class="skiplink-text">Skip to main content</span>
      </div>
    </a>
    <header class="navbar navbar-expand navbar-dark bg-primary flex-column flex-md-row bd-navbar">
      <a class="navbar-brand mr-0 mr-md-2 navbar-absolute-logo" href="/doc-2.4.1">
        <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 600 600" focusable="false" style="width: 25px; height: 25px;">
          <title>Liquidsoap</title>
          <style type="text/css">
.st0{fill:#FFFFFF;}
          </style>
          <g>
          <path class="st0" d="M102.4,593.8c-0.7-2.8-3.4-2.5-5.3-3.3c-24.6-10.2-37.2-28.7-37.2-55.6c-0.1-72.1,0-144.2,0-216.3
          c0-52.3,0-104.6,0-156.9c0-37.6,23.1-60.9,60.6-61.1c12-0.1,23.9-0.2,35.9,0c15.7,0.3,26.7,10.1,26.3,23
          c-0.4,12.5-11.1,21.5-26.3,21.8c-12,0.2-23.9-0.1-35.9,0.1c-11.8,0.1-15.6,3.7-15.6,15.3c-0.1,124.4,0,248.8-0.1,373.2
          c0,10.3,4.5,15.1,14.8,15.1c69.1-0.1,138.2,0,207.3-0.1c12.3,0,15.5-3.7,15.5-17.7c0-74.7,0-149.4,0-224.2c0-47.8,0-95.6,0-143.5
          c0-15.2-3-18.1-18.4-18.2c-10.8,0-21.7,0.1-32.5,0c-16-0.2-26.7-9.4-26.6-22.5c0.1-13,10.9-22.1,26.9-22.3
          c13.4-0.2,26.9-0.3,40.3,0.1c30.8,1,54.9,24.5,55,55.2c0.3,127.4,0.3,254.8,0.1,382.2c0,25.5-15.8,45.7-40.2,53.3
          c-1.7,0.5-3.8,0-4.5,2.4C262.3,593.8,182.4,593.8,102.4,593.8z"/>
          <path class="st0" d="M537.4,212.6c-16.8,23-56.5,16.5-68.6-9.5c-8-17.2-12.4-32.7-12-54.5c4.6,4.1,8.3,7.5,12.1,10.7
          c10.3,8.6,21,14,35.5,11.8c12.5-1.9,21.5,6,28.2,16.3c2,3,1.3,7.3,4.8,9.5C537.4,202.2,537.4,207.4,537.4,212.6z"/>
          <path class="st0" d="M200.6,230.4c0-55.3,0-110.5,0-165.8c0-40.7,22.3-62.7,63.2-62.7c50.4,0,100.8,0,151.3,0
          c36.1,0,59.1,21.9,60.4,57.7c0.5,13.1,0.4,26.1,0,39.2c-0.4,15.1-10.1,25.8-22.5,25.7c-12-0.1-21.6-10.1-22.3-24.8
          c-0.6-12.7-0.4-25.4-0.1-38.1c0.2-10.4-4.5-14.9-14.9-14.9c-51.5,0.1-103.1,0-154.6,0.1c-12.7,0-15.5,3.2-15.5,17.5
          c0,105.3,0,210.6,0,316c0,7.8,0.1,15.7,0,23.5c-0.2,17.5-9.4,28.9-23,28.6c-13.5-0.3-21.9-10.9-21.9-28.3
          C200.6,346.2,200.6,288.3,200.6,230.4z"/>
          </g>
        </svg>
        Liquidsoap
      </a>
      <ul class="navbar-nav flex-row d-none d-md-flex">
        <li class="nav-item dropdown">
          <a data-versions="dev 2.2.5 2.3.0 2.3.1 2.3.2 2.3.3 2.4.0
2.4.1
2.4.2" data-version="2.4.1" class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="liq-version" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            2.4.1
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="liq-version" id="liq-versions">
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://github.com/savonet/liquidsoap" target="_blank" rel="noopener" aria-label="GitHub">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false">
              <title>GitHub</title>
              <path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://twitter.com/liquidsoapmedia" target="_blank" rel="noopener" aria-label="Twitter">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false">
              <title>Twitter</title>
              <path d="M160.83 416.32c193.2 0 298.92-160.22 298.92-298.92 0-4.51 0-9-.2-13.52A214 214 0 0 0 512 49.38a212.93 212.93 0 0 1-60.44 16.6 105.7 105.7 0 0 0 46.3-58.19 209 209 0 0 1-66.79 25.37 105.09 105.09 0 0 0-181.73 71.91 116.12 116.12 0 0 0 2.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48 0 0 0 68 159.6a106.27 106.27 0 0 1-47.53-13.11v1.43a105.28 105.28 0 0 0 84.21 103.06 105.67 105.67 0 0 1-47.33 1.84 105.06 105.06 0 0 0 98.14 72.94A210.72 210.72 0 0 1 25 370.84a202.17 202.17 0 0 1-25-1.43 298.85 298.85 0 0 0 160.83 46.92" fill="currentColor" />
            </svg>
          </a>
        </li>
      </ul>
      <div class="navbar-nav-scroll ml-md-auto ">
        <ul class="navbar-nav bd-navbar-nav flex-row">
          <!--
            <li class="nav-item">
            <a class="nav-link" href=""> <i class="material-icons">card_membership</i> PRO Services </a>
            </li>
            -->
          <li class="nav-item">
            <script async src="https://cse.google.com/cse.js?cx=24f50f6f088994c53"></script>
            <style>
.cse .gsc-control-cse, .gsc-control-cse {
  background-color: transparent;
  border: none;
  width: 300px;
}
            </style>
            <div class="gcse-search"></div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/savonet/liquidsoap/issues" target="_blank" rel="noopener"><i class="material-icons">star</i> Get Help</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
        </ul>
      </div>
      <a href="https://github.com/savonet/liquidsoap" class="github-corner" aria-label="View source on Github">
        <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#9c27b0; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
          <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
          <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
          <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
      </a>
      <style>
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out
}

        @keyframes octocat-wave {
          0%,
          100% {
            transform: rotate(0)
          }
          20%,
          60% {
            transform: rotate(-25deg)
          }
          40%,
          80% {
            transform: rotate(10deg)
          }
        }

        @media (max-width:500px) {
          .github-corner:hover .octo-arm {
            animation: none
          }
          .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out
          }
        }
      </style>
    </header>
    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
          <nav class="collapse bd-links" id="bd-docs-nav">
            <div class="bd-toc-item active">
              <ul class="nav bd-sidenav">
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/doc-2.4.1/install.html">
                    Install
                  </a>
                </li>
                <li>
                  <a href="/doc-2.4.1/migrating.html">
                    Migrating from previous versions
                  </a>
                </li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="#">
                    Starters
                  </a>
                </li>
                <li><a href="/doc-2.4.1/book.html">The book</a></li>
                <li>
                  <a href="/doc-2.4.1/presentations.html">Video Presentations</a>
                </li>
                <li>
                  <a href="/doc-2.4.1/help.html">How to find help</a>
                </li>
                <li>
                  <a href="/doc-2.4.1/faq.html">Frequently Asked Questions</a>
                </li>
                <li><a href="/doc-2.4.1/quick_start.html">Quickstart</a></li>
                <li>
                  <a href="/doc-2.4.1/complete_case.html">Complete case analysis</a>
                </li>
                <li>
                  <a href="/doc-2.4.1/cookbook.html">Cookbook</a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Reference
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.4.1/language.html">Script language</a></li>
                <li>
                  <a href="/doc-2.4.1/reference.html">Core API</a></li>
                <li>
                  <a href="/doc-2.4.1/reference-extras.html">Extra API</a></li>
                <li>
                  <a href="/doc-2.4.1/reference-deprecated.html">Deprecated API</a></li>
                <li>
                  <a href="/doc-2.4.1/protocols.html">Protocols</a></li>
                <li>
                  <a href="/doc-2.4.1/settings.html">Settings</a></li>
              </ul>
              <a class="bd-toc-link" href="#">
                Basic Concepts
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.4.1/multitrack.html">Multitrack</a></li>
                <li>
                  <a href="/doc-2.4.1/latency_control.html">Latency control</a></li>
                <li>
                  <a href="/doc-2.4.1/scheduling.html">Scheduling</a></li>
                <li>
                  <a href="/doc-2.4.1/ffmpeg.html">FFmpeg support</a></li>
                <li>
                  <a href="/doc-2.4.1/encoding_formats.html">Encoding formats</a></li>
                <li>
                  <a href="/doc-2.4.1/video.html">Videos streams</a></li>
                <li>
                  <a href="/doc-2.4.1/memory.html">Memory management</a></li>
                <li>
                  <a href="/doc-2.4.1/json.html">JSON import/export</a></li>
                <li>
                  <a href="/doc-2.4.1/xml.html">XML import/export</a></li>
                <li>
                  <a href="/doc-2.4.1/yaml.html">YAML import/export</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Core Concepts
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.4.1/sources.html">Sources</a></li>
                <li>
                  <a href="/doc-2.4.1/clocks.html">Clocks</a></li>
                <li>
                  <a href="/doc-2.4.1/requests.html">Requests</a></li>
                <li>
                  <a href="/doc-2.4.1/protocols-presentation.html">Protocols</a></li>
                <li>
                  <a href="/doc-2.4.1/stream_content.html">Stream contents</a></li>
                <li>
                  <a href="/doc-2.4.1/strings_encoding.html">Strings encoding</a></li>
                <li>
                  <a href="/doc-2.4.1/script_loading.html">Script loading</a></li>
                <li><a href="/doc-2.4.1/phases.html">Execution phases</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Specific tutorials
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.4.1/harbor_http.html">Using the HTTP server</a></li>
                <li>
                  <a href="/doc-2.4.1/playlist_parsers.html">Playlist parsers</a></li>
                <li>
                  <a href="/doc-2.4.1/blank.html">Blank detection</a></li>
                <li>
                  <a href="/doc-2.4.1/metadata.html">Customize metadata</a></li>
                <li>
                  <a href="/doc-2.4.1/seek.html">Seek and cue support</a></li>
                <li>
                  <a href="/doc-2.4.1/external_decoders.html">External decoders</a></li>
                <li>
                  <a href="/doc-2.4.1/external_streams.html">External streams</a></li>
                <li>
                  <a href="/doc-2.4.1/external_encoders.html">External encoders</a></li>
                <li>
                  <a href="/doc-2.4.1/ladspa.html">LADSPA plugins</a></li>
                <li>
                  <a href="/doc-2.4.1/hls_output.html">HLS output</a></li>
                <li>
                  <a href="/doc-2.4.1/http_input.html">HTTP input</a></li>
                <li>
                  <a href="/doc-2.4.1/harbor.html">Harbor input</a></li>
                <li>
                  <a href="/doc-2.4.1/stereotool.html">Stereotool</a></li>
                <li>
                  <a href="/doc-2.4.1/server.html">Using the telnet server</a></li>
                <li>
                  <a href="/doc-2.4.1/icy_metadata.html">ICY metadata update</a></li>
                <li>
                  <a href="/doc-2.4.1/replay_gain.html">Normalization and replay gain</a></li>
                <li>
                  <a href="/doc-2.4.1/request_sources.html">Requests-based sources</a></li>
                <li>
                  <a href="/doc-2.4.1/shoutcast.html">Shoutcast output</a></li>
                <li>
                  <a href="/doc-2.4.1/dynamic_sources.html">Dynamic source creation</a></li>
                <li>
                  <a href="/doc-2.4.1/crossfade.html">Crossfading</a></li>
                <li>
                  <a href="/doc-2.4.1/in_production.html">Using in production</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    User scripts
                  </a>
                </li>
                <li>
                  <a href="/doc-2.4.1/beets.html">Beets</a></li>
                <li>
                  <a href="/doc-2.4.1/geekradio.html">Geekradio</a></li>
                <li>
                  <a href="/doc-2.4.1/radiopi.html">RadioPi</a></li>
                <li>
                  <a href="/doc-2.4.1/dolebrai.html">Dolebraï</a></li>
                <li>
                  <a href="/doc-2.4.1/frequence3.html">Frequence3</a></li>
                <li>
                  <a href="/doc-2.4.1/video-static.html">Video with a single static image</a></li>
                <li>
                  <a href="/doc-2.4.1/split-cue.html">Split a CUE sheet</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    Behind the curtains
                  </a>
                </li>
                <li>
                  <a href="/doc-2.4.1/publications.html">Some presentations and publications</a></li>
                <li>
                  <a href="https://github.com/savonet">OCaml libraries</a></li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/legacy">
                    Legacy website
                  </a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
        <!--
          <div class="d-none d-xl-block col-xl-2 bd-toc">
          <ul class="section-nav">
          <li class="toc-entry toc-h2">
          <a href="#quick-start">Quick start</a>
          <ul>
          <li class="toc-entry toc-h3">
          <a href="#css">CSS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#js">JS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#fonts-and-icons">Fonts and Icons</a>
          </li>
          </ul>
          </li>
          <li class="toc-entry toc-h2">
          <a href="#starter-template">Starter template</a>
          </li>
          </ul>
          </div>
        -->
          <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
          <ul>
<li><a href="#liquidsoap">Liquidsoap</a></li>
<li><a href="#uncategorized">Uncategorized</a></li>
</ul>
<h2 id="liquidsoap"><a href="#liquidsoap"
class="anchor">Liquidsoap</a></h2>
<h3 id="deprecated"><a href="#deprecated"
class="anchor"><code>deprecated</code></a></h3>
<p>Mark a function as deprecated.</p>
<p>Type:</p>
<pre><code>(&#39;a, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a</code>): Old function
name.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): New function
name.</li>
</ul>
<h3 id="register_flow"><a href="#register_flow"
class="anchor"><code>register_flow</code></a></h3>
<p>Deprecated: flow is no longer maintained Register a radio on
Liquidsoap Flows.</p>
<p>Type:</p>
<pre><code>(?server : string, ?user : string, ?password : string, ?email : string,
 radio : string, website : string, description : string, genre : string,
 streams : [string * string], &#39;b
 .{on_metadata : ((([string * string]) -&gt; unit)) -&gt; &#39;a}) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>server</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>user</code> (of type <code>string</code>, which defaults to
<code>"default"</code>)</li>
<li><code>password</code> (of type <code>string</code>, which defaults
to <code>"default"</code>)</li>
<li><code>email</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>radio</code> (of type <code>string</code>): Name of the
radio.</li>
<li><code>website</code> (of type <code>string</code>): URL of the
website of the radio.</li>
<li><code>description</code> (of type <code>string</code>): Description
of the radio.</li>
<li><code>genre</code> (of type <code>string</code>): Genre of the radio
(rock or rap or etc.).</li>
<li><code>streams</code> (of type <code>[string * string]</code>): List
of streams for the radio described by a pair of strings consisting of
the format of the stream and the url of the stream. The format should be
of the form “ogg/128k” consisting of the codec and the bitrate,
separated by “/”.</li>
<li><code>(unlabeled)</code> (of type
<code>'b.{on_metadata : ((([string * string]) -&gt; unit)) -&gt; 'a}</code>)</li>
</ul>
<h2 id="uncategorized"><a href="#uncategorized"
class="anchor">Uncategorized</a></h2>
<h3 id="add_metadata_resolver"><a href="#add_metadata_resolver"
class="anchor"><code>add_metadata_resolver</code></a></h3>
<p>Deprecated: use <code>decoder.metadata.add</code>.</p>
<p>Type:</p>
<pre><code>(string, ((metadata : [string * string], string) -&gt; [string * string])) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>(metadata : [string * string], string) -&gt; [string * string]</code>)</li>
</ul>
<h3 id="add_playlist_parser"><a href="#add_playlist_parser"
class="anchor"><code>add_playlist_parser</code></a></h3>
<p>Deprecated: use <code>playlist.parse.register</code> instead</p>
<p>Type:</p>
<pre><code>(name : string, mimes : [string], strict : bool,
 ((?pwd : string, string) -&gt; [[string * string] * string])) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>name</code> (of type <code>string</code>)</li>
<li><code>mimes</code> (of type <code>[string]</code>)</li>
<li><code>strict</code> (of type <code>bool</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>(?pwd : string, string) -&gt; [[string * string] * string]</code>)</li>
</ul>
<h3 id="add_protocol"><a href="#add_protocol"
class="anchor"><code>add_protocol</code></a></h3>
<p>Deprecated: use <code>protocol.add</code>.</p>
<p>Type:</p>
<pre><code>(?temporary : bool, ?static : ((string) -&gt; bool), ?syntax : string,
 ?doc : string, string,
 ((rlog : ((string) -&gt; unit), maxtime : float, string) -&gt; string?)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>temporary</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>static</code> (of type <code>(string) -&gt; bool</code>, which
defaults to <code>fun (_) -&gt; false</code>)</li>
<li><code>syntax</code> (of type <code>string</code>, which defaults to
<code>"Undocumented"</code>)</li>
<li><code>doc</code> (of type <code>string</code>, which defaults to
<code>"Undocumented"</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>(rlog : ((string) -&gt; unit), maxtime : float, string) -&gt; string?</code>)</li>
</ul>
<h3 id="add_timeout"><a href="#add_timeout"
class="anchor"><code>add_timeout</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>thread.run.recurrent</code>.</p>
<p>Type:</p>
<pre><code>(?fast : bool, float, (() -&gt; float)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>fast</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; float</code>)</li>
</ul>
<h3 id="at"><a href="#at" class="anchor"><code>at</code></a></h3>
<p>Deprecated: use <code>at</code> instead.</p>
<p>Type:</p>
<pre><code>({bool}, source(&#39;a)) -&gt; source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{bool}</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="audio_to_stereo"><a href="#audio_to_stereo"
class="anchor"><code>audio_to_stereo</code></a></h3>
<p>Deprecated: use <code>source.stereo</code></p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(&#39;a), &#39;b)) -&gt; source(audio=pcm(stereo), &#39;b)
where &#39;b is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), 'b) where 'b is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="base64.decode"><a href="#base64.decode"
class="anchor"><code>base64.decode</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>string.base64.decode</code>.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="base64.encode"><a href="#base64.encode"
class="anchor"><code>base64.encode</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>string.base64.encode</code>.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="compress.old"><a href="#compress.old"
class="anchor"><code>compress.old</code></a></h3>
<p>Deprecated: use <code>compress</code></p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(&#39;a), &#39;b)) -&gt; source(audio=pcm(&#39;a)
.{gain? : never, rms? : never}, &#39;b)
where &#39;b is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), 'b) where 'b is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>gain</code> (of type <code>() -&gt; float</code>):</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>):</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="cue_cut"><a href="#cue_cut"
class="anchor"><code>cue_cut</code></a></h3>
<p>Deprecated: integrated into requests resolution.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?cue_in_metadata : string, ?cue_out_metadata : string,
 ?on_cue_in : (() -&gt; unit), ?on_cue_out : (() -&gt; unit), &#39;a) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>""</code>)</li>
<li><code>cue_in_metadata</code> (of type <code>string</code>, which
defaults to <code>""</code>)</li>
<li><code>cue_out_metadata</code> (of type <code>string</code>, which
defaults to <code>""</code>)</li>
<li><code>on_cue_in</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>{()}</code>)</li>
<li><code>on_cue_out</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>{()}</code>)</li>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
</ul>
<h3 id="drop_audio"><a href="#drop_audio"
class="anchor"><code>drop_audio</code></a></h3>
<p>Deprecated: use <code>source.drop.audio</code></p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, &#39;b)) -&gt; source(audio=&#39;a, &#39;b)
where &#39;b is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, 'b) where 'b is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="drop_metadata"><a href="#drop_metadata"
class="anchor"><code>drop_metadata</code></a></h3>
<p>Deprecated: use <code>source.drop.metadata</code></p>
<p>Type:</p>
<pre><code>(?id : string?, source(&#39;a)) -&gt; source(&#39;a)
where &#39;a is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source('a) where 'a is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="drop_midi"><a href="#drop_midi"
class="anchor"><code>drop_midi</code></a></h3>
<p>Deprecated: use <code>source.drop.midi</code></p>
<p>Type:</p>
<pre><code>(?id : string?, source(midi=&#39;a, &#39;b)) -&gt; source(midi=&#39;a, &#39;b)
where &#39;b is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(midi='a, 'b) where 'b is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="drop_video"><a href="#drop_video"
class="anchor"><code>drop_video</code></a></h3>
<p>Deprecated: use <code>source.drop.video</code></p>
<p>Type:</p>
<pre><code>(?id : string?, source(video=&#39;a, &#39;b)) -&gt; source(video=&#39;a, &#39;b)
where &#39;b is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(video='a, 'b) where 'b is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="eat_blank"><a href="#eat_blank"
class="anchor"><code>eat_blank</code></a></h3>
<p>Deprecated: use <code>blank.eat</code> instead</p>
<p>Type:</p>
<pre><code>(?id : string?, ?at_beginning : bool, ?max_blank : {float},
 ?min_noise : {float}, ?start_blank : bool, ?threshold : {float},
 ?track_sensitive : {bool}, source(audio=pcm(&#39;a), &#39;b)) -&gt;
source(audio=pcm(&#39;a), &#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>at_beginning</code> (of type <code>bool</code>, which defaults
to <code>false</code>)</li>
<li><code>max_blank</code> (of type <code>{float}</code>, which defaults
to <code>20.0</code>)</li>
<li><code>min_noise</code> (of type <code>{float}</code>, which defaults
to <code>0.0</code>)</li>
<li><code>start_blank</code> (of type <code>bool</code>, which defaults
to <code>false</code>)</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>-40.0</code>)</li>
<li><code>track_sensitive</code> (of type <code>{bool}</code>, which
defaults to <code>true</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), 'b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>dB_levels</code> (of type <code>() -&gt; [float]?</code>):
Return the detected dB level for each channel.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_blank</code> (of type <code>() -&gt; bool</code>): Indicate
whether blank was detected.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="empty"><a href="#empty"
class="anchor"><code>empty</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>source.fail</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?) -&gt; source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="exec_at"><a href="#exec_at"
class="anchor"><code>exec_at</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>thread.when</code>.</p>
<p>Type:</p>
<pre><code>(?freq : float, pred : (() -&gt; bool), (() -&gt; &#39;a)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>freq</code> (of type <code>float</code>, which defaults to
<code>1.0</code>)</li>
<li><code>pred</code> (of type <code>() -&gt; bool</code>)</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; 'a</code>)</li>
</ul>
<h3 id="fade.final"><a href="#fade.final"
class="anchor"><code>fade.final</code></a></h3>
<p>Deprecated: was designed for transitions only and is not needed
anymore. Use <code>file.out</code> instead.</p>
<p>Type:</p>
<pre><code>(?id : string, ?duration : float, ?type : string, source(audio=pcm(&#39;a), &#39;b)) -&gt;
source(audio=pcm(&#39;a), &#39;b)
where &#39;b is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string</code>, which defaults to
<code>"fade.final"</code>)</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>3.0</code>)</li>
<li><code>type</code> (of type <code>string</code>, which defaults to
<code>"lin"</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), 'b) where 'b is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source(audio=pcm('B), 'A)? where 'A is a set of tracks to be muxed into a source</code>):
Currently selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="fade.initial"><a href="#fade.initial"
class="anchor"><code>fade.initial</code></a></h3>
<p>Deprecated: was designed for transitions only and is not needed
anymore. Use <code>fade.in</code> instead.</p>
<p>Type:</p>
<pre><code>(?id : string, ?duration : float, ?type : string, source(audio=pcm(&#39;a), &#39;b)) -&gt;
source(audio=pcm(&#39;a), &#39;b)
where &#39;b is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string</code>, which defaults to
<code>"fade.initial"</code>)</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>3.0</code>)</li>
<li><code>type</code> (of type <code>string</code>, which defaults to
<code>"lin"</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), 'b) where 'b is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="file.unlink"><a href="#file.unlink"
class="anchor"><code>file.unlink</code></a></h3>
<p>Deprecated: use <code>file.remove</code> instead.</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="garbage_collect"><a href="#garbage_collect"
class="anchor"><code>garbage_collect</code></a></h3>
<p>Deprecated: use <code>runtime.gc.full_major</code> instead</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<h3 id="get_mime"><a href="#get_mime"
class="anchor"><code>get_mime</code></a></h3>
<p>Deprecated: use <code>file.mime</code></p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="get_process_lines"><a href="#get_process_lines"
class="anchor"><code>get_process_lines</code></a></h3>
<p>Deprecated: use <code>process.read.lines</code> instead.</p>
<p>Type:</p>
<pre><code>(?timeout : float, ?env : [string * string], ?inherit_env : bool,
 ?log_errors : bool, string) -&gt; [string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>-1.0</code>)</li>
<li><code>env</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>inherit_env</code> (of type <code>bool</code>, which defaults
to <code>true</code>)</li>
<li><code>log_errors</code> (of type <code>bool</code>, which defaults
to <code>true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="get_process_output"><a href="#get_process_output"
class="anchor"><code>get_process_output</code></a></h3>
<p>Deprecated: use <code>process.read</code> instead.</p>
<p>Type:</p>
<pre><code>(?timeout : float, ?env : [string * string], ?inherit_env : bool,
 ?log_errors : bool, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>-1.0</code>)</li>
<li><code>env</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>inherit_env</code> (of type <code>bool</code>, which defaults
to <code>true</code>)</li>
<li><code>log_errors</code> (of type <code>bool</code>, which defaults
to <code>true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="getenv"><a href="#getenv"
class="anchor"><code>getenv</code></a></h3>
<p>Deprecated: use <code>environment.get</code></p>
<p>Type:</p>
<pre><code>(?string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>, which
defaults to <code>""</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="getpid"><a href="#getpid"
class="anchor"><code>getpid</code></a></h3>
<p>Deprecated: use <code>getpid</code></p>
<p>Type:</p>
<pre><code>() -&gt; int</code></pre>
<h3 id="gettimeofday"><a href="#gettimeofday"
class="anchor"><code>gettimeofday</code></a></h3>
<p>Deprecated: use <code>time</code> instead</p>
<p>Type:</p>
<pre><code>() -&gt; float</code></pre>
<h3 id="gmtime"><a href="#gmtime"
class="anchor"><code>gmtime</code></a></h3>
<p>Deprecated: use <code>time.utc</code> instead</p>
<p>Type:</p>
<pre><code>(float?) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float?</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>day</code> (of type <code>int</code>): Day of month.</li>
<li><code>dst</code> (of type <code>bool</code>): Daylight time savings
in effect.</li>
<li><code>hour</code> (of type <code>int</code>): Hours.</li>
<li><code>min</code> (of type <code>int</code>): Minutes.</li>
<li><code>month</code> (of type <code>int</code>): Month of year.</li>
<li><code>sec</code> (of type <code>int</code>): Seconds.</li>
<li><code>week_day</code> (of type <code>int</code>): Day of week
(Sunday is 0 or 7, Saturday is 6).</li>
<li><code>year</code> (of type <code>int</code>): Year.</li>
<li><code>year_day</code> (of type <code>int</code>): Day of year,
between <code>1</code> and <code>366</code>.</li>
</ul>
<h3 id="https.delete"><a href="#https.delete"
class="anchor"><code>https.delete</code></a></h3>
<p>Deprecated: use <code>http.delete</code> instead.</p>
<p>Type:</p>
<pre><code>(?headers : [string * string], ?http_version : string?, ?redirect : bool,
 ?timeout : float?, ?normalize_url : bool?, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>)</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>timeout</code> (of type <code>float?</code>, which defaults to
<code>10.0</code>)</li>
<li><code>normalize_url</code> (of type <code>bool?</code>, which
defaults to <code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>http_version</code> (of type <code>string</code>): Version of
the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="https.get"><a href="#https.get"
class="anchor"><code>https.get</code></a></h3>
<p>Deprecated: use <code>http.get</code> instead.</p>
<p>Type:</p>
<pre><code>(?headers : [string * string], ?http_version : string?, ?redirect : bool,
 ?timeout : float?, ?normalize_url : bool?, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>)</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>timeout</code> (of type <code>float?</code>, which defaults to
<code>10.0</code>)</li>
<li><code>normalize_url</code> (of type <code>bool?</code>, which
defaults to <code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>http_version</code> (of type <code>string</code>): Version of
the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="https.head"><a href="#https.head"
class="anchor"><code>https.head</code></a></h3>
<p>Deprecated: use <code>http.head</code> instead.</p>
<p>Type:</p>
<pre><code>(?headers : [string * string], ?http_version : string?, ?redirect : bool,
 ?timeout : float?, ?normalize_url : bool?, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>)</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>timeout</code> (of type <code>float?</code>, which defaults to
<code>10.0</code>)</li>
<li><code>normalize_url</code> (of type <code>bool?</code>, which
defaults to <code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>http_version</code> (of type <code>string</code>): Version of
the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="https.post"><a href="#https.post"
class="anchor"><code>https.post</code></a></h3>
<p>Deprecated: use <code>http.post</code> instead.</p>
<p>Type:</p>
<pre><code>(?data : {string}, ?headers : [string * string], ?http_version : string?,
 ?redirect : bool, ?timeout : float?, ?normalize_url : bool?, string) -&gt;
string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>data</code> (of type <code>{string}</code>, which defaults to
<code>""</code>)</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>)</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>timeout</code> (of type <code>float?</code>, which defaults to
<code>10.0</code>)</li>
<li><code>normalize_url</code> (of type <code>bool?</code>, which
defaults to <code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>http_version</code> (of type <code>string</code>): Version of
the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="https.put"><a href="#https.put"
class="anchor"><code>https.put</code></a></h3>
<p>Deprecated: use <code>http.put</code> instead.</p>
<p>Type:</p>
<pre><code>(?data : {string}, ?headers : [string * string], ?http_version : string?,
 ?redirect : bool, ?timeout : float?, ?normalize_url : bool?, string) -&gt;
string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>data</code> (of type <code>{string}</code>, which defaults to
<code>""</code>)</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>)</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>timeout</code> (of type <code>float?</code>, which defaults to
<code>10.0</code>)</li>
<li><code>normalize_url</code> (of type <code>bool?</code>, which
defaults to <code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>http_version</code> (of type <code>string</code>): Version of
the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="id"><a href="#id" class="anchor"><code>id</code></a></h3>
<p>Deprecated: this function will be removed in a future release</p>
<p>Type:</p>
<pre><code>(?id : &#39;a?, &#39;b) -&gt; &#39;b</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>'a?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>'b</code>)</li>
</ul>
<h3 id="in"><a href="#in" class="anchor"><code>in</code></a></h3>
<p>Deprecated: use <code>input</code> instead.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?start : bool, ?fallible : bool) -&gt; source(audio=pcm(&#39;A))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_start</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when source starts</li>
<li><code>on_stop</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when source stops</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="input.external"><a href="#input.external"
class="anchor"><code>input.external</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>input.external.rawaudio</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer : float, ?channels : int, ?max : float,
 ?restart : bool, ?restart_on_error : bool, ?samplerate : int, {string}) -&gt;
source(audio=pcm(&#39;a))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>2.0</code>)</li>
<li><code>channels</code> (of type <code>int</code>, which defaults to
<code>2</code>)</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.0</code>)</li>
<li><code>restart</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>restart_on_error</code> (of type <code>bool</code>, which
defaults to <code>false</code>)</li>
<li><code>samplerate</code> (of type <code>int</code>, which defaults to
<code>44100</code>)</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="input.https"><a href="#input.https"
class="anchor"><code>input.https</code></a></h3>
<p>Deprecated: use <code>input.http</code> instead</p>
<p>Type:</p>
<pre><code>(?id : string?, ?debug : bool, ?deduplicate_metadata : bool,
 ?float_args : [string * float], ?format : string?,
 ?int_args : [string * int], ?max_buffer : float,
 ?metadata_filter : (([string * string]) -&gt; [string * string])?,
 ?new_track_on_metadata : bool, ?on_connect : (([string * string]) -&gt; unit)?,
 ?on_disconnect : (() -&gt; unit)?, ?on_error : ((error) -&gt; unit)?,
 ?on_start : (() -&gt; unit)?, ?on_stop : (() -&gt; unit)?, ?poll_delay : float,
 ?self_sync : {bool?}, ?start : bool, ?string_args : [string * string],
 ?timeout : float, ?trim_url : bool, ?user_agent : string, {string}) -&gt;
source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>debug</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>deduplicate_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>)</li>
<li><code>float_args</code> (of type <code>[string * float]</code>,
which defaults to <code>[]</code>)</li>
<li><code>format</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>int_args</code> (of type <code>[string * int]</code>, which
defaults to <code>[]</code>)</li>
<li><code>max_buffer</code> (of type <code>float</code>, which defaults
to <code>5.0</code>)</li>
<li><code>metadata_filter</code> (of type
<code>(([string * string]) -&gt; [string * string])?</code>, which
defaults to <code>null</code>)</li>
<li><code>new_track_on_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>)</li>
<li><code>on_connect</code> (of type
<code>(([string * string]) -&gt; unit)?</code>, which defaults to
<code>null</code>)</li>
<li><code>on_disconnect</code> (of type <code>(() -&gt; unit)?</code>,
which defaults to <code>null</code>)</li>
<li><code>on_error</code> (of type <code>((error) -&gt; unit)?</code>,
which defaults to <code>null</code>)</li>
<li><code>on_start</code> (of type <code>(() -&gt; unit)?</code>, which
defaults to <code>null</code>)</li>
<li><code>on_stop</code> (of type <code>(() -&gt; unit)?</code>, which
defaults to <code>null</code>)</li>
<li><code>poll_delay</code> (of type <code>float</code>, which defaults
to <code>2.0</code>)</li>
<li><code>self_sync</code> (of type <code>{bool?}</code>, which defaults
to <code>null</code>)</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>string_args</code> (of type <code>[string * string]</code>,
which defaults to <code>[]</code>)</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>10.0</code>)</li>
<li><code>trim_url</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>user_agent</code> (of type <code>string</code>, which defaults
to <code>"Liquidsoap/2.4.1 (Unix; OCaml 4.14.2)"</code>)</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>set_url</code> (of type <code>({string}) -&gt; unit</code>):
Set the source’s url.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>status</code> (of type <code>() -&gt; string</code>): Return
the current status of the source, either “stopped” (the source isn’t
trying to relay the HTTP stream), “starting” (polling task is about to
begin) “polling” (attempting to connect to the HTTP stream), “connected
<url>” (connected to <url>, buffering or playing back the stream) or
“stopping” (source is stopping).</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
<li><code>url</code> (of type <code>() -&gt; string</code>): Return the
source’s current url.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_connect</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler when a source is connected. Its receives the list
of ICY-specific headers, if available.</li>
<li><code>on_disconnect</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when a source is disconnected.</li>
<li><code>on_error</code> (of type
<code>(synchronous : bool, ((error) -&gt; unit)) -&gt; unit</code>):
Call a given handler when an error occurs.</li>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_start</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when source starts</li>
<li><code>on_stop</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when source stops</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="insert_metadata"><a href="#insert_metadata"
class="anchor"><code>insert_metadata</code></a></h3>
<p>Deprecated: use the insert_metadata source method</p>
<p>Type:</p>
<pre><code>(?id : &#39;a?, source(&#39;b)) -&gt; source(&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>'a?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="json"><a href="#json" class="anchor"><code>json</code></a></h3>
<p>Deprecated: use json.object</p>
<p>Type:</p>
<pre><code>() -&gt; json</code></pre>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(string, 'a) -&gt; unit</code>): Add
or replace a new <code>key</code>/<code>value</code> pair to the
object.</li>
<li><code>remove</code> (of type <code>(string) -&gt; unit</code>):
Remove a key from the object. Does not nothing if the key does not
exist.</li>
<li><code>stringify</code> (of type
<code>(?compact : bool, ?json5 : bool) -&gt; string</code>): Render
object as json string.</li>
</ul>
<h3 id="json_of"><a href="#json_of"
class="anchor"><code>json_of</code></a></h3>
<p>Deprecated: use <code>json.stringify</code> instead</p>
<p>Type:</p>
<pre><code>(?compact : bool, ?json5 : bool, &#39;a) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>compact</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Output compact text.</li>
<li><code>json5</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Use json5 extended spec.</li>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
</ul>
<h3 id="list.mem_assoc"><a href="#list.mem_assoc"
class="anchor"><code>list.mem_assoc</code></a></h3>
<p>Deprecated: use <code>list.assoc.mem</code> instead</p>
<p>Type:</p>
<pre><code>(&#39;a, [&#39;a * &#39;b]) -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>['a * 'b] where 'a is an orderable type</code>)</li>
</ul>
<h3 id="localtime"><a href="#localtime"
class="anchor"><code>localtime</code></a></h3>
<p>Deprecated: use <code>time.local</code> instead</p>
<p>Type:</p>
<pre><code>(float?) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float?</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>day</code> (of type <code>int</code>): Day of month.</li>
<li><code>dst</code> (of type <code>bool</code>): Daylight time savings
in effect.</li>
<li><code>hour</code> (of type <code>int</code>): Hours.</li>
<li><code>min</code> (of type <code>int</code>): Minutes.</li>
<li><code>month</code> (of type <code>int</code>): Month of year.</li>
<li><code>sec</code> (of type <code>int</code>): Seconds.</li>
<li><code>week_day</code> (of type <code>int</code>): Day of week
(Sunday is 0 or 7, Saturday is 6).</li>
<li><code>year</code> (of type <code>int</code>): Year.</li>
<li><code>year_day</code> (of type <code>int</code>): Day of year,
between <code>1</code> and <code>366</code>.</li>
</ul>
<h3 id="map_metadata"><a href="#map_metadata"
class="anchor"><code>map_metadata</code></a></h3>
<p>Deprecated: use metadata.map</p>
<p>Type:</p>
<pre><code>(?id : string?, ?update : bool, ?strip : bool?, ?insert_missing : bool?,
 (([string * string]) -&gt; [string * string]), source(&#39;a)) -&gt; source(&#39;a)
where &#39;a is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>"metadata.map"</code>)</li>
<li><code>update</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>strip</code> (of type <code>bool?</code>, which defaults to
<code>null</code>)</li>
<li><code>insert_missing</code> (of type <code>bool?</code>, which
defaults to <code>null</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>([string * string]) -&gt; [string * string]</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source('a) where 'a is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="merge_tracks"><a href="#merge_tracks"
class="anchor"><code>merge_tracks</code></a></h3>
<p>Deprecated: use <code>source.tracks</code> and
<code>source</code></p>
<p>Type:</p>
<pre><code>(?id : string?, source(&#39;a)) -&gt; source(&#39;a)
where &#39;a is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source('a) where 'a is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="mkavailable"><a href="#mkavailable"
class="anchor"><code>mkavailable</code></a></h3>
<p>Deprecated: use <code>source.available</code> instead.</p>
<p>Type:</p>
<pre><code>(?id : string, ?track_sensitive : {bool}, ?active : {bool},
 ?available : {bool}, source(&#39;a)) -&gt; source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string</code>, which defaults to
<code>"mkavailable"</code>)</li>
<li><code>track_sensitive</code> (of type <code>{bool}</code>, which
defaults to <code>true</code>)</li>
<li><code>active</code> (of type <code>{bool}</code>, which defaults to
<code>false</code>)</li>
<li><code>available</code> (of type <code>{bool}</code>, which defaults
to <code>true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type <code>() -&gt; source('A)?</code>):
Currently selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="mux_audio"><a href="#mux_audio"
class="anchor"><code>mux_audio</code></a></h3>
<p>Deprecated: use <code>source.mux.audio</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, audio : source(audio=&#39;A, &#39;B), source(&#39;a)) -&gt; source(audio=&#39;A,
&#39;a) where &#39;a is a set of tracks to be muxed into a source, &#39;A is a track</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>audio</code> (of type
<code>source(audio='B, 'A) where 'B is a track</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source('a) where 'a is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="mux_midi"><a href="#mux_midi"
class="anchor"><code>mux_midi</code></a></h3>
<p>Deprecated: use <code>source.mux.midi</code></p>
<p>Type:</p>
<pre><code>(?id : string?, midi : source(midi=&#39;A, &#39;B), source(&#39;a)) -&gt; source(midi=&#39;A,
&#39;a) where &#39;a is a set of tracks to be muxed into a source, &#39;A is a track</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>midi</code> (of type
<code>source(midi='B, 'A) where 'B is a track</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source('a) where 'a is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="mux_video"><a href="#mux_video"
class="anchor"><code>mux_video</code></a></h3>
<p>Deprecated: use <code>source.mux.video</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, video : source(video=&#39;A, &#39;B), source(&#39;a)) -&gt; source(video=&#39;A,
&#39;a) where &#39;a is a set of tracks to be muxed into a source, &#39;A is a track</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>video</code> (of type
<code>source(video='B, 'A) where 'B is a track</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source('a) where 'a is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="of_json"><a href="#of_json"
class="anchor"><code>of_json</code></a></h3>
<p>Deprecated: use <code>json.parse</code> instead</p>
<p>Type:</p>
<pre><code>(default : &#39;a, string) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>'a</code>): Default value if
string cannot be parsed.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="on_blank"><a href="#on_blank"
class="anchor"><code>on_blank</code></a></h3>
<p>Deprecated: use <code>blank.detect</code> instead</p>
<p>Type:</p>
<pre><code>(?id : string?, ?max_blank : {float}, ?min_noise : {float},
 ?start_blank : bool, ?threshold : {float}, ?track_sensitive : {bool},
 (() -&gt; unit), source(audio=pcm(&#39;a), &#39;b)) -&gt; source(audio=pcm(&#39;a), &#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>max_blank</code> (of type <code>{float}</code>, which defaults
to <code>20.0</code>)</li>
<li><code>min_noise</code> (of type <code>{float}</code>, which defaults
to <code>0.0</code>)</li>
<li><code>start_blank</code> (of type <code>bool</code>, which defaults
to <code>false</code>)</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>-40.0</code>)</li>
<li><code>track_sensitive</code> (of type <code>{bool}</code>, which
defaults to <code>true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), 'b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>dB_levels</code> (of type <code>() -&gt; [float]?</code>):
Return the detected dB level for each channel.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_blank</code> (of type <code>() -&gt; bool</code>): Indicate
whether blank was detected.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_blank</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when detecting a blank.</li>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_noise</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when noise is detected.</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="on_metadata"><a href="#on_metadata"
class="anchor"><code>on_metadata</code></a></h3>
<p>Deprecated: use the on_metadata source method</p>
<p>Type:</p>
<pre><code>(id : &#39;a, source(&#39;b), (([string * string]) -&gt; unit)) -&gt; source(&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>'a</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('b)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>([string * string]) -&gt; unit</code>)</li>
</ul>
<h3 id="on_track"><a href="#on_track"
class="anchor"><code>on_track</code></a></h3>
<p>Deprecated: use the on_track source method</p>
<p>Type:</p>
<pre><code>(id : &#39;a, source(&#39;b), (([string * string]) -&gt; unit)) -&gt; source(&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>'a</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('b)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>([string * string]) -&gt; unit</code>)</li>
</ul>
<h3 id="out"><a href="#out" class="anchor"><code>out</code></a></h3>
<p>Deprecated: use <code>output</code> instead.</p>
<p>Type:</p>
<pre><code>(source(audio=pcm(&#39;A))) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('A))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_start</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when output starts</li>
<li><code>on_stop</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when output stops</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="output.preferred"><a href="#output.preferred"
class="anchor"><code>output.preferred</code></a></h3>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool, ?start : bool, source(audio=pcm(&#39;A))) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('A))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_start</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when output starts</li>
<li><code>on_stop</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when output stops</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="playlist.once"><a href="#playlist.once"
class="anchor"><code>playlist.once</code></a></h3>
<p>Deprecated: this function has been replaced with
<code>playlist</code>, setting <code>reload_mode</code> argument to
<code>"never"</code> and <code>loop</code> to <code>false</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?random : bool, ?reload_mode : string, ?prefetch : int,
 ?filter : ((request) -&gt; bool), string) -&gt; source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>random</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>reload_mode</code> (of type <code>string</code>, which
defaults to <code>""</code>)</li>
<li><code>prefetch</code> (of type <code>int</code>, which defaults to
<code>1</code>)</li>
<li><code>filter</code> (of type <code>(request) -&gt; bool</code>,
which defaults to <code>fun (_) -&gt; true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(request) -&gt; bool</code>): Add a
request to the queue. Requests are resolved before being added. Returns
<code>true</code> if the request was successfully added.</li>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>current</code> (of type <code>() -&gt; request?</code>): Get
the request currently being played.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>fetch</code> (of type <code>() -&gt; unit</code>): Notify the
source to queue a new request. If <code>synchronous</code> is
<code>false</code> (the default), this method returns immediately and a
new request is fetched in the background. If <code>synchronous</code> is
<code>true</code>, can take long to return and should usually be run in
a separate thread.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>length</code> (of type <code>() -&gt; int</code>):</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>queue</code> (of type <code>() -&gt; [request]</code>): Get
the requests currently in the queue.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>reload</code> (of type
<code>(?empty_queue : bool, ?uri : string?) -&gt; unit</code>):</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>remaining_files</code> (of type
<code>() -&gt; [string]</code>):</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>set_queue</code> (of type
<code>([request]) -&gt; unit</code>): Set the queue of requests.
Requests are resolved before being added to the queue. You are
responsible for destroying the requests currently in the queue.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="playlist.reloadable"><a href="#playlist.reloadable"
class="anchor"><code>playlist.reloadable</code></a></h3>
<p>Deprecated: use <code>playlist</code> instead</p>
<p>Type:</p>
<pre><code>(?id : string?, ?mime_type : string, ?mode : string,
 ?on_track : (() -&gt; unit), ?prefix : string, ?reload : int,
 ?reload_mode : string, string) -&gt; source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>mime_type</code> (of type <code>string</code>, which defaults
to <code>""</code>)</li>
<li><code>mode</code> (of type <code>string</code>, which defaults to
<code>"randomize"</code>)</li>
<li><code>on_track</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>{()}</code>)</li>
<li><code>prefix</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>reload</code> (of type <code>int</code>, which defaults to
<code>0</code>)</li>
<li><code>reload_mode</code> (of type <code>string</code>, which
defaults to <code>"seconds"</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(request) -&gt; bool</code>): Add a
request to the queue. Requests are resolved before being added. Returns
<code>true</code> if the request was successfully added.</li>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>current</code> (of type <code>() -&gt; request?</code>): Get
the request currently being played.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>fetch</code> (of type <code>() -&gt; unit</code>): Notify the
source to queue a new request. If <code>synchronous</code> is
<code>false</code> (the default), this method returns immediately and a
new request is fetched in the background. If <code>synchronous</code> is
<code>true</code>, can take long to return and should usually be run in
a separate thread.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>length</code> (of type <code>() -&gt; int</code>):</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>queue</code> (of type <code>() -&gt; [request]</code>): Get
the requests currently in the queue.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>reload</code> (of type
<code>(?empty_queue : bool, ?uri : string?) -&gt; unit</code>):</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>remaining_files</code> (of type
<code>() -&gt; [string]</code>):</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>set_queue</code> (of type
<code>([request]) -&gt; unit</code>): Set the queue of requests.
Requests are resolved before being added to the queue. You are
responsible for destroying the requests currently in the queue.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="playlist.safe"><a href="#playlist.safe"
class="anchor"><code>playlist.safe</code></a></h3>
<p>Deprecated: use mksafe and playlist instead.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?mime_type : string, ?mode : string,
 ?on_track : (() -&gt; unit), ?prefix : string, ?reload : int,
 ?reload_mode : string, string) -&gt; source(&#39;a)
where &#39;a is a set of internal tracks</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>mime_type</code> (of type <code>string</code>, which defaults
to <code>""</code>)</li>
<li><code>mode</code> (of type <code>string</code>, which defaults to
<code>"randomize"</code>)</li>
<li><code>on_track</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>{()}</code>)</li>
<li><code>prefix</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>reload</code> (of type <code>int</code>, which defaults to
<code>0</code>)</li>
<li><code>reload_mode</code> (of type <code>string</code>, which
defaults to <code>"seconds"</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source('A)? where 'A is a set of internal tracks</code>):
Currently selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="quote"><a href="#quote"
class="anchor"><code>quote</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>string.quote</code>.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="replaygain"><a href="#replaygain"
class="anchor"><code>replaygain</code></a></h3>
<p>Deprecated: use <code>normalize_track_gain</code></p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(&#39;a), &#39;b)) -&gt; source(audio=pcm(&#39;a), &#39;b)
where &#39;b is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), 'b) where 'b is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="request.create.raw"><a href="#request.create.raw"
class="anchor"><code>request.create.raw</code></a></h3>
<p>Deprecated: use <code>request.create</code> instead.</p>
<p>Type:</p>
<pre><code>(?cue_in_metadata : string?, ?cue_out_metadata : string?, ?persistent : bool,
 ?resolve_metadata : bool, ?excluded_metadata_resolvers : [string],
 ?temporary : bool, string) -&gt; request</code></pre>
<p>Arguments:</p>
<ul>
<li><code>cue_in_metadata</code> (of type <code>string?</code>, which
defaults to <code>"liq_cue_in"</code>)</li>
<li><code>cue_out_metadata</code> (of type <code>string?</code>, which
defaults to <code>"liq_cue_out"</code>)</li>
<li><code>persistent</code> (of type <code>bool</code>, which defaults
to <code>false</code>)</li>
<li><code>resolve_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>)</li>
<li><code>excluded_metadata_resolvers</code> (of type
<code>[string]</code>, which defaults to <code>[]</code>)</li>
<li><code>temporary</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="request.dynamic.list"><a href="#request.dynamic.list"
class="anchor"><code>request.dynamic.list</code></a></h3>
<p>Deprecated: use <code>request.dynamic</code> instead</p>
<p>Type:</p>
<pre><code>(?id : string?, ?available : {bool}, ?prefetch : int?,
 ?retry_delay : {float}, ?synchronous : bool, ?timeout : float?,
 ?native : bool, (() -&gt; [request])) -&gt; source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>available</code> (of type <code>{bool}</code>, which defaults
to <code>true</code>)</li>
<li><code>prefetch</code> (of type <code>int?</code>, which defaults to
<code>null</code>)</li>
<li><code>retry_delay</code> (of type <code>{float}</code>, which
defaults to <code>0.1</code>)</li>
<li><code>synchronous</code> (of type <code>bool</code>, which defaults
to <code>false</code>)</li>
<li><code>timeout</code> (of type <code>float?</code>, which defaults to
<code>null</code>)</li>
<li><code>native</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>() -&gt; [request]</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(request) -&gt; bool</code>): Add a
request to the queue. Requests are resolved before being added. Returns
<code>true</code> if the request was successfully added.</li>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>current</code> (of type <code>() -&gt; request?</code>): Get
the request currently being played.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>fetch</code> (of type <code>() -&gt; unit</code>): Notify the
source to queue a new request. If <code>synchronous</code> is
<code>false</code> (the default), this method returns immediately and a
new request is fetched in the background. If <code>synchronous</code> is
<code>true</code>, can take long to return and should usually be run in
a separate thread.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>queue</code> (of type <code>() -&gt; [request]</code>): Get
the requests currently in the queue.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>set_queue</code> (of type
<code>([request]) -&gt; unit</code>): Set the queue of requests.
Requests are resolved before being added to the queue. You are
responsible for destroying the requests currently in the queue.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="request.ready"><a href="#request.ready"
class="anchor"><code>request.ready</code></a></h3>
<p>Deprecated: use <code>request.resolved</code></p>
<p>Type:</p>
<pre><code>(request) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="rewrite_metadata"><a href="#rewrite_metadata"
class="anchor"><code>rewrite_metadata</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>metadata.map</code>.</p>
<p>Type:</p>
<pre><code>([string * string], ?insert_missing : bool, ?update : bool, ?strip : bool,
 source(&#39;a)) -&gt; source(&#39;a)
where &#39;a is a set of tracks to be muxed into a source</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
<li><code>insert_missing</code> (of type <code>bool</code>, which
defaults to <code>true</code>)</li>
<li><code>update</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>strip</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source('a) where 'a is a set of tracks to be muxed into a source</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="run_process"><a href="#run_process"
class="anchor"><code>run_process</code></a></h3>
<p>Deprecated: use <code>process.run</code> instead</p>
<p>Type:</p>
<pre><code>(?env : [string * string], ?inherit_env : bool, ?stdin : string,
 ?rwdirs : [string], ?rodirs : [string], ?network : bool?, ?timeout : float?,
 string) -&gt; string * string * (string * string)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>env</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>inherit_env</code> (of type <code>bool</code>, which defaults
to <code>true</code>)</li>
<li><code>stdin</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>rwdirs</code> (of type <code>[string]</code>, which defaults
to <code>["default"]</code>)</li>
<li><code>rodirs</code> (of type <code>[string]</code>, which defaults
to <code>["default"]</code>)</li>
<li><code>network</code> (of type <code>bool?</code>, which defaults to
<code>null</code>)</li>
<li><code>timeout</code> (of type <code>float?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="say_metadata"><a href="#say_metadata"
class="anchor"><code>say_metadata</code></a></h3>
<p>Deprecated: use <code>source.say_metadata</code> instead</p>
<p>Type:</p>
<pre><code>(source(&#39;a), pattern : string) -&gt; source(&#39;a) where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>source('a) where 'a is an orderable type</code>)</li>
<li><code>pattern</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>cancel_pending</code> (of type
<code>() -&gt; unit</code>):</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>pending</code> (of type
<code>() -&gt; source('A)? where 'A is an orderable type</code>):</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source('A)? where 'A is an orderable type</code>):
Currently selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>set_pending</code> (of type
<code>(source('A)?) -&gt; unit where 'A is an orderable type</code>):</li>
<li><code>skip</code> (of type
<code>(?cancel_pending : bool) -&gt; unit</code>):</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="setenv"><a href="#setenv"
class="anchor"><code>setenv</code></a></h3>
<p>Deprecated: use <code>environment.set</code></p>
<p>Type:</p>
<pre><code>(string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="skip_blank"><a href="#skip_blank"
class="anchor"><code>skip_blank</code></a></h3>
<p>Deprecated: use <code>blank.skip</code> instead</p>
<p>Type:</p>
<pre><code>(?id : string?, ?threshold : float, ?max_blank : float, ?min_noise : float,
 ?track_sensitive : bool, source(audio=pcm(&#39;a), &#39;b)) -&gt; source(audio=pcm(&#39;a),
&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>"blank.skip"</code>)</li>
<li><code>threshold</code> (of type <code>float</code>, which defaults
to <code>-40.0</code>)</li>
<li><code>max_blank</code> (of type <code>float</code>, which defaults
to <code>20.0</code>)</li>
<li><code>min_noise</code> (of type <code>float</code>, which defaults
to <code>0.0</code>)</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), 'b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>dB_levels</code> (of type <code>() -&gt; [float]?</code>):
Return the detected dB level for each channel.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_blank</code> (of type <code>() -&gt; bool</code>): Indicate
whether blank was detected.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_blank</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when detecting a blank.</li>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_noise</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler when noise is detected.</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="sleep"><a href="#sleep"
class="anchor"><code>sleep</code></a></h3>
<p>Deprecated: use <code>thread.pause</code></p>
<p>Type:</p>
<pre><code>(float) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="source.last_metadata"><a href="#source.last_metadata"
class="anchor"><code>source.last_metadata</code></a></h3>
<p>Deprecated: use the last_metadata source method</p>
<p>Type:</p>
<pre><code>(id : &#39;a, source(&#39;b)) -&gt; [string * string]?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>'a</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('b)</code>)</li>
</ul>
<h3 id="source.on_end"><a href="#source.on_end"
class="anchor"><code>source.on_end</code></a></h3>
<p>Deprecated: use the on_position source method</p>
<p>Type:</p>
<pre><code>(id : &#39;a, delay : {float}, source(&#39;b), ((float, [string * string]) -&gt; unit)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>'a</code>)</li>
<li><code>delay</code> (of type <code>{float}</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('b)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>(float, [string * string]) -&gt; unit</code>)</li>
</ul>
<h3 id="source.on_frame"><a href="#source.on_frame"
class="anchor"><code>source.on_frame</code></a></h3>
<p>Deprecated: use the on_frame source method</p>
<p>Type:</p>
<pre><code>(id : &#39;a, ?before : bool, source(&#39;b), (() -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>'a</code>)</li>
<li><code>before</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('b)</code>)</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>)</li>
</ul>
<h3 id="source.on_offset"><a href="#source.on_offset"
class="anchor"><code>source.on_offset</code></a></h3>
<p>Deprecated: use the on_position source method</p>
<p>Type:</p>
<pre><code>(id : &#39;a, ?force : bool, offset : {float},
 ((float, [string * string]) -&gt; unit), source(&#39;b)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>'a</code>)</li>
<li><code>force</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>offset</code> (of type <code>{float}</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>(float, [string * string]) -&gt; unit</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('b)</code>)</li>
</ul>
<h3 id="string.utf8.escape"><a href="#string.utf8.escape"
class="anchor"><code>string.utf8.escape</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>string.escape</code>.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string_of"><a href="#string_of"
class="anchor"><code>string_of</code></a></h3>
<p>Deprecated: use <code>string</code>.</p>
<p>Type:</p>
<pre><code>(&#39;a) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
</ul>
<h3 id="string_of_float"><a href="#string_of_float"
class="anchor"><code>string_of_float</code></a></h3>
<p>Deprecated: use <code>string.float</code>.</p>
<p>Type:</p>
<pre><code>(float) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="strip_blank"><a href="#strip_blank"
class="anchor"><code>strip_blank</code></a></h3>
<p>Deprecated: use <code>blank.strip</code> instead</p>
<p>Type:</p>
<pre><code>(?id : string?, ?max_blank : {float}, ?min_noise : {float},
 ?start_blank : bool, ?threshold : {float}, ?track_sensitive : {bool},
 source(audio=pcm(&#39;a), &#39;b)) -&gt; source(audio=pcm(&#39;a), &#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>max_blank</code> (of type <code>{float}</code>, which defaults
to <code>20.0</code>)</li>
<li><code>min_noise</code> (of type <code>{float}</code>, which defaults
to <code>0.0</code>)</li>
<li><code>start_blank</code> (of type <code>bool</code>, which defaults
to <code>false</code>)</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>-40.0</code>)</li>
<li><code>track_sensitive</code> (of type <code>{bool}</code>, which
defaults to <code>true</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), 'b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>dB_levels</code> (of type <code>() -&gt; [float]?</code>):
Return the detected dB level for each channel.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_blank</code> (of type <code>() -&gt; bool</code>): Indicate
whether blank was detected.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="system"><a href="#system"
class="anchor"><code>system</code></a></h3>
<p>Deprecated: use <code>process.run</code> instead.</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>status</code> (of type
<code>string.{code : int, description : string}</code>): Status when
process ended, can be one of <code>"exit"</code> (the program exited,
the <code>status</code> code is then relevant), <code>"killed"</code>
(the program was killed by signal given in <code>status</code> code),
<code>"stopped"</code> (the program was stopped by signal given in
<code>status</code> code) or <code>"exception"</code> (the program
raised and exception detailed in the <code>description</code>).</li>
<li><code>stderr</code> (of type <code>string</code>): Messages written
by process on standard error stream.</li>
<li><code>stdout</code> (of type <code>string</code>): Messages written
by process on standard output stream.</li>
</ul>
<h3 id="test_process"><a href="#test_process"
class="anchor"><code>test_process</code></a></h3>
<p>Deprecated: use <code>process.test</code> instead.</p>
<p>Type:</p>
<pre><code>(?timeout : float, ?env : [string * string], ?inherit_env : bool, string) -&gt;
bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>-1.0</code>)</li>
<li><code>env</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>inherit_env</code> (of type <code>bool</code>, which defaults
to <code>true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="video.line"><a href="#video.line"
class="anchor"><code>video.line</code></a></h3>
<p>Deprecated: use <code>video.add_line</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?alpha : {float}, ?color : {int}, {int * int}, {int * int},
 source(video=canvas(&#39;a), &#39;b)) -&gt; source(video=canvas(&#39;a), &#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>alpha</code> (of type <code>{float}</code>, which defaults to
<code>1.0</code>)</li>
<li><code>color</code> (of type <code>{int}</code>, which defaults to
<code>0</code>)</li>
<li><code>(unlabeled)</code> (of type <code>{int * int}</code>)</li>
<li><code>(unlabeled)</code> (of type <code>{int * int}</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(video=canvas('a), 'b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="video.rectangle"><a href="#video.rectangle"
class="anchor"><code>video.rectangle</code></a></h3>
<p>Deprecated: use <code>video.add_rectangle</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?alpha : {float}, ?color : {int}, height : {int},
 width : {int}, ?x : {int}, ?y : {int}, source(video=canvas(&#39;a), &#39;b)) -&gt;
source(video=canvas(&#39;a), &#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>alpha</code> (of type <code>{float}</code>, which defaults to
<code>1.0</code>)</li>
<li><code>color</code> (of type <code>{int}</code>, which defaults to
<code>0</code>)</li>
<li><code>height</code> (of type <code>{int}</code>)</li>
<li><code>width</code> (of type <code>{int}</code>)</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>0</code>)</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>0</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(video=canvas('a), 'b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="video.transparent"><a href="#video.transparent"
class="anchor"><code>video.transparent</code></a></h3>
<p>Deprecated: use <code>video.alpha.of_color</code></p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : int, ?precision : float, source(video=canvas(&#39;a),
 &#39;b)) -&gt; source(video=canvas(&#39;a), &#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>0</code>)</li>
<li><code>precision</code> (of type <code>float</code>, which defaults
to <code>0.2</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(video=canvas('a), 'b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffered</code> (of type
<code>() -&gt; [string * float]</code>): Length of buffered data.</li>
<li><code>clock</code> (of type <code>clock</code>): The source’s
clock</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>generate_frame</code> (of type <code>() -&gt; unit</code>):
Generate a frame from the source without consuming it. This can be
useful in advanced cases where generating a frame is required to trigger
some side effect like calculating some metadata before making a
decision. You should make sure that the source is available before
calling this function and it should only be called inside synchronous
streaming loop callback such as <code>on_frame</code>!</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>):
Dynamically insert metadata in a stream. Inserts a new track with the
given metadata if <code>new_track</code> is <code>true</code>.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>register_command</code> (of type
<code>(?usage : string?, description : string, string, ((string) -&gt; string)) -&gt; unit</code>):
Register a server command for this source. Command is registered under
the source’s id namespace when it gets up and de-registered when it gets
down.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reset_last_metadata_on_track</code> (of type
<code>(() -&gt; bool).{set : (bool) -&gt; unit}</code>): If
<code>true</code>, the source’s <code>last_metadata</code> is reset on
each new track. If a metadata is present along with the track mark, then
it becomes the new <code>last_metadata</code>, otherwise,
<code>last_metadata becomes</code>null`.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controlling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>Callbacks:</p>
<ul>
<li><code>on_frame</code> (of type
<code>(?before : bool, synchronous : bool, (() -&gt; unit)) -&gt; unit</code>):
Call a given handler on frame. When <code>before</code> is
<code>true</code>, callback is executed before computing the frame and
after otherwise</li>
<li><code>on_metadata</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler to execute on each metadata</li>
<li><code>on_position</code> (of type
<code>(position : {float}, ?remaining : bool, ?allow_partial : bool,  synchronous : bool, ((float, [string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track position. If <code>remaining</code> is
<code>false</code>, callback is executed when position in track is more
or equal to <code>position</code>. If <code>remaining</code> is
<code>true</code>, callback is executed when remaining time in the
current track is less or equal to <code>position</code>. Keep in mind
that elapsed time is exact while remaining time is always estimated.
Remaining time is usually more accurate for file-based sources. When
<code>allow_partial</code> is <code>true</code>, if the current track
ends before the <code>offset</code> position is reached, callback is
still executed</li>
<li><code>on_shutdown</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called when source shuts down</li>
<li><code>on_track</code> (of type
<code>(synchronous : bool, (([string * string]) -&gt; unit)) -&gt; unit</code>):
Call a given handler on track marks</li>
<li><code>on_wake_up</code> (of type
<code>(synchronous : bool, (() -&gt; unit)) -&gt; unit</code>): Call a
given handler to be called after the source is asked to get ready</li>
</ul>
<h3 id="which"><a href="#which"
class="anchor"><code>which</code></a></h3>
<p>Deprecated: this function has been replaced by
<code>file.which</code>.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
          <div id="footer"></div>
        </main>
      </div>
    </div>
    <!--   Core JS Files   -->

    <script src="/assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript"></script>
    <script src="/assets/js/liq-jquery.js" type="text/javascript"></script>
  </body>

</html>
