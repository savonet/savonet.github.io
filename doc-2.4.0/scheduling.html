<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Liquidsoap</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!-- Extra details for Live View on GitHub Pages -->
    <!-- Canonical SEO -->
    <link rel="canonical" href="https://www.liquidsoap.info/" />
    <!--  Social tags      -->
    <meta name="keywords" content="radio, audio, video, streaming, icecast, shoutcast">
    <meta name="description" content="Swiss-army knife for multimedia streaming">
    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Liquidsoap Streaming Language">
    <meta itemprop="description" content="Swiss-army knife for multimedia streaming">
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="product">
    <meta name="twitter:site" content="@LiquidsoapMedia">
    <meta name="twitter:title" content="Liquidsoap Streaming Language">
    <meta name="twitter:description" content="Swiss-army knife for multimedia streaming">
    <meta name="twitter:creator" content="@LiquidsoapMedia">
    <meta name="twitter:image" content="https://www.liquidsoap.info//assets/img/bottle_invert.png">
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="/assets/css/custom.css" rel="stylesheet" />
    <link href="/assets/css/material-kit.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <!-- Documentation extras -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <link rel="stylesheet" href="/assets/demo/docs.min.css">
    <style>
    .navbar-absolute-logo {
      padding-left: 45px;
    }

    .navbar-absolute-logo img {
      position: absolute;
      left: 15px;
      margin-top: -6px;
    }

    body {
      background: white;
    }

    p {
        font-size: 16px;
        text-align: justify;
    }
    </style>
    <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    </style>
  </head>

  <body class="bd-docs" data-spy="scroll" data-target=".bd-sidenav-active">
    <a id="skippy" class="sr-only sr-only-focusable" href="#content">
      <div class="container">
        <span class="skiplink-text">Skip to main content</span>
      </div>
    </a>
    <header class="navbar navbar-expand navbar-dark bg-primary flex-column flex-md-row bd-navbar">
      <a class="navbar-brand mr-0 mr-md-2 navbar-absolute-logo" href="/doc-2.4.0">
        <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 600 600" focusable="false" style="width: 25px; height: 25px;">
          <title>Liquidsoap</title>
          <style type="text/css">
.st0{fill:#FFFFFF;}
          </style>
          <g>
          <path class="st0" d="M102.4,593.8c-0.7-2.8-3.4-2.5-5.3-3.3c-24.6-10.2-37.2-28.7-37.2-55.6c-0.1-72.1,0-144.2,0-216.3
          c0-52.3,0-104.6,0-156.9c0-37.6,23.1-60.9,60.6-61.1c12-0.1,23.9-0.2,35.9,0c15.7,0.3,26.7,10.1,26.3,23
          c-0.4,12.5-11.1,21.5-26.3,21.8c-12,0.2-23.9-0.1-35.9,0.1c-11.8,0.1-15.6,3.7-15.6,15.3c-0.1,124.4,0,248.8-0.1,373.2
          c0,10.3,4.5,15.1,14.8,15.1c69.1-0.1,138.2,0,207.3-0.1c12.3,0,15.5-3.7,15.5-17.7c0-74.7,0-149.4,0-224.2c0-47.8,0-95.6,0-143.5
          c0-15.2-3-18.1-18.4-18.2c-10.8,0-21.7,0.1-32.5,0c-16-0.2-26.7-9.4-26.6-22.5c0.1-13,10.9-22.1,26.9-22.3
          c13.4-0.2,26.9-0.3,40.3,0.1c30.8,1,54.9,24.5,55,55.2c0.3,127.4,0.3,254.8,0.1,382.2c0,25.5-15.8,45.7-40.2,53.3
          c-1.7,0.5-3.8,0-4.5,2.4C262.3,593.8,182.4,593.8,102.4,593.8z"/>
          <path class="st0" d="M537.4,212.6c-16.8,23-56.5,16.5-68.6-9.5c-8-17.2-12.4-32.7-12-54.5c4.6,4.1,8.3,7.5,12.1,10.7
          c10.3,8.6,21,14,35.5,11.8c12.5-1.9,21.5,6,28.2,16.3c2,3,1.3,7.3,4.8,9.5C537.4,202.2,537.4,207.4,537.4,212.6z"/>
          <path class="st0" d="M200.6,230.4c0-55.3,0-110.5,0-165.8c0-40.7,22.3-62.7,63.2-62.7c50.4,0,100.8,0,151.3,0
          c36.1,0,59.1,21.9,60.4,57.7c0.5,13.1,0.4,26.1,0,39.2c-0.4,15.1-10.1,25.8-22.5,25.7c-12-0.1-21.6-10.1-22.3-24.8
          c-0.6-12.7-0.4-25.4-0.1-38.1c0.2-10.4-4.5-14.9-14.9-14.9c-51.5,0.1-103.1,0-154.6,0.1c-12.7,0-15.5,3.2-15.5,17.5
          c0,105.3,0,210.6,0,316c0,7.8,0.1,15.7,0,23.5c-0.2,17.5-9.4,28.9-23,28.6c-13.5-0.3-21.9-10.9-21.9-28.3
          C200.6,346.2,200.6,288.3,200.6,230.4z"/>
          </g>
        </svg>
        Liquidsoap
      </a>
      <ul class="navbar-nav flex-row d-none d-md-flex">
        <li class="nav-item dropdown">
          <a data-versions="dev 2.2.5 2.3.0 2.3.1 2.3.2 2.3.3
2.4.0" data-version="2.4.0" class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="liq-version" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            2.4.0
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="liq-version" id="liq-versions">
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://github.com/savonet/liquidsoap" target="_blank" rel="noopener" aria-label="GitHub">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false">
              <title>GitHub</title>
              <path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://twitter.com/liquidsoapmedia" target="_blank" rel="noopener" aria-label="Twitter">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false">
              <title>Twitter</title>
              <path d="M160.83 416.32c193.2 0 298.92-160.22 298.92-298.92 0-4.51 0-9-.2-13.52A214 214 0 0 0 512 49.38a212.93 212.93 0 0 1-60.44 16.6 105.7 105.7 0 0 0 46.3-58.19 209 209 0 0 1-66.79 25.37 105.09 105.09 0 0 0-181.73 71.91 116.12 116.12 0 0 0 2.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48 0 0 0 68 159.6a106.27 106.27 0 0 1-47.53-13.11v1.43a105.28 105.28 0 0 0 84.21 103.06 105.67 105.67 0 0 1-47.33 1.84 105.06 105.06 0 0 0 98.14 72.94A210.72 210.72 0 0 1 25 370.84a202.17 202.17 0 0 1-25-1.43 298.85 298.85 0 0 0 160.83 46.92" fill="currentColor" />
            </svg>
          </a>
        </li>
      </ul>
      <div class="navbar-nav-scroll ml-md-auto ">
        <ul class="navbar-nav bd-navbar-nav flex-row">
          <!--
            <li class="nav-item">
            <a class="nav-link" href=""> <i class="material-icons">card_membership</i> PRO Services </a>
            </li>
            -->
          <li class="nav-item">
            <script async src="https://cse.google.com/cse.js?cx=24f50f6f088994c53"></script>
            <style>
.cse .gsc-control-cse, .gsc-control-cse {
  background-color: transparent;
  border: none;
  width: 300px;
}
            </style>
            <div class="gcse-search"></div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/savonet/liquidsoap/issues" target="_blank" rel="noopener"><i class="material-icons">star</i> Get Help</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
        </ul>
      </div>
      <a href="https://github.com/savonet/liquidsoap" class="github-corner" aria-label="View source on Github">
        <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#9c27b0; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
          <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
          <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
          <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
      </a>
      <style>
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out
}

        @keyframes octocat-wave {
          0%,
          100% {
            transform: rotate(0)
          }
          20%,
          60% {
            transform: rotate(-25deg)
          }
          40%,
          80% {
            transform: rotate(10deg)
          }
        }

        @media (max-width:500px) {
          .github-corner:hover .octo-arm {
            animation: none
          }
          .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out
          }
        }
      </style>
    </header>
    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
          <nav class="collapse bd-links" id="bd-docs-nav">
            <div class="bd-toc-item active">
              <ul class="nav bd-sidenav">
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/doc-2.4.0/install.html">
                    Install
                  </a>
                </li>
                <li>
                  <a href="/doc-2.4.0/migrating.html">
                    Migrating from previous versions
                  </a>
                </li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="#">
                    Starters
                  </a>
                </li>
                <li><a href="/doc-2.4.0/book.html">The book</a></li>
                <li>
                  <a href="/doc-2.4.0/presentations.html">Video Presentations</a>
                </li>
                <li>
                  <a href="/doc-2.4.0/help.html">How to find help</a>
                </li>
                <li>
                  <a href="/doc-2.4.0/faq.html">Frequently Asked Questions</a>
                </li>
                <li><a href="/doc-2.4.0/quick_start.html">Quickstart</a></li>
                <li>
                  <a href="/doc-2.4.0/complete_case.html">Complete case analysis</a>
                </li>
                <li>
                  <a href="/doc-2.4.0/cookbook.html">Cookbook</a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Reference
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.4.0/language.html">Script language</a></li>
                <li>
                  <a href="/doc-2.4.0/reference.html">Core API</a></li>
                <li>
                  <a href="/doc-2.4.0/reference-extras.html">Extra API</a></li>
                <li>
                  <a href="/doc-2.4.0/reference-deprecated.html">Deprecated API</a></li>
                <li>
                  <a href="/doc-2.4.0/protocols.html">Protocols</a></li>
                <li>
                  <a href="/doc-2.4.0/settings.html">Settings</a></li>
              </ul>
              <a class="bd-toc-link" href="#">
                Basic Concepts
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.4.0/multitrack.html">Multitrack</a></li>
                <li>
                  <a href="/doc-2.4.0/latency_control.html">Latency control</a></li>
                <li>
                  <a href="/doc-2.4.0/scheduling.html">Scheduling</a></li>
                <li>
                  <a href="/doc-2.4.0/ffmpeg.html">FFmpeg support</a></li>
                <li>
                  <a href="/doc-2.4.0/encoding_formats.html">Encoding formats</a></li>
                <li>
                  <a href="/doc-2.4.0/video.html">Videos streams</a></li>
                <li>
                  <a href="/doc-2.4.0/memory.html">Memory management</a></li>
                <li>
                  <a href="/doc-2.4.0/json.html">JSON import/export</a></li>
                <li>
                  <a href="/doc-2.4.0/xml.html">XML import/export</a></li>
                <li>
                  <a href="/doc-2.4.0/yaml.html">YAML import/export</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Core Concepts
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.4.0/sources.html">Sources</a></li>
                <li>
                  <a href="/doc-2.4.0/clocks.html">Clocks</a></li>
                <li>
                  <a href="/doc-2.4.0/requests.html">Requests</a></li>
                <li>
                  <a href="/doc-2.4.0/protocols-presentation.html">Protocols</a></li>
                <li>
                  <a href="/doc-2.4.0/stream_content.html">Stream contents</a></li>
                <li>
                  <a href="/doc-2.4.0/strings_encoding.html">Strings encoding</a></li>
                <li>
                  <a href="/doc-2.4.0/script_loading.html">Script loading</a></li>
                <li><a href="/doc-2.4.0/phases.html">Execution phases</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Specific tutorials
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.4.0/harbor_http.html">Using the HTTP server</a></li>
                <li>
                  <a href="/doc-2.4.0/playlist_parsers.html">Playlist parsers</a></li>
                <li>
                  <a href="/doc-2.4.0/blank.html">Blank detection</a></li>
                <li>
                  <a href="/doc-2.4.0/metadata.html">Customize metadata</a></li>
                <li>
                  <a href="/doc-2.4.0/seek.html">Seek and cue support</a></li>
                <li>
                  <a href="/doc-2.4.0/external_decoders.html">External decoders</a></li>
                <li>
                  <a href="/doc-2.4.0/external_streams.html">External streams</a></li>
                <li>
                  <a href="/doc-2.4.0/external_encoders.html">External encoders</a></li>
                <li>
                  <a href="/doc-2.4.0/ladspa.html">LADSPA plugins</a></li>
                <li>
                  <a href="/doc-2.4.0/hls_output.html">HLS output</a></li>
                <li>
                  <a href="/doc-2.4.0/http_input.html">HTTP input</a></li>
                <li>
                  <a href="/doc-2.4.0/harbor.html">Harbor input</a></li>
                <li>
                  <a href="/doc-2.4.0/stereotool.html">Stereotool</a></li>
                <li>
                  <a href="/doc-2.4.0/server.html">Using the telnet server</a></li>
                <li>
                  <a href="/doc-2.4.0/icy_metadata.html">ICY metadata update</a></li>
                <li>
                  <a href="/doc-2.4.0/replay_gain.html">Normalization and replay gain</a></li>
                <li>
                  <a href="/doc-2.4.0/request_sources.html">Requests-based sources</a></li>
                <li>
                  <a href="/doc-2.4.0/shoutcast.html">Shoutcast output</a></li>
                <li>
                  <a href="/doc-2.4.0/dynamic_sources.html">Dynamic source creation</a></li>
                <li>
                  <a href="/doc-2.4.0/crossfade.html">Crossfading</a></li>
                <li>
                  <a href="/doc-2.4.0/in_production.html">Using in production</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    User scripts
                  </a>
                </li>
                <li>
                  <a href="/doc-2.4.0/beets.html">Beets</a></li>
                <li>
                  <a href="/doc-2.4.0/geekradio.html">Geekradio</a></li>
                <li>
                  <a href="/doc-2.4.0/radiopi.html">RadioPi</a></li>
                <li>
                  <a href="/doc-2.4.0/dolebrai.html">Dolebraï</a></li>
                <li>
                  <a href="/doc-2.4.0/frequence3.html">Frequence3</a></li>
                <li>
                  <a href="/doc-2.4.0/video-static.html">Video with a single static image</a></li>
                <li>
                  <a href="/doc-2.4.0/split-cue.html">Split a CUE sheet</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    Behind the curtains
                  </a>
                </li>
                <li>
                  <a href="/doc-2.4.0/publications.html">Some presentations and publications</a></li>
                <li>
                  <a href="https://github.com/savonet">OCaml libraries</a></li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/legacy">
                    Legacy website
                  </a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
        <!--
          <div class="d-none d-xl-block col-xl-2 bd-toc">
          <ul class="section-nav">
          <li class="toc-entry toc-h2">
          <a href="#quick-start">Quick start</a>
          <ul>
          <li class="toc-entry toc-h3">
          <a href="#css">CSS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#js">JS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#fonts-and-icons">Fonts and Icons</a>
          </li>
          </ul>
          </li>
          <li class="toc-entry toc-h2">
          <a href="#starter-template">Starter template</a>
          </li>
          </ul>
          </div>
        -->
          <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
          <h1 id="scheduling-tasks-in-liquidsoap"><a
href="#scheduling-tasks-in-liquidsoap" class="anchor">Scheduling Tasks
in Liquidsoap</a></h1>
<p>Liquidsoap includes a lightweight scheduler that lets you run code at
specific times or on a recurring basis. This is useful for automating
things like playing a file every hour, announcing the top of the hour,
or triggering a command at a specific time.</p>
<p>Scheduling in Liquidsoap works through <strong>threads</strong> —
simple tasks that run in the background without interrupting your media
streams. These threads are managed by the scheduler and executed as
needed. They’re not operating system threads, just scheduled
functions.</p>
<p>There are four main APIs available for scheduling:</p>
<ul>
<li><code>thread.run</code> – run a task on a regular interval</li>
<li><code>thread.when</code> – run a task when a time-based condition
becomes true</li>
<li><code>cron.add</code> / <code>cron.remove</code> – schedule tasks
using familiar cron syntax</li>
<li><code>thread.run.recurrent</code> – an advanced interface for custom
scheduling</li>
</ul>
<p>This page walks you through the first three, with examples to get you
started.</p>
<p>If you are looking for a more in-depth example of how to use the
scheduler, you can refer to our blog post <a
href="https://www.liquidsoap.info/blog/2023-03-25-precise-scheduling-of-tracks/">Precise
scheduling of tracks</a></p>
<h2 id="thread.run-simple-repeating-tasks"><a
href="#thread.run-simple-repeating-tasks"
class="anchor"><code>thread.run</code>: Simple Repeating Tasks</a></h2>
<p>Use <code>thread.run</code> when you want to run a task repeatedly
every N seconds. This is the most straightforward scheduling method.</p>
<h3 id="example-log-a-message-every-10-minutes"><a
href="#example-log-a-message-every-10-minutes" class="anchor">Example:
Log a message every 10 minutes</a></h3>
<div class="sourceCode" id="cb1"
data-include="scheduling_simple.liq"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">thread.run</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">every</span>=<span class="fl">600.</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is the same as: fun () -&gt; log(&quot;10 minutes have passed.&quot;)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">log</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;10 minutes have passed.&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>This task will run every 600 seconds (10 minutes), logging a
message.</p>
<p>You can schedule any function here — such as sending metadata,
modifying a source, or queueing a track.</p>
<h3 id="example-play-a-file-every-hour"><a
href="#example-play-a-file-every-hour" class="anchor">Example: Play a
file every hour</a></h3>
<div class="sourceCode" id="cb2" data-include="scheduling_queue.liq"
data-from="BEGIN" data-to="END"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">thread.run</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">every</span>=<span class="fl">3600.</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">request_queue.push</span>(<span class="dt">request.create</span>(<span class="st">&quot;/path/to/hourly-jingle.mp3&quot;</span>))}</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<p>In this case, we assume that <code>request_queue</code> is a
<code>request.queue</code> source used elsewhere in your script.</p>
<h2 id="thread.when-run-at-a-specific-time"><a
href="#thread.when-run-at-a-specific-time"
class="anchor"><code>thread.when</code>: Run at a Specific Time</a></h2>
<p>To schedule a task at a specific time, use <code>thread.when</code>.
It takes a <a href="language.html#time-predicates">time predicate</a> —
a Liquidsoap-specific language construct that returns <code>true</code>
when the current time matches the given interval or time.</p>
<h3 id="example-run-a-task-at-900-am"><a
href="#example-run-a-task-at-900-am" class="anchor">Example: Run a task
at 9:00 AM</a></h3>
<div class="sourceCode" id="cb3" data-include="scheduling_9am.liq"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">thread.when</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">9</span>h},</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">log</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;It&#39;s 9 AM!&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>This function is ran every time the predicates returns
<code>true</code>, which should be during the 9th hour of the morning
(hours are in 24h format).</p>
<p>You can refer to the <code>thread.when</code> and
<code>predicate.activates</code> documentation for more details about
the implementation.</p>
<h3 id="example-queue-a-track-at-midnight"><a
href="#example-queue-a-track-at-midnight" class="anchor">Example: Queue
a track at midnight</a></h3>
<div class="sourceCode" id="cb4"
data-include="scheduling_queue_midnight.liq" data-from="BEGIN"
data-to="END"><pre class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">thread.when</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  {<span class="dv">23</span>h59m},</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">request_queue.push</span>(<span class="dt">request.create</span>(<span class="st">&quot;/path/to/midnight-track.mp3&quot;</span>))}</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<h2 id="cron.add-and-cron.remove-cron-style-scheduling"><a
href="#cron.add-and-cron.remove-cron-style-scheduling"
class="anchor"><code>cron.add</code> and <code>cron.remove</code>:
Cron-style Scheduling</a></h2>
<p>If you’re used to cron syntax, you can use <code>cron.add</code> to
schedule tasks using a familiar string format.</p>
<div class="sourceCode" id="cb5" data-include="cron_add.liq"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dt">cron.add</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;0 12 * * *&quot;</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">log</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;It’s noon!&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>This example runs the task every day at 12:00 PM.</p>
<p>If needed, the function returns a unique identifier for the task,
which you can use to remove it later:</p>
<div class="sourceCode" id="cb6" data-include="cron_id.liq"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> {id} =</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">cron.add</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;0 12 * * *&quot;</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">log</span>(</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;It’s noon!&quot;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<h3 id="explicit-ids"><a href="#explicit-ids" class="anchor">Explicit
IDs</a></h3>
<p>You can also pass an explicit ID:</p>
<div class="sourceCode" id="cb7" data-include="cron_id_arg.liq"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dt">cron.add</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">id</span>=<span class="st">&quot;minight-task&quot;</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;0 0 * * *&quot;</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">log</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Midnight event&quot;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>If the ID is already registered, Liquidsoap will raise an error. This
is useful for keeping track of scheduled tasks in complex scripts using
meaningful IDs.</p>
<h3 id="removing-a-cron-task"><a href="#removing-a-cron-task"
class="anchor">Removing a Cron Task</a></h3>
<p>To remove a task, use <code>cron.remove</code> with its ID:</p>
<div class="sourceCode" id="cb8" data-include="cron_remove.liq"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">cron.remove</span>(<span class="st">&quot;midnight-task&quot;</span>)</span></code></pre></div>
<h3 id="cron-syntax-recap"><a href="#cron-syntax-recap"
class="anchor">Cron Syntax Recap</a></h3>
<p>Cron strings follow the standard format:</p>
<pre><code>minute hour day-of-month month day-of-week</code></pre>
<p>Examples:</p>
<ul>
<li><code>"0 0 * * *"</code> – every day at midnight</li>
<li><code>"*/5 * * * *"</code> – every 5 minutes</li>
<li><code>"15 14 * * 1-5"</code> – weekdays at 2:15 PM</li>
</ul>
<p>The implementation also supports the following shorthands:
<code>@annually</code>, <code>@yearly</code>, <code>@daily</code>,
<code>@hourly</code>, <code>@monthly</code> and
<code>@weekly</code>.</p>
<h2 id="advanced-thread.run.recurrent"><a
href="#advanced-thread.run.recurrent" class="anchor">Advanced:
<code>thread.run.recurrent</code></a></h2>
<p>For more complex scheduling needs, advanced users may use
<code>thread.run.recurrent</code>. It allows full control over how a
task is rescheduled after each execution, making it possible to
implement dynamic or irregular schedules.</p>
<p>Most users won’t need this API, but it’s available if
<code>thread.run</code> or <code>cron.add</code> don’t fit your
needs.</p>
          <div id="footer"></div>
        </main>
      </div>
    </div>
    <!--   Core JS Files   -->

    <script src="/assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript"></script>
    <script src="/assets/js/liq-jquery.js" type="text/javascript"></script>
  </body>

</html>
