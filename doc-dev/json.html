<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Liquidsoap</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!-- Extra details for Live View on GitHub Pages -->
    <!-- Canonical SEO -->
    <link rel="canonical" href="https://www.liquidsoap.info/" />
    <!--  Social tags      -->
    <meta name="keywords" content="radio, audio, video, streaming, icecast, shoutcast">
    <meta name="description" content="Swiss-army knife for multimedia streaming">
    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Liquidsoap Streaming Language">
    <meta itemprop="description" content="Swiss-army knife for multimedia streaming">
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="product">
    <meta name="twitter:site" content="@LiquidsoapMedia">
    <meta name="twitter:title" content="Liquidsoap Streaming Language">
    <meta name="twitter:description" content="Swiss-army knife for multimedia streaming">
    <meta name="twitter:creator" content="@LiquidsoapMedia">
    <meta name="twitter:image" content="https://www.liquidsoap.info//assets/img/bottle_invert.png">
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="/assets/css/custom.css" rel="stylesheet" />
    <link href="/assets/css/material-kit.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <!-- Documentation extras -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <link rel="stylesheet" href="/assets/demo/docs.min.css">
    <style>
    .navbar-absolute-logo {
      padding-left: 45px;
    }

    .navbar-absolute-logo img {
      position: absolute;
      left: 15px;
      margin-top: -6px;
    }

    body {
      background: white;
    }

    p {
        font-size: 16px;
        text-align: justify;
    }
    </style>
    <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    </style>
  </head>

  <body class="bd-docs" data-spy="scroll" data-target=".bd-sidenav-active">
    <a id="skippy" class="sr-only sr-only-focusable" href="#content">
      <div class="container">
        <span class="skiplink-text">Skip to main content</span>
      </div>
    </a>
    <header class="navbar navbar-expand navbar-dark bg-primary flex-column flex-md-row bd-navbar">
      <a class="navbar-brand mr-0 mr-md-2 navbar-absolute-logo" href="/doc-dev">
        <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 600 600" focusable="false" style="width: 25px; height: 25px;">
          <title>Liquidsoap</title>
          <style type="text/css">
.st0{fill:#FFFFFF;}
          </style>
          <g>
          <path class="st0" d="M102.4,593.8c-0.7-2.8-3.4-2.5-5.3-3.3c-24.6-10.2-37.2-28.7-37.2-55.6c-0.1-72.1,0-144.2,0-216.3
          c0-52.3,0-104.6,0-156.9c0-37.6,23.1-60.9,60.6-61.1c12-0.1,23.9-0.2,35.9,0c15.7,0.3,26.7,10.1,26.3,23
          c-0.4,12.5-11.1,21.5-26.3,21.8c-12,0.2-23.9-0.1-35.9,0.1c-11.8,0.1-15.6,3.7-15.6,15.3c-0.1,124.4,0,248.8-0.1,373.2
          c0,10.3,4.5,15.1,14.8,15.1c69.1-0.1,138.2,0,207.3-0.1c12.3,0,15.5-3.7,15.5-17.7c0-74.7,0-149.4,0-224.2c0-47.8,0-95.6,0-143.5
          c0-15.2-3-18.1-18.4-18.2c-10.8,0-21.7,0.1-32.5,0c-16-0.2-26.7-9.4-26.6-22.5c0.1-13,10.9-22.1,26.9-22.3
          c13.4-0.2,26.9-0.3,40.3,0.1c30.8,1,54.9,24.5,55,55.2c0.3,127.4,0.3,254.8,0.1,382.2c0,25.5-15.8,45.7-40.2,53.3
          c-1.7,0.5-3.8,0-4.5,2.4C262.3,593.8,182.4,593.8,102.4,593.8z"/>
          <path class="st0" d="M537.4,212.6c-16.8,23-56.5,16.5-68.6-9.5c-8-17.2-12.4-32.7-12-54.5c4.6,4.1,8.3,7.5,12.1,10.7
          c10.3,8.6,21,14,35.5,11.8c12.5-1.9,21.5,6,28.2,16.3c2,3,1.3,7.3,4.8,9.5C537.4,202.2,537.4,207.4,537.4,212.6z"/>
          <path class="st0" d="M200.6,230.4c0-55.3,0-110.5,0-165.8c0-40.7,22.3-62.7,63.2-62.7c50.4,0,100.8,0,151.3,0
          c36.1,0,59.1,21.9,60.4,57.7c0.5,13.1,0.4,26.1,0,39.2c-0.4,15.1-10.1,25.8-22.5,25.7c-12-0.1-21.6-10.1-22.3-24.8
          c-0.6-12.7-0.4-25.4-0.1-38.1c0.2-10.4-4.5-14.9-14.9-14.9c-51.5,0.1-103.1,0-154.6,0.1c-12.7,0-15.5,3.2-15.5,17.5
          c0,105.3,0,210.6,0,316c0,7.8,0.1,15.7,0,23.5c-0.2,17.5-9.4,28.9-23,28.6c-13.5-0.3-21.9-10.9-21.9-28.3
          C200.6,346.2,200.6,288.3,200.6,230.4z"/>
          </g>
        </svg>
        Liquidsoap
      </a>
      <ul class="navbar-nav flex-row d-none d-md-flex">
        <li class="nav-item dropdown">
          <a data-versions="dev 2.2.5 2.3.0 2.3.1 2.3.2 2.3.3 2.4.0
2.4.1
2.4.2" data-version="dev" class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="liq-version" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            dev
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="liq-version" id="liq-versions">
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://github.com/savonet/liquidsoap" target="_blank" rel="noopener" aria-label="GitHub">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false">
              <title>GitHub</title>
              <path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://twitter.com/liquidsoapmedia" target="_blank" rel="noopener" aria-label="Twitter">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false">
              <title>Twitter</title>
              <path d="M160.83 416.32c193.2 0 298.92-160.22 298.92-298.92 0-4.51 0-9-.2-13.52A214 214 0 0 0 512 49.38a212.93 212.93 0 0 1-60.44 16.6 105.7 105.7 0 0 0 46.3-58.19 209 209 0 0 1-66.79 25.37 105.09 105.09 0 0 0-181.73 71.91 116.12 116.12 0 0 0 2.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48 0 0 0 68 159.6a106.27 106.27 0 0 1-47.53-13.11v1.43a105.28 105.28 0 0 0 84.21 103.06 105.67 105.67 0 0 1-47.33 1.84 105.06 105.06 0 0 0 98.14 72.94A210.72 210.72 0 0 1 25 370.84a202.17 202.17 0 0 1-25-1.43 298.85 298.85 0 0 0 160.83 46.92" fill="currentColor" />
            </svg>
          </a>
        </li>
      </ul>
      <div class="navbar-nav-scroll ml-md-auto ">
        <ul class="navbar-nav bd-navbar-nav flex-row">
          <!--
            <li class="nav-item">
            <a class="nav-link" href=""> <i class="material-icons">card_membership</i> PRO Services </a>
            </li>
            -->
          <li class="nav-item">
            <script async src="https://cse.google.com/cse.js?cx=24f50f6f088994c53"></script>
            <style>
.cse .gsc-control-cse, .gsc-control-cse {
  background-color: transparent;
  border: none;
  width: 300px;
}
            </style>
            <div class="gcse-search"></div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/savonet/liquidsoap/issues" target="_blank" rel="noopener"><i class="material-icons">star</i> Get Help</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
        </ul>
      </div>
      <a href="https://github.com/savonet/liquidsoap" class="github-corner" aria-label="View source on Github">
        <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#9c27b0; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
          <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
          <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
          <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
      </a>
      <style>
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out
}

        @keyframes octocat-wave {
          0%,
          100% {
            transform: rotate(0)
          }
          20%,
          60% {
            transform: rotate(-25deg)
          }
          40%,
          80% {
            transform: rotate(10deg)
          }
        }

        @media (max-width:500px) {
          .github-corner:hover .octo-arm {
            animation: none
          }
          .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out
          }
        }
      </style>
    </header>
    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
          <nav class="collapse bd-links" id="bd-docs-nav">
            <div class="bd-toc-item active">
              <ul class="nav bd-sidenav">
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/doc-dev/install.html">
                    Install
                  </a>
                </li>
                <li>
                  <a href="/doc-dev/migrating.html">
                    Migrating from previous versions
                  </a>
                </li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="#">
                    Starters
                  </a>
                </li>
                <li><a href="/doc-dev/book.html">The book</a></li>
                <li>
                  <a href="/doc-dev/presentations.html">Video Presentations</a>
                </li>
                <li>
                  <a href="/doc-dev/help.html">How to find help</a>
                </li>
                <li>
                  <a href="/doc-dev/faq.html">Frequently Asked Questions</a>
                </li>
                <li><a href="/doc-dev/quick_start.html">Quickstart</a></li>
                <li>
                  <a href="/doc-dev/complete_case.html">Complete case analysis</a>
                </li>
                <li>
                  <a href="/doc-dev/graph_descriptions.html">Understand your script</a>
                </li>
                <li>
                  <a href="/doc-dev/cookbook.html">Cookbook</a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Reference
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-dev/language.html">Script language</a></li>
                <li>
                  <a href="/doc-dev/reference.html">Core API</a></li>
                <li>
                  <a href="/doc-dev/reference-extras.html">Extra API</a></li>
                <li>
                  <a href="/doc-dev/reference-deprecated.html">Deprecated API</a></li>
                <li>
                  <a href="/doc-dev/protocols.html">Protocols</a></li>
                <li>
                  <a href="/doc-dev/settings.html">Settings</a></li>
              </ul>
              <a class="bd-toc-link" href="#">
                Basic Concepts
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-dev/multitrack.html">Multitrack</a></li>
                <li>
                  <a href="/doc-dev/latency_control.html">Latency control</a></li>
                <li>
                  <a href="/doc-dev/scheduling.html">Scheduling</a></li>
                <li>
                  <a href="/doc-dev/ffmpeg.html">FFmpeg support</a></li>
                <li>
                  <a href="/doc-dev/encoding_formats.html">Encoding formats</a></li>
                <li>
                  <a href="/doc-dev/video.html">Videos streams</a></li>
                <li>
                  <a href="/doc-dev/memory.html">Memory management</a></li>
                <li>
                  <a href="/doc-dev/json.html">JSON import/export</a></li>
                <li>
                  <a href="/doc-dev/xml.html">XML import/export</a></li>
                <li>
                  <a href="/doc-dev/yaml.html">YAML import/export</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Core Concepts
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-dev/sources.html">Sources</a></li>
                <li>
                  <a href="/doc-dev/clocks.html">Clocks</a></li>
                <li>
                  <a href="/doc-dev/requests.html">Requests</a></li>
                <li>
                  <a href="/doc-dev/protocols-presentation.html">Protocols</a></li>
                <li>
                  <a href="/doc-dev/stream_content.html">Stream contents</a></li>
                <li>
                  <a href="/doc-dev/strings_encoding.html">Strings encoding</a></li>
                <li>
                  <a href="/doc-dev/script_loading.html">Script loading</a></li>
                <li><a href="/doc-dev/phases.html">Execution phases</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Specific tutorials
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-dev/harbor_http.html">Using the HTTP server</a></li>
                <li>
                  <a href="/doc-dev/playlist_parsers.html">Playlist parsers</a></li>
                <li>
                  <a href="/doc-dev/blank.html">Blank detection</a></li>
                <li>
                  <a href="/doc-dev/metadata.html">Customize metadata</a></li>
                <li>
                  <a href="/doc-dev/seek.html">Seek and cue support</a></li>
                <li>
                  <a href="/doc-dev/external_decoders.html">External decoders</a></li>
                <li>
                  <a href="/doc-dev/external_streams.html">External streams</a></li>
                <li>
                  <a href="/doc-dev/external_encoders.html">External encoders</a></li>
                <li>
                  <a href="/doc-dev/ladspa.html">LADSPA plugins</a></li>
                <li>
                  <a href="/doc-dev/hls_output.html">HLS output</a></li>
                <li>
                  <a href="/doc-dev/http_input.html">HTTP input</a></li>
                <li>
                  <a href="/doc-dev/harbor.html">Harbor input</a></li>
                <li>
                  <a href="/doc-dev/stereotool.html">Stereotool</a></li>
                <li>
                  <a href="/doc-dev/server.html">Using the telnet server</a></li>
                <li>
                  <a href="/doc-dev/icy_metadata.html">ICY metadata update</a></li>
                <li>
                  <a href="/doc-dev/replay_gain.html">Normalization and replay gain</a></li>
                <li>
                  <a href="/doc-dev/request_sources.html">Requests-based sources</a></li>
                <li>
                  <a href="/doc-dev/shoutcast.html">Shoutcast output</a></li>
                <li>
                  <a href="/doc-dev/dynamic_sources.html">Dynamic source creation</a></li>
                <li>
                  <a href="/doc-dev/crossfade.html">Crossfading</a></li>
                <li>
                  <a href="/doc-dev/in_production.html">Using in production</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    User scripts
                  </a>
                </li>
                <li>
                  <a href="/doc-dev/beets.html">Beets</a></li>
                <li>
                  <a href="/doc-dev/geekradio.html">Geekradio</a></li>
                <li>
                  <a href="/doc-dev/radiopi.html">RadioPi</a></li>
                <li>
                  <a href="/doc-dev/dolebrai.html">Dolebra√Ø</a></li>
                <li>
                  <a href="/doc-dev/frequence3.html">Frequence3</a></li>
                <li>
                  <a href="/doc-dev/video-static.html">Video with a single static image</a></li>
                <li>
                  <a href="/doc-dev/split-cue.html">Split a CUE sheet</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    Behind the curtains
                  </a>
                </li>
                <li>
                  <a href="/doc-dev/publications.html">Some presentations and publications</a></li>
                <li>
                  <a href="https://github.com/savonet">OCaml libraries</a></li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/legacy">
                    Legacy website
                  </a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
        <!--
          <div class="d-none d-xl-block col-xl-2 bd-toc">
          <ul class="section-nav">
          <li class="toc-entry toc-h2">
          <a href="#quick-start">Quick start</a>
          <ul>
          <li class="toc-entry toc-h3">
          <a href="#css">CSS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#js">JS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#fonts-and-icons">Fonts and Icons</a>
          </li>
          </ul>
          </li>
          <li class="toc-entry toc-h2">
          <a href="#starter-template">Starter template</a>
          </li>
          </ul>
          </div>
        -->
          <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
          <h2 id="working-with-json-in-liquidsoap"><a
href="#working-with-json-in-liquidsoap" class="anchor">üì¶ Working with
JSON in Liquidsoap</a></h2>
<p>Liquidsoap makes it easy‚Äîand safe‚Äîto work with JSON data directly in
your scripts. Whether you‚Äôre loading configuration files, interfacing
with APIs, or managing playlist metadata, JSON is a powerful format to
master.</p>
<p>This page walks you through how JSON parsing works in Liquidsoap, how
type safety is enforced, and how to use advanced features like nullable
types, custom keys, and associative object parsing.</p>
<p>Let‚Äôs start simple and build progressively toward the more advanced
features. üßó</p>
<h3 id="getting-started-parsing-a-simple-json-object"><a
href="#getting-started-parsing-a-simple-json-object" class="anchor">üîπ
Getting Started: Parsing a Simple JSON Object</a></h3>
<p>You can parse a JSON string using the special
<code>let json.parse</code> syntax:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> json.parse <span class="va">v</span> = &#39;{<span class="st">&quot;foo&quot;</span>: <span class="st">&quot;abc&quot;</span>}&#39;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="dt">print</span>(<span class="st">&quot;We parsed a JSON object and got value &quot;</span> ^ v.foo ^ <span class="st">&quot; for attribute foo!&quot;</span>)</span></code></pre></div>
<p>‚úÖ Output:</p>
<pre><code>We parsed a JSON object and got value abc for attribute foo!</code></pre>
<p>What‚Äôs happening here?</p>
<p>Liquidsoap watches how you use <code>v.foo</code> (as a string), and
it <em>checks at runtime</em> that the JSON contains <code>"foo"</code>
and that its value is indeed a string. If there‚Äôs a mismatch, you‚Äôll get
a clear error.</p>
<p>Example with incorrect type:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> json.parse <span class="va">v</span> = &#39;{<span class="st">&quot;foo&quot;</span>: <span class="dv">123</span>}&#39;</span></code></pre></div>
<p>‚õî Raises:</p>
<pre><code>Error 14: Uncaught runtime error:
type: json,
message: &quot;Parsing error: json value cannot be parsed as type {foo: string, _}&quot;</code></pre>
<h3 id="loading-json-from-files"><a href="#loading-json-from-files"
class="anchor">üìÅ Loading JSON from Files</a></h3>
<p>Instead of hardcoding JSON as a string, you can load it from a
file:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> json.parse <span class="va">v</span> = <span class="dt">file.contents</span>(<span class="st">&quot;/path/to/file.json&quot;</span>)</span></code></pre></div>
<p>Let‚Äôs look at a realistic example. Suppose you‚Äôre parsing a
<code>package.json</code> file from an npm package:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> json.parse <span class="va">package</span> = <span class="dt">file.contents</span>(<span class="st">&quot;/path/to/package.json&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="va">name</span> = package.name</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="va">version</span> = package.version</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="va">test</span> = package.scripts.test</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="dt">print</span>(<span class="st">&quot;This is package &quot;</span> ^ name ^ <span class="st">&quot;, version &quot;</span> ^ version ^ <span class="st">&quot; with test script: &quot;</span> ^ test)</span></code></pre></div>
<h3 id="use-type-annotations-for-reliable-parsing"><a
href="#use-type-annotations-for-reliable-parsing" class="anchor">‚úÖ Use
Type Annotations for Reliable Parsing</a></h3>
<p>Sometimes Liquidsoap can‚Äôt infer types correctly‚Äîespecially when you
use variables only inside string interpolations (<code>#{...}</code>).
In those cases, values default to <code>null</code>, which might be
confusing.</p>
<p>The solution: add an <strong>explicit type annotation</strong> to
your parse statement. The type annotation is then used to drive the
parser and pick the json data that you are expecting:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="dt">json.parse</span> ({</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  name,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  version,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">scripts</span> = {</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    test</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>} : {</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  name: string,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  version: string,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  scripts: {</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    test: string</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>}) = <span class="dt">file.contents</span>(<span class="st">&quot;/path/to/package.json&quot;</span>)</span></code></pre></div>
<p>Now everything works as expected‚Äîeven if you only reference variables
inside interpolations.</p>
<h2 id="understanding-json-type-annotations"><a
href="#understanding-json-type-annotations" class="anchor">üß©
Understanding JSON Type Annotations</a></h2>
<p>Liquidsoap‚Äôs JSON parser uses a rich type system that maps onto
JSON‚Äôs structure. Let‚Äôs break it down:</p>
<h3 id="ground-types"><a href="#ground-types" class="anchor"><strong>üî§
Ground Types</strong></a></h3>
<table>
<thead>
<tr class="header">
<th>Type</th>
<th>Description</th>
<th>Example value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>string</code></td>
<td>A sequence of characters</td>
<td><code>"hello"</code></td>
</tr>
<tr class="even">
<td><code>int</code></td>
<td>An integer</td>
<td><code>42</code></td>
</tr>
<tr class="odd">
<td><code>float</code></td>
<td>A number, including decimals</td>
<td><code>3.14</code> or <code>123.0</code></td>
</tr>
</tbody>
</table>
<p>Liquidsoap will coerce integers into floats if needed
(e.g.¬†<code>123</code> can be a <code>float</code>).</p>
<h3 id="nullable-types"><a href="#nullable-types"
class="anchor"><strong>‚ùì Nullable Types</strong></a></h3>
<p>Add <code>?</code> to make a type optional:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>test: string?  <span class="co"># test is either a string or null</span></span></code></pre></div>
<p>Useful when parsing data that may or may not include a field:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="dt">json.parse</span> ({</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  scripts</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>} : {</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  scripts: {</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    test: string?</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  }?</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>}) = <span class="dt">file.contents</span>(<span class="st">&quot;package.json&quot;</span>)</span></code></pre></div>
<p>You can check for presence using:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1: Explicit check</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="va">test</span> =</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">if</span> <span class="dt">null.defined</span>(scripts) <span class="kw">then</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">null.get</span>(scripts.test)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">else</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">null</span>()</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2: Fallback value</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="va">test</span> = (scripts ?? { <span class="va">test</span> = null }).test</span></code></pre></div>
<hr />
<h3 id="tuples"><a href="#tuples" class="anchor"><strong>üîó
Tuples</strong></a></h3>
<p>Tuples parse fixed-size arrays with specific types for each
position:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(int * float * string)</span></code></pre></div>
<p>This parses a JSON array like <code>[1, 2.5, "hello"]</code>.</p>
<p>Use <code>_</code> as a wildcard to ignore types you don‚Äôt care
about:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(_ * _ * float)  <span class="co"># Only the third element must be a float</span></span></code></pre></div>
<hr />
<h3 id="lists"><a href="#lists" class="anchor"><strong>üìã
Lists</strong></a></h3>
<p>To parse a JSON array of values of the same type, use brackets:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>[int]     <span class="co"># list of integers</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>[float?]  <span class="co"># list of optional floats</span></span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="fl">44.0</span><span class="ot">,</span> <span class="dv">55</span><span class="ot">,</span> <span class="fl">66.12</span><span class="ot">]</span></span></code></pre></div>
<p>Can be parsed as: <code>[float]</code></p>
<h3 id="objects-records"><a href="#objects-records"
class="anchor"><strong>üß± Objects (Records)</strong></a></h3>
<p>Use <code>{...}</code> to parse JSON objects into named fields:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>{foo: int, bar: string}</span></code></pre></div>
<p>This tells Liquidsoap to extract only the fields you care about.
Extra fields in the JSON are ignored.</p>
<h3 id="custom-json-keys"><a href="#custom-json-keys" class="anchor">üè∑Ô∏è
<strong>Custom JSON Keys</strong></a></h3>
<p>JSON keys often contain characters or spaces that aren‚Äôt valid
Liquidsoap variable names.</p>
<p>You can map them like this:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>{<span class="st">&quot;foo bar&quot;</span> as foo_bar: int}</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> <span class="dt">&quot;foo bar&quot;</span><span class="fu">:</span> <span class="dv">123</span> <span class="fu">}</span></span></code></pre></div>
<p>Liquidsoap parses this as a variable <code>foo_bar = 123</code>.</p>
<h3 id="associative-objects-as-lists"><a
href="#associative-objects-as-lists" class="anchor">üóÇÔ∏è
<strong>Associative Objects as Lists</strong></a></h3>
<p>What if you don‚Äôt know the keys in advance?</p>
<p>Use <code>[(string * &lt; value type&gt;)] as json.object</code> to
treat an object like a list of key-value pairs.</p>
<p>Example JSON:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> <span class="dt">&quot;a&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span> <span class="dt">&quot;b&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span> <span class="dt">&quot;c&quot;</span><span class="fu">:</span> <span class="dv">3</span> <span class="fu">}</span></span></code></pre></div>
<p>Use this type:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>[(string * int)] as json.object</span></code></pre></div>
<p>Parsed as:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>[(<span class="st">&quot;a&quot;</span>, <span class="dv">1</span>), (<span class="st">&quot;b&quot;</span>, <span class="dv">2</span>), (<span class="st">&quot;c&quot;</span>, <span class="dv">3</span>)]</span></code></pre></div>
<p>You can even use <code>int?</code> if some values might be missing or
of a non-int type.</p>
<h3 id="handling-errors"><a href="#handling-errors" class="anchor">‚ö†Ô∏è
Handling Errors</a></h3>
<p>Parsing errors raise a <code>error.json</code> exception:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">try</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> <span class="dt">json.parse</span> ({status, <span class="va">data</span> = {track}} : {...}) = response</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Do something with data</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> err: [error.json] <span class="kw">do</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Handle the parse failure</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<hr />
<h2 id="full-example"><a href="#full-example" class="anchor">üß™ Full
Example</a></h2>
<div class="sourceCode" id="cb22"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="va">data</span> = &#39;{</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;foo&quot;</span>: <span class="fl">34.24</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;gni gno&quot;</span>: <span class="dv">true</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;nested&quot;</span>: {</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;tuple&quot;</span>: [<span class="dv">123</span>, <span class="fl">3.14</span>, <span class="dv">false</span>],</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;list&quot;</span>:  [<span class="fl">44.0</span>, <span class="dv">55</span>, <span class="fl">66.12</span>],</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;nullable_list&quot;</span>: [<span class="fl">12.33</span>, <span class="dv">23</span>, <span class="st">&quot;aabb&quot;</span>],</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;object_as_list&quot;</span>: {</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;foo&quot;</span>: <span class="dv">123</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;gni&quot;</span>: <span class="fl">456.0</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;gno&quot;</span>: <span class="fl">3.14</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;arbitrary object key ‚ú®&quot;</span>: <span class="dv">true</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>}&#39;</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> <span class="dt">json.parse</span> (x :</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    foo: float,</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;gni gno&quot;</span> as gni_gno: bool,</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    nested: {</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>      tuple: (_ * float),</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>      list: [float],</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>      nullable_list: [int?],</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>      object_as_list: [(string * float)] as json.object,</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;arbitrary object key ‚ú®&quot;</span> as arbitrary_key: bool,</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>      not_present: bool?</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>) = data</span></code></pre></div>
<h3 id="other-features"><a href="#other-features" class="anchor">üõ†Ô∏è
Other Features</a></h3>
<ul>
<li><strong>JSON5 support</strong> (for trailing commas, comments,
etc.):</li>
</ul>
<div class="sourceCode" id="cb23"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> json.parse[<span class="va">json5</span>=<span class="dv">true</span>] <span class="va">x</span> = ...</span></code></pre></div>
<ul>
<li><strong>Exporting to JSON</strong>:</li>
</ul>
<div class="sourceCode" id="cb24"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="dt">print</span>(<span class="dt">json.stringify</span>({<span class="va">artist</span>=<span class="st">&quot;Bla&quot;</span>, <span class="va">title</span>=<span class="st">&quot;Blo&quot;</span>}))</span></code></pre></div>
<ul>
<li><strong>Building JSON manually</strong>:</li>
</ul>
<p>This can be useful when dynamically generating json output.</p>
<p>The most common tool is <code>json.object</code> to build dynamic
key-value objects:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="va">j</span> = <span class="dt">json.object</span>()</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="dt">j.add</span>(<span class="st">&quot;foo&quot;</span>, <span class="dv">1</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="dt">j.add</span>(<span class="st">&quot;bar&quot;</span>, <span class="st">&quot;baz&quot;</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="dt">j.remove</span>(<span class="st">&quot;foo&quot;</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="dt">print</span>(<span class="dt">json.stringify</span>(j))</span></code></pre></div>
<p>In some cases, for instance when returning a mixed type of json in a
http response, you can also use <code>json.value</code>:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">try</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Send a number here:</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">id</span> = <span class="dv">1234</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">res.json</span>(<span class="dt">json.value</span>(id))</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> err <span class="kw">do</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Or a string in case of an error:</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">res.json</span>(<span class="dt">json.value</span>(<span class="st">&quot;Error while processing request: #{err}&quot;</span>))</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="recap"><a href="#recap" class="anchor">üöÄ Recap</a></h2>
<p>‚úÖ Liquidsoap gives you a safe and expressive way to work with JSON
üß† Type annotations help catch issues early and make your code clearer
üõ†Ô∏è Advanced types let you tackle real-world data with ease</p>
<p>Once you‚Äôve got the hang of parsing, try exploring the actual
<code>tests/language/json.liq</code> test file in the source repo‚Äîit‚Äôs
full of neat examples and tricks!</p>
          <div id="footer"></div>
        </main>
      </div>
    </div>
    <!--   Core JS Files   -->

    <script src="/assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript"></script>
    <script src="/assets/js/liq-jquery.js" type="text/javascript"></script>
  </body>

</html>
