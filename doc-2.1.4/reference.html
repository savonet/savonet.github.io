<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Liquidsoap</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!-- Extra details for Live View on GitHub Pages -->
    <!-- Canonical SEO -->
    <link rel="canonical" href="https://www.liquidsoap.info/" />
    <!--  Social tags      -->
    <meta name="keywords" content="radio, audio, video, streaming, icecast, shoutcast">
    <meta name="description" content="Swiss-army knife for multimedia streaming">
    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Liquidsoap Streaming Language">
    <meta itemprop="description" content="Swiss-army knife for multimedia streaming">
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="product">
    <meta name="twitter:site" content="@LiquidsoapMedia">
    <meta name="twitter:title" content="Liquidsoap Streaming Language">
    <meta name="twitter:description" content="Swiss-army knife for multimedia streaming">
    <meta name="twitter:creator" content="@LiquidsoapMedia">
    <meta name="twitter:image" content="https://www.liquidsoap.info//assets/img/bottle_invert.png">
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="/assets/css/custom.css" rel="stylesheet" />
    <link href="/assets/css/material-kit.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <!-- Documentation extras -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
    <link rel="stylesheet" href="/assets/demo/docs.min.css">
    <style>
    .navbar-absolute-logo {
      padding-left: 45px;
    }

    .navbar-absolute-logo img {
      position: absolute;
      left: 15px;
      margin-top: -6px;
    }

    body {
      background: white;
    }

    p {
        font-size: 16px;
        text-align: justify;
    }
    </style>
    <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    </style>
  </head>

  <body class="bd-docs" data-spy="scroll" data-target=".bd-sidenav-active">
    <a id="skippy" class="sr-only sr-only-focusable" href="#content">
      <div class="container">
        <span class="skiplink-text">Skip to main content</span>
      </div>
    </a>
    <header class="navbar navbar-expand navbar-dark bg-primary flex-column flex-md-row bd-navbar">
      <a class="navbar-brand mr-0 mr-md-2 navbar-absolute-logo" href="/doc-2.1.4">
        <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 600 600" focusable="false" style="width: 25px; height: 25px;">
          <title>Liquidsoap</title>
          <style type="text/css">
.st0{fill:#FFFFFF;}
          </style>
          <g>
          <path class="st0" d="M102.4,593.8c-0.7-2.8-3.4-2.5-5.3-3.3c-24.6-10.2-37.2-28.7-37.2-55.6c-0.1-72.1,0-144.2,0-216.3
          c0-52.3,0-104.6,0-156.9c0-37.6,23.1-60.9,60.6-61.1c12-0.1,23.9-0.2,35.9,0c15.7,0.3,26.7,10.1,26.3,23
          c-0.4,12.5-11.1,21.5-26.3,21.8c-12,0.2-23.9-0.1-35.9,0.1c-11.8,0.1-15.6,3.7-15.6,15.3c-0.1,124.4,0,248.8-0.1,373.2
          c0,10.3,4.5,15.1,14.8,15.1c69.1-0.1,138.2,0,207.3-0.1c12.3,0,15.5-3.7,15.5-17.7c0-74.7,0-149.4,0-224.2c0-47.8,0-95.6,0-143.5
          c0-15.2-3-18.1-18.4-18.2c-10.8,0-21.7,0.1-32.5,0c-16-0.2-26.7-9.4-26.6-22.5c0.1-13,10.9-22.1,26.9-22.3
          c13.4-0.2,26.9-0.3,40.3,0.1c30.8,1,54.9,24.5,55,55.2c0.3,127.4,0.3,254.8,0.1,382.2c0,25.5-15.8,45.7-40.2,53.3
          c-1.7,0.5-3.8,0-4.5,2.4C262.3,593.8,182.4,593.8,102.4,593.8z"/>
          <path class="st0" d="M537.4,212.6c-16.8,23-56.5,16.5-68.6-9.5c-8-17.2-12.4-32.7-12-54.5c4.6,4.1,8.3,7.5,12.1,10.7
          c10.3,8.6,21,14,35.5,11.8c12.5-1.9,21.5,6,28.2,16.3c2,3,1.3,7.3,4.8,9.5C537.4,202.2,537.4,207.4,537.4,212.6z"/>
          <path class="st0" d="M200.6,230.4c0-55.3,0-110.5,0-165.8c0-40.7,22.3-62.7,63.2-62.7c50.4,0,100.8,0,151.3,0
          c36.1,0,59.1,21.9,60.4,57.7c0.5,13.1,0.4,26.1,0,39.2c-0.4,15.1-10.1,25.8-22.5,25.7c-12-0.1-21.6-10.1-22.3-24.8
          c-0.6-12.7-0.4-25.4-0.1-38.1c0.2-10.4-4.5-14.9-14.9-14.9c-51.5,0.1-103.1,0-154.6,0.1c-12.7,0-15.5,3.2-15.5,17.5
          c0,105.3,0,210.6,0,316c0,7.8,0.1,15.7,0,23.5c-0.2,17.5-9.4,28.9-23,28.6c-13.5-0.3-21.9-10.9-21.9-28.3
          C200.6,346.2,200.6,288.3,200.6,230.4z"/>
          </g>
        </svg>
        Liquidsoap
      </a>
      <ul class="navbar-nav flex-row d-none d-md-flex">
        <li class="nav-item dropdown">
          <a data-versions="dev 2.1.4 2.2.5 2.3.0 2.3.1 2.3.2
2.3.3" data-version="2.1.4" class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="liq-version" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            2.1.4
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="liq-version" id="liq-versions">
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://github.com/savonet/liquidsoap" target="_blank" rel="noopener" aria-label="GitHub">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false">
              <title>GitHub</title>
              <path d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z" fill="currentColor" fill-rule="evenodd" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-2" href="https://twitter.com/liquidsoapmedia" target="_blank" rel="noopener" aria-label="Twitter">
            <svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false">
              <title>Twitter</title>
              <path d="M160.83 416.32c193.2 0 298.92-160.22 298.92-298.92 0-4.51 0-9-.2-13.52A214 214 0 0 0 512 49.38a212.93 212.93 0 0 1-60.44 16.6 105.7 105.7 0 0 0 46.3-58.19 209 209 0 0 1-66.79 25.37 105.09 105.09 0 0 0-181.73 71.91 116.12 116.12 0 0 0 2.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48 0 0 0 68 159.6a106.27 106.27 0 0 1-47.53-13.11v1.43a105.28 105.28 0 0 0 84.21 103.06 105.67 105.67 0 0 1-47.33 1.84 105.06 105.06 0 0 0 98.14 72.94A210.72 210.72 0 0 1 25 370.84a202.17 202.17 0 0 1-25-1.43 298.85 298.85 0 0 0 160.83 46.92" fill="currentColor" />
            </svg>
          </a>
        </li>
      </ul>
      <div class="navbar-nav-scroll ml-md-auto ">
        <ul class="navbar-nav bd-navbar-nav flex-row">
          <!--
            <li class="nav-item">
            <a class="nav-link" href=""> <i class="material-icons">card_membership</i> PRO Services </a>
            </li>
            -->
          <li class="nav-item">
            <script async src="https://cse.google.com/cse.js?cx=24f50f6f088994c53"></script>
            <style>
.cse .gsc-control-cse, .gsc-control-cse {
  background-color: transparent;
  border: none;
  width: 300px;
}
            </style>
            <div class="gcse-search"></div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/savonet/liquidsoap/issues" target="_blank" rel="noopener"><i class="material-icons">star</i> Get Help</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="" target="_blank" rel="noopener"></a>
          </li>
        </ul>
      </div>
      <a href="https://github.com/savonet/liquidsoap" class="github-corner" aria-label="View source on Github">
        <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#9c27b0; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
          <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
          <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
          <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
      </a>
      <style>
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out
}

        @keyframes octocat-wave {
          0%,
          100% {
            transform: rotate(0)
          }
          20%,
          60% {
            transform: rotate(-25deg)
          }
          40%,
          80% {
            transform: rotate(10deg)
          }
        }

        @media (max-width:500px) {
          .github-corner:hover .octo-arm {
            animation: none
          }
          .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out
          }
        }
      </style>
    </header>
    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
          <nav class="collapse bd-links" id="bd-docs-nav">
            <div class="bd-toc-item active">
              <ul class="nav bd-sidenav">
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/doc-2.1.4/install.html">
                    Install
                  </a>
                </li>
                <li>
                  <a href="/doc-2.1.4/migrating.html">
                    Migrating from previous versions
                  </a>
                </li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="#">
                    Starters
                  </a>
                </li>
                <li><a href="/doc-2.1.4/book.html">The book</a></li>
                <li>
                  <a href="/doc-2.1.4/presentations.html">Video Presentations</a>
                </li>
                <li>
                  <a href="/doc-2.1.4/help.html">How to find help</a>
                </li>
                <li>
                  <a href="/doc-2.1.4/faq.html">Frequently Asked Questions</a>
                </li>
                <li><a href="/doc-2.1.4/quick_start.html">Quickstart</a></li>
                <li>
                  <a href="/doc-2.1.4/complete_case.html">Complete case analysis</a>
                </li>
                <li>
                  <a href="/doc-2.1.4/cookbook.html">Cookbook</a>
                </li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Reference
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.1.4/language.html">Script language</a></li>
                <li>
                  <a href="/doc-2.1.4/reference.html">Core API</a></li>
                <li>
                  <a href="/doc-2.1.4/reference-extras.html">Extra API</a></li>
                <li>
                  <a href="/doc-2.1.4/protocols.html">Protocols</a></li>
                <li>
                  <a href="/doc-2.1.4/settings.html">Settings</a></li>
                <li>
                  <a href="/doc-2.1.4/ffmpeg.html">FFmpeg support</a></li>
                <li>
                  <a href="/doc-2.1.4/encoding_formats.html">Encoding formats</a></li>
                <li>
                  <a href="/doc-2.1.4/video.html">Videos streams</a></li>
                <li>
                  <a href="/doc-2.1.4/json.html">JSON import/export</a></li>
                <li>
                  <a href="/doc-2.1.4/ladspa.html">LADSPA plugins</a></li>
                <li>
                  <a href="/doc-2.1.4/playlist_parsers.html">Playlist parsers</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Core
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.1.4/sources.html">Sources</a></li>
                <li>
                  <a href="/doc-2.1.4/clocks.html">Clocks</a></li>
                <li>
                  <a href="/doc-2.1.4/requests.html">Requests</a></li>
                <li>
                  <a href="/doc-2.1.4/protocols-presentation.html">Protocols</a></li>
                <li>
                  <a href="/doc-2.1.4/stream_content.html">Stream contents</a></li>
                <li>
                  <a href="/doc-2.1.4/script_loading.html">Script loading</a></li>
                <li><a href="/doc-2.1.4/phases.html">Execution phases</a></li>
              </ul>
            </div>
            <div class="bd-toc-item active">
              <a class="bd-toc-link" href="#">
                Specific tutorials
              </a>
              <ul class="nav bd-sidenav">
                <li>
                  <a href="/doc-2.1.4/blank.html">Blank detection</a></li>
                <li>
                  <a href="/doc-2.1.4/metadata.html">Customize metadata</a></li>
                <li>
                  <a href="/doc-2.1.4/seek.html">Seek and cue support</a></li>
                <li>
                  <a href="/doc-2.1.4/external_decoders.html">External decoders</a></li>
                <li>
                  <a href="/doc-2.1.4/external_streams.html">External streams</a></li>
                <li>
                  <a href="/doc-2.1.4/external_encoders.html">External encoders</a></li>
                <li>
                  <a href="/doc-2.1.4/hls_output.html">HLS output</a></li>
                <li>
                  <a href="/doc-2.1.4/http_input.html">HTTP input</a></li>
                <li>
                  <a href="/doc-2.1.4/harbor.html">Harbor input</a></li>
                <li>
                  <a href="/doc-2.1.4/harbor_http.html">Interaction with the Harbor</a></li>
                <li>
                  <a href="/doc-2.1.4/server.html">Interaction with the server</a></li>
                <li>
                  <a href="/doc-2.1.4/icy_metadata.html">ICY metadata update</a></li>
                <li>
                  <a href="/doc-2.1.4/replay_gain.html">Normalization and replay gain</a></li>
                <li>
                  <a href="/doc-2.1.4/request_sources.html">Requests-based sources</a></li>
                <li>
                  <a href="/doc-2.1.4/shoutcast.html">Shoutcast output</a></li>
                <li>
                  <a href="/doc-2.1.4/dynamic_sources.html">Dynamic source creation</a></li>
                <li>
                  <a href="/doc-2.1.4/crossfade.html">Crossfading</a></li>
                <li>
                  <a href="/doc-2.1.4/in_production.html">Using in production</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    User scripts
                  </a>
                </li>
                <li>
                  <a href="/doc-2.1.4/beets.html">Beets</a></li>
                <li>
                  <a href="/doc-2.1.4/geekradio.html">Geekradio</a></li>
                <li>
                  <a href="/doc-2.1.4/radiopi.html">RadioPi</a></li>
                <li>
                  <a href="/doc-2.1.4/dolebrai.html">Dolebraï</a></li>
                <li>
                  <a href="/doc-2.1.4/frequence3.html">Frequence3</a></li>
                <li>
                  <a href="/doc-2.1.4/video-static.html">Video with a single static image</a></li>
                <li>
                  <a href="/doc-2.1.4/split-cue.html">Split a CUE sheet</a></li>
              </ul>
              <ul class="nav bd-sidenav">
                <li>
                  <a class="bd-toc-link" href="#">
                    Behind the curtains
                  </a>
                </li>
                <li>
                  <a href="/doc-2.1.4/publications.html">Some presentations and publications</a></li>
                <li>
                  <a href="https://github.com/savonet">OCaml libraries</a></li>
                <li class="active bd-sidenav-active">
                  <a class="bd-toc-link" href="/legacy">
                    Legacy website
                  </a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
        <!--
          <div class="d-none d-xl-block col-xl-2 bd-toc">
          <ul class="section-nav">
          <li class="toc-entry toc-h2">
          <a href="#quick-start">Quick start</a>
          <ul>
          <li class="toc-entry toc-h3">
          <a href="#css">CSS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#js">JS</a>
          </li>
          <li class="toc-entry toc-h3">
          <a href="#fonts-and-icons">Fonts and Icons</a>
          </li>
          </ul>
          </li>
          <li class="toc-entry toc-h2">
          <a href="#starter-template">Starter template</a>
          </li>
          </ul>
          </div>
        -->
          <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
          <h1 id="liquidsoap-scripting-language-reference"><a
href="#liquidsoap-scripting-language-reference"
class="anchor">Liquidsoap scripting language reference</a></h1>
<p>The <strong>Source / …</strong> categories contain all functions that
return sources. The <strong>Input</strong> functions are those which
build elementary sources (playing files, synthesizing sound, etc.). The
<strong>Output</strong> functions are those which take a source and
register it for being streamed to the outside (file, soundcard, audio
server, etc.). The <strong>Visualization</strong> functions are
experimental ones that let you visualize in real-time some aspects of
the audio stream. The <strong>Sound Processing</strong> functions are
those which basically work on the source as a continuous audio stream.
They would typically be mixers of streams, audio effects or analysis.
Finally, <strong>Track Processing</strong> functions are basically all
others, often having a behaviour that depends on or affects the extra
information that liquidsoap puts in streams: track limits and
metadata.</p>
<ul>
<li><a href="#source-conversions">Source / Conversions</a></li>
<li><a href="#source-input">Source / Input</a></li>
<li><a href="#source-liquidsoap">Source / Liquidsoap</a></li>
<li><a href="#source-midi-processing">Source / MIDI Processing</a></li>
<li><a href="#source-output">Source / Output</a></li>
<li><a href="#source-sound-processing">Source / Sound
Processing</a></li>
<li><a href="#source-sound-synthesis">Source / Sound Synthesis</a></li>
<li><a href="#source-track-processing">Source / Track
Processing</a></li>
<li><a href="#source-video-processing">Source / Video
Processing</a></li>
<li><a href="#source-visualization">Source / Visualization</a></li>
<li><a href="#ffmpeg-filter">FFmpeg Filter</a></li>
<li><a href="#bool">Bool</a></li>
<li><a href="#control">Control</a></li>
<li><a href="#interaction">Interaction</a></li>
<li><a href="#liquidsoap">Liquidsoap</a></li>
<li><a href="#list">List</a></li>
<li><a href="#math">Math</a></li>
<li><a href="#pair">Pair</a></li>
<li><a href="#string">String</a></li>
<li><a href="#system">System</a></li>
</ul>
<h2 id="bool"><a href="#bool" class="anchor">Bool</a></h2>
<h3 id="section"><a href="#section"
class="anchor"><code>!=</code></a></h3>
<p>Comparison of comparable values.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
</ul>
<h3 id="section-1"><a href="#section-1"
class="anchor"><code>&lt;</code></a></h3>
<p>Comparison of comparable values.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
</ul>
<h3 id="section-2"><a href="#section-2"
class="anchor"><code>&lt;=</code></a></h3>
<p>Comparison of comparable values.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
</ul>
<h3 id="section-3"><a href="#section-3"
class="anchor"><code>==</code></a></h3>
<p>Comparison of comparable values.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
</ul>
<h3 id="section-4"><a href="#section-4"
class="anchor"><code>&gt;</code></a></h3>
<p>Comparison of comparable values.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
</ul>
<h3 id="section-5"><a href="#section-5"
class="anchor"><code>&gt;=</code></a></h3>
<p>Comparison of comparable values.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
</ul>
<h3 id="and"><a href="#and" class="anchor"><code>and</code></a></h3>
<p>Return the conjunction of its arguments</p>
<p>Type:</p>
<pre><code>({bool}, {bool}) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{bool}</code>)</li>
<li><code>(unlabeled)</code> (of type <code>{bool}</code>)</li>
</ul>
<h3 id="not"><a href="#not" class="anchor"><code>not</code></a></h3>
<p>Returns the negation of its argument.</p>
<p>Type:</p>
<pre><code>(bool) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>bool</code>)</li>
</ul>
<h3 id="or"><a href="#or" class="anchor"><code>or</code></a></h3>
<p>Return the disjunction of its arguments</p>
<p>Type:</p>
<pre><code>({bool}, {bool}) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{bool}</code>)</li>
<li><code>(unlabeled)</code> (of type <code>{bool}</code>)</li>
</ul>
<h3 id="random.bool"><a href="#random.bool"
class="anchor"><code>random.bool</code></a></h3>
<p>Generate a random boolean.</p>
<p>Type:</p>
<pre><code>() -&gt; bool</code></pre>
<p>Arguments:</p>
<h2 id="control"><a href="#control" class="anchor">Control</a></h2>
<h3 id="ignore"><a href="#ignore"
class="anchor"><code>ignore</code></a></h3>
<p>Convert anything to unit, preventing warnings.</p>
<p>Type:</p>
<pre><code>(&#39;a) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
</ul>
<h3 id="thread.run"><a href="#thread.run"
class="anchor"><code>thread.run</code></a></h3>
<p>Run a function in a separate thread.</p>
<p>Type:</p>
<pre><code>(?fast : bool, ?delay : float, ?every : {float}?,
 (() -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>fast</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Whether the thread is supposed to return quickly or
not. Typically, blocking tasks (e.g. fetching data over the internet)
should not be considered to be fast. When set to <code>false</code> its
priority will be lowered below that of request resolutions and fast
timeouts. This is only effective if you set a dedicated queue for fast
tasks, see the “scheduler” settings for more details.</li>
<li><code>delay</code> (of type <code>float</code>, which defaults to
<code>0.</code>): Delay (in seconds) after which the thread should be
launched.</li>
<li><code>every</code> (of type <code>{float}?</code>, which defaults to
<code>null</code>): How often (in seconds) the thread should be run. If
negative or <code>null</code>, run once.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>):
Function to execute.</li>
</ul>
<h2 id="file"><a href="#file" class="anchor">File</a></h2>
<h3 id="file.contents"><a href="#file.contents"
class="anchor"><code>file.contents</code></a></h3>
<p>Read the whole contents of a file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.digest"><a href="#file.digest"
class="anchor"><code>file.digest</code></a></h3>
<p>Return an MD5 digest for the given file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.download"><a href="#file.download"
class="anchor"><code>file.download</code></a></h3>
<p>Download file using a regular http.get request. Returns
<code>true</code> on success.</p>
<p>Type:</p>
<pre><code>(filename : string, ?timeout : float, string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>filename</code> (of type <code>string</code>): Downloaded
filename.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>5.</code>): Timeout in seconds</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.exists"><a href="#file.exists"
class="anchor"><code>file.exists</code></a></h3>
<p>Returns true if the file or directory exists.</p>
<p>Type:</p>
<pre><code>(string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.extension"><a href="#file.extension"
class="anchor"><code>file.extension</code></a></h3>
<p>Returns a file’s extension.</p>
<p>Type:</p>
<pre><code>(?dir_sep : string, ?leading_dot : bool, string) -&gt;
string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>dir_sep</code> (of type <code>string</code>, which defaults to
<code>"/"</code>): Directory separator.</li>
<li><code>leading_dot</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Return extension with a leading dot,
e.g. <code>.foo</code>.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.getter"><a href="#file.getter"
class="anchor"><code>file.getter</code></a></h3>
<p>Getter to the contents of a file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; () -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
file from which the contents should be taken.</li>
</ul>
<h3 id="file.getter.float"><a href="#file.getter.float"
class="anchor"><code>file.getter.float</code></a></h3>
<p>Float getter from a file.</p>
<p>Type:</p>
<pre><code>(?default : float, string) -&gt; {float}</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>float</code>, which defaults to
<code>0.</code>): Default value when the file contains invalid
data.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
file from which the contents should be taken.</li>
</ul>
<h3 id="file.is_directory"><a href="#file.is_directory"
class="anchor"><code>file.is_directory</code></a></h3>
<p>Returns true if the file exists and is a directory.</p>
<p>Type:</p>
<pre><code>(string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.iterator"><a href="#file.iterator"
class="anchor"><code>file.iterator</code></a></h3>
<p>Iterate over the contents of a file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; () -&gt; string?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.lines"><a href="#file.lines"
class="anchor"><code>file.lines</code></a></h3>
<p>Get the list of lines of a file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.lines.iterator"><a href="#file.lines.iterator"
class="anchor"><code>file.lines.iterator</code></a></h3>
<p>Iterate over the lines of a file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; () -&gt; string?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.ls"><a href="#file.ls"
class="anchor"><code>file.ls</code></a></h3>
<p>List all the files in a directory.</p>
<p>Type:</p>
<pre><code>(?absolute : bool, ?recursive : bool, ?pattern : string?,
 string) -&gt; [string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>absolute</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Whether to return absolute paths.</li>
<li><code>recursive</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Whether to look recursively in subdirectories.</li>
<li><code>pattern</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Pattern that the filenames should match
(e.g. <code>"*.mp3"</code>).</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Directory to
look in.</li>
</ul>
<h3 id="file.metadata"><a href="#file.metadata"
class="anchor"><code>file.metadata</code></a></h3>
<p>Read metadata from a file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.ffmpeg"><a href="#file.metadata.ffmpeg"
class="anchor"><code>file.metadata.ffmpeg</code></a></h3>
<p>Read metadata from a file using the ffmpeg decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.flac"><a href="#file.metadata.flac"
class="anchor"><code>file.metadata.flac</code></a></h3>
<p>Read metadata from a file using the flac decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.gstreamer"><a href="#file.metadata.gstreamer"
class="anchor"><code>file.metadata.gstreamer</code></a></h3>
<p>Read metadata from a file using the gstreamer decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.id3"><a href="#file.metadata.id3"
class="anchor"><code>file.metadata.id3</code></a></h3>
<p>Read metadata from a file using the id3 decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.id3v1"><a href="#file.metadata.id3v1"
class="anchor"><code>file.metadata.id3v1</code></a></h3>
<p>Read metadata from a file using the id3v1 decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.id3v2"><a href="#file.metadata.id3v2"
class="anchor"><code>file.metadata.id3v2</code></a></h3>
<p>Read metadata from a file using the id3v2 decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.imagemd"><a href="#file.metadata.imagemd"
class="anchor"><code>file.metadata.imagemd</code></a></h3>
<p>Read metadata from a file using the imagemd decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.mp4"><a href="#file.metadata.mp4"
class="anchor"><code>file.metadata.mp4</code></a></h3>
<p>Read metadata from a file using the mp4 decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.ogg"><a href="#file.metadata.ogg"
class="anchor"><code>file.metadata.ogg</code></a></h3>
<p>Read metadata from a file using the ogg decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.taglib"><a href="#file.metadata.taglib"
class="anchor"><code>file.metadata.taglib</code></a></h3>
<p>Read metadata from a file using the taglib decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.metadata.videomd"><a href="#file.metadata.videomd"
class="anchor"><code>file.metadata.videomd</code></a></h3>
<p>Read metadata from a file using the videomd decoder.</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the metadata should be read.</li>
</ul>
<h3 id="file.mime"><a href="#file.mime"
class="anchor"><code>file.mime</code></a></h3>
<p>Get the MIME type of a file, according to libmagic.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.mime_default"><a href="#file.mime_default"
class="anchor"><code>file.mime_default</code></a></h3>
<p>Alias of file.mime (because it is available)</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.mkdir"><a href="#file.mkdir"
class="anchor"><code>file.mkdir</code></a></h3>
<p>Create a directory.</p>
<p>Type:</p>
<pre><code>(?perms : int, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>perms</code> (of type <code>int</code>, which defaults to
<code>493</code>): Default file rights if created (default is
<code>0o755</code>).</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.open"><a href="#file.open"
class="anchor"><code>file.open</code></a></h3>
<p>Open a file.</p>
<p>Type:</p>
<pre><code>(?write : bool, ?create : bool?, ?append : bool,
 ?non_blocking : bool, ?perms : int, string) -&gt; socket</code></pre>
<p>Arguments:</p>
<ul>
<li><code>write</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Open file for writing</li>
<li><code>create</code> (of type <code>bool?</code>, which defaults to
<code>null</code>): Create if nonexistent. Default: <code>false</code>
in read-only mode, <code>true</code> when writing.</li>
<li><code>append</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Append data if file exists.</li>
<li><code>non_blocking</code> (of type <code>bool</code>, which defaults
to <code>false</code>): Open in non-blocking mode.</li>
<li><code>perms</code> (of type <code>int</code>, which defaults to
<code>420</code>): Default file rights if created. Default:
<code>0o644</code></li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>close</code> (of type <code>() -&gt; unit</code>): Close the
socket.</li>
<li><code>read</code> (of type <code>() -&gt; string</code>): Read data
from a socket. Reading is done when the function returns an empty srring
<code>""</code>.</li>
<li><code>write</code> (of type <code>(string) -&gt; unit</code>): Write
data to a socket</li>
</ul>
<h3 id="file.read"><a href="#file.read"
class="anchor"><code>file.read</code></a></h3>
<p>Read the content of a file. Returns a function of type
<code>()-&gt;string</code>. File is done reading when function returns
the empty string <code>""</code>.</p>
<p>Type:</p>
<pre><code>(string) -&gt; () -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.remove"><a href="#file.remove"
class="anchor"><code>file.remove</code></a></h3>
<p>Remove a file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.rmdir"><a href="#file.rmdir"
class="anchor"><code>file.rmdir</code></a></h3>
<p>Remove a directory and its content.</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.size"><a href="#file.size"
class="anchor"><code>file.size</code></a></h3>
<p>File size in bytes.</p>
<p>Type:</p>
<pre><code>(string) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.temp"><a href="#file.temp"
class="anchor"><code>file.temp</code></a></h3>
<p>Return a fresh temporary filename. The temporary file is created
empty, with permissions 0o600 (readable and writable only by the file
owner).</p>
<p>Type:</p>
<pre><code>(string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File
prefix</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): File
suffix</li>
</ul>
<h3 id="file.temp_dir"><a href="#file.temp_dir"
class="anchor"><code>file.temp_dir</code></a></h3>
<p>Return a fresh temporary directory name. The temporary directory is
created empty, with permissions 0o700 (readable, writable and listable
only by the file owner).</p>
<p>Type:</p>
<pre><code>(string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Directory
prefix</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Directory
suffix</li>
</ul>
<h3 id="file.umask"><a href="#file.umask"
class="anchor"><code>file.umask</code></a></h3>
<p>Get the process’s file mode creation mask.</p>
<p>Type:</p>
<pre><code>() -&gt; int</code></pre>
<p>Arguments:</p>
<h3 id="file.umask.set"><a href="#file.umask.set"
class="anchor"><code>file.umask.set</code></a></h3>
<p>Set process’s file mode creation mask.</p>
<p>Type:</p>
<pre><code>(int) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>)</li>
</ul>
<h3 id="file.watch"><a href="#file.watch"
class="anchor"><code>file.watch</code></a></h3>
<p>Call a function when a file is modified. Returns unwatch function in
<code>unwatch</code> method.</p>
<p>Type:</p>
<pre><code>(string, (() -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File to
watch.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>):
Handler function.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>unwatch</code> (of type <code>() -&gt; unit</code>): Function
to remove the watch on the file.</li>
</ul>
<h3 id="file.which"><a href="#file.which"
class="anchor"><code>file.which</code></a></h3>
<p><code>file.which("progname")</code> looks for an executable named
“progname” using directories from the PATH environment variable and
returns “” if it could not find one.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.write"><a href="#file.write"
class="anchor"><code>file.write</code></a></h3>
<p>Write data to a file.</p>
<p>Type:</p>
<pre><code>(data : {string?}, ?perms : int, ?append : bool, string) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>data</code> (of type <code>{string?}</code>): Data to write.
If passing a callback <code>() -&gt; string?</code>, the callback must
return <code>null</code> or <code>""</code> when it has finished sending
all its data.</li>
<li><code>perms</code> (of type <code>int</code>, which defaults to
<code>420</code>): Default file rights if created. Default:
<code>0o644</code>.</li>
<li><code>append</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Append data if file exists.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Path to
write to</li>
</ul>
<h3 id="file.write.stream"><a href="#file.write.stream"
class="anchor"><code>file.write.stream</code></a></h3>
<p>Stream data to a file. Returns a callback to write to the file.
Execute with <code>null</code> or <code>""</code> to signify the end of
the writing operation.</p>
<p>Type:</p>
<pre><code>(?perms : int, ?append : bool, string) -&gt;
(string?) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>perms</code> (of type <code>int</code>, which defaults to
<code>420</code>): Default file rights if created. Default:
<code>0o644</code>.</li>
<li><code>append</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Append data if file exists.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Path to
write to</li>
</ul>
<h3 id="get_mime"><a href="#get_mime"
class="anchor"><code>get_mime</code></a></h3>
<p>Generic mime test. First try to use file.mime if it exist. Otherwise
try to get the value using the file binary. Returns “” (empty string) if
no value can be found.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): The file to
test</li>
</ul>
<h3 id="path.basename"><a href="#path.basename"
class="anchor"><code>path.basename</code></a></h3>
<p>Get the base name of a path.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="path.concat"><a href="#path.concat"
class="anchor"><code>path.concat</code></a></h3>
<p>Concatenate two paths, using the appropriate directory separator.</p>
<p>Type:</p>
<pre><code>(string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="path.dirname"><a href="#path.dirname"
class="anchor"><code>path.dirname</code></a></h3>
<p>Get the directory name of a path.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="path.home.unrelate"><a href="#path.home.unrelate"
class="anchor"><code>path.home.unrelate</code></a></h3>
<p>Expand path that start with ‘~’ with the current home directory.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="path.remove_extension"><a href="#path.remove_extension"
class="anchor"><code>path.remove_extension</code></a></h3>
<p>Remove the file extension from a path.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.apic.parse"><a href="#string.apic.parse"
class="anchor"><code>string.apic.parse</code></a></h3>
<p>Parse APIC ID3v2 tags (such as those obtained in the APIC tag from
<code>file.metadata.id3v2</code>). The returned values are: mime,
picture type, description, and picture data.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): APIC
data.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>description</code> (of type <code>string</code>):
Description</li>
<li><code>mime</code> (of type <code>string</code>): Mime type</li>
<li><code>picture_type</code> (of type <code>int</code>): Picture
type</li>
</ul>
<h2 id="filter"><a href="#filter" class="anchor">Filter</a></h2>
<h3 id="ffmpeg.filter.audio.input"><a href="#ffmpeg.filter.audio.input"
class="anchor"><code>ffmpeg.filter.audio.input</code></a></h3>
<p>Attach an audio source to a filter’s input</p>
<p>Type:</p>
<pre><code>(?pass_metadata : bool, ffmpeg.filter.graph,
 source(audio=ffmpeg.audio.raw(&#39;a), video=none,
 midi=none)) -&gt; ffmpeg.filter.audio</code></pre>
<p>Arguments:</p>
<ul>
<li><code>pass_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Pass liquidsoap’s metadata to this
stream</li>
<li><code>(unlabeled)</code> (of type
<code>ffmpeg.filter.graph</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=ffmpeg.audio.raw('a), video=none, midi=none)</code>)</li>
</ul>
<h3 id="ffmpeg.filter.create"><a href="#ffmpeg.filter.create"
class="anchor"><code>ffmpeg.filter.create</code></a></h3>
<p>Configure and launch a filter graph</p>
<p>Type:</p>
<pre><code>(((ffmpeg.filter.graph) -&gt; &#39;a)) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>(ffmpeg.filter.graph) -&gt; 'a</code>)</li>
</ul>
<h3 id="ffmpeg.filter.video.input"><a href="#ffmpeg.filter.video.input"
class="anchor"><code>ffmpeg.filter.video.input</code></a></h3>
<p>Attach a video source to a filter’s input</p>
<p>Type:</p>
<pre><code>(?pass_metadata : bool, ffmpeg.filter.graph,
 source(audio=none, video=ffmpeg.video.raw(&#39;a),
 midi=none)) -&gt; ffmpeg.filter.video</code></pre>
<p>Arguments:</p>
<ul>
<li><code>pass_metadata</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Pass liquidsoap’s metadata to this
stream</li>
<li><code>(unlabeled)</code> (of type
<code>ffmpeg.filter.graph</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=none, video=ffmpeg.video.raw('a), midi=none)</code>)</li>
</ul>
<h2 id="input"><a href="#input" class="anchor">Input</a></h2>
<h3 id="input-1"><a href="#input-1"
class="anchor"><code>input</code></a></h3>
<p>Input an audio stream using the default operator.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?start : bool, ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?fallible : bool) -&gt;
source(audio=pcm(&#39;A), video=&#39;B, midi=&#39;C)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Automatically start outputting whenever possible. If
<code>true</code>, an infallible (normal) output will start outputting
as soon as it is created, and a fallible output will (re)start as soon
as its source becomes available for streaming.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
stops.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be (temporarily) stopped.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="interaction"><a href="#interaction"
class="anchor">Interaction</a></h2>
<h3 id="audioscrobbler.nowplaying"><a href="#audioscrobbler.nowplaying"
class="anchor"><code>audioscrobbler.nowplaying</code></a></h3>
<p>Submit a now playing song using the audioscrobbler protocol.</p>
<p>Type:</p>
<pre><code>(user : string, password : string, ?host : string,
 ?port : int, ?length : bool, [string * string]) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>user</code> (of type <code>string</code>)</li>
<li><code>password</code> (of type <code>string</code>)</li>
<li><code>host</code> (of type <code>string</code>, which defaults to
<code>"post.audioscrobbler.com"</code>): Host for audioscrobbling
submissions.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>80</code>): Port for audioscrobbling submissions.</li>
<li><code>length</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Try to submit length information. This operation
can be CPU intensive. Value forced to true when used with the “user”
source type.</li>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="audioscrobbler.submit"><a href="#audioscrobbler.submit"
class="anchor"><code>audioscrobbler.submit</code></a></h3>
<p>Submit a played song using the audioscrobbler protocol.</p>
<p>Type:</p>
<pre><code>(?source : string, user : string, password : string,
 ?host : string, ?port : int, ?length : bool,
 [string * string]) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>source</code> (of type <code>string</code>, which defaults to
<code>"broadcast"</code>): Source for tracks. Should be one of:
“broadcast”, “user”, “recommendation” or “unknown”. Since liquidsoap is
intended for radio broadcasting, this is the default. Sources other than
user don’t need duration to be set.</li>
<li><code>user</code> (of type <code>string</code>)</li>
<li><code>password</code> (of type <code>string</code>)</li>
<li><code>host</code> (of type <code>string</code>, which defaults to
<code>"post.audioscrobbler.com"</code>): Host for audioscrobbling
submissions.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>80</code>): Port for audioscrobbling submissions.</li>
<li><code>length</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Try to submit length information. This operation
can be CPU intensive. Value forced to true when used with the “user”
source type.</li>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="compress.multiband.interactive"><a
href="#compress.multiband.interactive"
class="anchor"><code>compress.multiband.interactive</code></a></h3>
<p>Create a multiband compressor whose parameters are interactive
variables.</p>
<p>Type:</p>
<pre><code>(?id : string, ?bands : int, source(audio=pcm(&#39;a),
 video=internal(&#39;b), midi=internal(&#39;c))) -&gt;
source(audio=pcm(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string</code>, which defaults to
<code>"compress"</code>): Id of the source. Variable names are prefixed
with this.</li>
<li><code>bands</code> (of type <code>int</code>, which defaults to
<code>5</code>): Number of bands.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=internal('b), midi=internal('c))</code>):
Source to compress.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>gain</code> (of type <code>() -&gt; float</code>): Gain
(dB).</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>): RMS or peak
power (linear).</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="harbor.http.static"><a href="#harbor.http.static"
class="anchor"><code>harbor.http.static</code></a></h3>
<p>Serve a static path.</p>
<p>Type:</p>
<pre><code>(?port : int, ?path : string, ?browse : bool,
 ?content_type : ((string) -&gt; string),
 ?headers : [string * string], string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port for incoming harbor (http) connections.</li>
<li><code>path</code> (of type <code>string</code>, which defaults to
<code>"/"</code>): Base path.</li>
<li><code>browse</code> (of type <code>bool</code>, which defaults to
<code>false</code>): List files in directories.</li>
<li><code>content_type</code> (of type
<code>(string) -&gt; string</code>, which defaults to
<code>&lt;fun&gt;</code>): Callback to specify Content-Type on a per
file basis. Default: file.mime if compiled or file CLI if present.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[("Access-Control-Allow-Origin", "*")]</code>):
Default response headers.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Local path
to be served.</li>
</ul>
<h3 id="harbor.https.static"><a href="#harbor.https.static"
class="anchor"><code>harbor.https.static</code></a></h3>
<p>Serve a static path.</p>
<p>Type:</p>
<pre><code>(?port : int, ?path : string, ?browse : bool,
 ?content_type : ((string) -&gt; string),
 ?headers : [string * string], string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port for incoming harbor (https) connections.</li>
<li><code>path</code> (of type <code>string</code>, which defaults to
<code>"/"</code>): Base path.</li>
<li><code>browse</code> (of type <code>bool</code>, which defaults to
<code>false</code>): List files in directories.</li>
<li><code>content_type</code> (of type
<code>(string) -&gt; string</code>, which defaults to
<code>&lt;fun&gt;</code>): Callback to specify Content-Type on a per
file basis. Default: file.mime if compiled or file CLI if present.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[("Access-Control-Allow-Origin", "*")]</code>):
Default response headers.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Local path
to be served.</li>
</ul>
<h3 id="http.delete"><a href="#http.delete"
class="anchor"><code>http.delete</code></a></h3>
<p>Perform a full Http DELETE request.</p>
<p>Type:</p>
<pre><code>(?headers : [string * string], ?http_version : string?,
 ?redirect : bool, ?timeout_ms : int?, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.delete.stream"><a href="#http.delete.stream"
class="anchor"><code>http.delete.stream</code></a></h3>
<p>Perform a full Http DELETE request.</p>
<p>Type:</p>
<pre><code>(?headers : [string * string], ?http_version : string?,
 ?redirect : bool, ?timeout_ms : int?, string,
 on_body_data : ((string?) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
<li><code>on_body_data</code> (of type
<code>(string?) -&gt; unit</code>): function called when receiving
response body data. <code>null</code> or <code>""</code> means that all
the data has been passed.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.get"><a href="#http.get"
class="anchor"><code>http.get</code></a></h3>
<p>Perform a full Http GET request.</p>
<p>Type:</p>
<pre><code>(?headers : [string * string], ?http_version : string?,
 ?redirect : bool, ?timeout_ms : int?, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.get.stream"><a href="#http.get.stream"
class="anchor"><code>http.get.stream</code></a></h3>
<p>Perform a full Http GET request.</p>
<p>Type:</p>
<pre><code>(?headers : [string * string], ?http_version : string?,
 ?redirect : bool, ?timeout_ms : int?, string,
 on_body_data : ((string?) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
<li><code>on_body_data</code> (of type
<code>(string?) -&gt; unit</code>): function called when receiving
response body data. <code>null</code> or <code>""</code> means that all
the data has been passed.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.head"><a href="#http.head"
class="anchor"><code>http.head</code></a></h3>
<p>Perform a full Http HEAD request.</p>
<p>Type:</p>
<pre><code>(?headers : [string * string], ?http_version : string?,
 ?redirect : bool, ?timeout_ms : int?, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.head.stream"><a href="#http.head.stream"
class="anchor"><code>http.head.stream</code></a></h3>
<p>Perform a full Http HEAD request.</p>
<p>Type:</p>
<pre><code>(?headers : [string * string], ?http_version : string?,
 ?redirect : bool, ?timeout_ms : int?, string,
 on_body_data : ((string?) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
<li><code>on_body_data</code> (of type
<code>(string?) -&gt; unit</code>): function called when receiving
response body data. <code>null</code> or <code>""</code> means that all
the data has been passed.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.multipart_form_data"><a href="#http.multipart_form_data"
class="anchor"><code>http.multipart_form_data</code></a></h3>
<p>Prepare a list of data to be sent as multipart form data</p>
<p>Type:</p>
<pre><code>(?boundary : string?,
 [
  {
    attributes : [string * string],
    contents : {string},
    headers : [string * string],
    name : string
  }]) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>boundary</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Specify boundary to use for
multipart/form-data.</li>
<li><code>(unlabeled)</code> (of type
<code>[  {    attributes : [string * string],    contents : {string},    headers : [string * string],    name : string  }]</code>):
data to insert</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>boundary</code> (of type <code>string</code>)</li>
<li><code>contents</code> (of type <code>{string}</code>)</li>
</ul>
<h3 id="http.post"><a href="#http.post"
class="anchor"><code>http.post</code></a></h3>
<p>Perform a full Http POST request`.</p>
<p>Type:</p>
<pre><code>(?data : {string}, ?headers : [string * string],
 ?http_version : string?, ?redirect : bool,
 ?timeout_ms : int?, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>data</code> (of type <code>{string}</code>, which defaults to
<code>""</code>): POST data. Use a <code>string</code> getter to stream
data and return <code>""</code> when all data has been passed.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.post.file"><a href="#http.post.file"
class="anchor"><code>http.post.file</code></a></h3>
<p>Send a file via POST request encoded in multipart/form-data. The
contents can either be directly specified (with the
<code>contents</code> argument) or taken from a file (with the
<code>file</code> argument).</p>
<p>Type:</p>
<pre><code>(?name : string, ?content_type : string?,
 ?headers : [string * string], ?boundary : string?,
 ?filename : string?, ?file : string?,
 ?contents : {string}?, ?timeout : int?,
 ?redirect : bool, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>name</code> (of type <code>string</code>, which defaults to
<code>"file"</code>): Name of the field field</li>
<li><code>content_type</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Content-type (mime) for the file.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>boundary</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Specify boundary to use for
multipart/form-data.</li>
<li><code>filename</code> (of type <code>string?</code>, which defaults
to <code>null</code>): File name sent in the request.</li>
<li><code>file</code> (of type <code>string?</code>, which defaults to
<code>null</code>): File whose contents is to be sent in the
request.</li>
<li><code>contents</code> (of type <code>{string}?</code>, which
defaults to <code>null</code>): Contents of the file sent in the
request.</li>
<li><code>timeout</code> (of type <code>int?</code>, which defaults to
<code>null</code>): Timeout in ms.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Follow reidrections.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): URL to post
to.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.post.stream"><a href="#http.post.stream"
class="anchor"><code>http.post.stream</code></a></h3>
<p>Perform a full Http POST request`.</p>
<p>Type:</p>
<pre><code>(?data : {string}, ?headers : [string * string],
 ?http_version : string?, ?redirect : bool,
 ?timeout_ms : int?, string,
 on_body_data : ((string?) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>data</code> (of type <code>{string}</code>, which defaults to
<code>""</code>): POST data. Use a <code>string</code> getter to stream
data and return <code>""</code> when all data has been passed.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
<li><code>on_body_data</code> (of type
<code>(string?) -&gt; unit</code>): function called when receiving
response body data. <code>null</code> or <code>""</code> means that all
the data has been passed.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.put"><a href="#http.put"
class="anchor"><code>http.put</code></a></h3>
<p>Perform a full Http PUT request.</p>
<p>Type:</p>
<pre><code>(?data : {string}, ?headers : [string * string],
 ?http_version : string?, ?redirect : bool,
 ?timeout_ms : int?, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>data</code> (of type <code>{string}</code>, which defaults to
<code>""</code>): POST data. Use a <code>string</code> getter to stream
data and return <code>""</code> when all data has been passed.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.put.file"><a href="#http.put.file"
class="anchor"><code>http.put.file</code></a></h3>
<p>Send a file via PUT request encoded in multipart/form-data. The
contents can either be directly specified (with the
<code>contents</code> argument) or taken from a file (with the
<code>file</code> argument).</p>
<p>Type:</p>
<pre><code>(?name : string, ?content_type : string?,
 ?headers : [string * string], ?boundary : string?,
 ?filename : string?, ?file : string?,
 ?contents : {string}?, ?timeout : int?,
 ?redirect : bool, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>name</code> (of type <code>string</code>, which defaults to
<code>"file"</code>): Name of the field field</li>
<li><code>content_type</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Content-type (mime) for the file.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>boundary</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Specify boundary to use for
multipart/form-data.</li>
<li><code>filename</code> (of type <code>string?</code>, which defaults
to <code>null</code>): File name sent in the request.</li>
<li><code>file</code> (of type <code>string?</code>, which defaults to
<code>null</code>): File whose contents is to be sent in the
request.</li>
<li><code>contents</code> (of type <code>{string}?</code>, which
defaults to <code>null</code>): Contents of the file sent in the
request.</li>
<li><code>timeout</code> (of type <code>int?</code>, which defaults to
<code>null</code>): Timeout in ms.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Follow reidrections.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): URL to put
to.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.put.stream"><a href="#http.put.stream"
class="anchor"><code>http.put.stream</code></a></h3>
<p>Perform a full Http PUT request.</p>
<p>Type:</p>
<pre><code>(?data : {string}, ?headers : [string * string],
 ?http_version : string?, ?redirect : bool,
 ?timeout_ms : int?, string,
 on_body_data : ((string?) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>data</code> (of type <code>{string}</code>, which defaults to
<code>""</code>): POST data. Use a <code>string</code> getter to stream
data and return <code>""</code> when all data has been passed.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>http_version</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Http request version.</li>
<li><code>redirect</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Perform redirections if needed.</li>
<li><code>timeout_ms</code> (of type <code>int?</code>, which defaults
to <code>10000</code>): Timeout for network operations in
milliseconds.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Requested
URL, e.g. “http://www.google.com/”.</li>
<li><code>on_body_data</code> (of type
<code>(string?) -&gt; unit</code>): function called when receiving
response body data. <code>null</code> or <code>""</code> means that all
the data has been passed.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>headers</code> (of type <code>[string * string]</code>): HTTP
headers.</li>
<li><code>protocol_version</code> (of type <code>string</code>): Version
of the HTTP protocol.</li>
<li><code>status_code</code> (of type <code>int</code>): Status
code.</li>
<li><code>status_message</code> (of type <code>string</code>): Status
message.</li>
</ul>
<h3 id="http.response"><a href="#http.response"
class="anchor"><code>http.response</code></a></h3>
<p>Create a HTTP response string.</p>
<p>Type:</p>
<pre><code>(?protocol : string, ?code : int,
 ?headers : [string * string], ?content_type : string,
 ?data : string) -&gt; () -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>protocol</code> (of type <code>string</code>, which defaults
to <code>"HTTP/1.1"</code>): HTTP protocol used.</li>
<li><code>code</code> (of type <code>int</code>, which defaults to
<code>200</code>): Response code.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Response headers.</li>
<li><code>content_type</code> (of type <code>string</code>, which
defaults to <code>""</code>): Content type for the data.</li>
<li><code>data</code> (of type <code>string</code>, which defaults to
<code>""</code>): Response data.</li>
</ul>
<h3 id="http.response.stream"><a href="#http.response.stream"
class="anchor"><code>http.response.stream</code></a></h3>
<p>Create a streamed HTTP response.</p>
<p>Type:</p>
<pre><code>(?protocol : string, ?code : int,
 ?headers : [string * string], ?content_type : string,
 data_len : &#39;a, data : (() -&gt; string)) -&gt; () -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>protocol</code> (of type <code>string</code>, which defaults
to <code>"HTTP/1.1"</code>): HTTP protocol used.</li>
<li><code>code</code> (of type <code>int</code>, which defaults to
<code>200</code>): Response code.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Response headers.</li>
<li><code>content_type</code> (of type <code>string</code>, which
defaults to <code>""</code>): Content type for the data.</li>
<li><code>data_len</code> (of type <code>'a</code>): Response length in
bytes.</li>
<li><code>data</code> (of type <code>() -&gt; string</code>): Response
data.</li>
</ul>
<h3 id="icy.update_metadata"><a href="#icy.update_metadata"
class="anchor"><code>icy.update_metadata</code></a></h3>
<p>Update metata on an icecast mountpoint using the ICY protocol.</p>
<p>Type:</p>
<pre><code>(?host : string, ?port : int, ?user : string,
 ?password : string, ?mount : string, ?icy_id : int,
 ?protocol : string, ?encoding : string?,
 ?headers : [string * string], [string * string]) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>host</code> (of type <code>string</code>, which defaults to
<code>"localhost"</code>)</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>)</li>
<li><code>user</code> (of type <code>string</code>, which defaults to
<code>"source"</code>)</li>
<li><code>password</code> (of type <code>string</code>, which defaults
to <code>"hackme"</code>)</li>
<li><code>mount</code> (of type <code>string</code>, which defaults to
<code>""</code>): Source mount point. Mandatory when streaming to
icecast.</li>
<li><code>icy_id</code> (of type <code>int</code>, which defaults to
<code>1</code>): Shoutcast source ID. Only supported by Shoutcast
v2.</li>
<li><code>protocol</code> (of type <code>string</code>, which defaults
to <code>"http"</code>): Protocol to use. One of: “icy”, “http” or
“https”</li>
<li><code>encoding</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Encoding used to send metadata, default (UTF-8)
if null.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to
<code>[("User-Agent", "Liquidsoap/2.1.4 (Unix; OCaml 4.14.0)")]</code>):
Additional headers.</li>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="interactive.bool"><a href="#interactive.bool"
class="anchor"><code>interactive.bool</code></a></h3>
<p>Read a boolean from an interactive input.</p>
<p>Type:</p>
<pre><code>(?description : string, ?osc : string, string, bool) -&gt;
() -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>description</code> (of type <code>string</code>, which
defaults to <code>""</code>): Description of the variable.</li>
<li><code>osc</code> (of type <code>string</code>, which defaults to
<code>""</code>): OSC address.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
variable.</li>
<li><code>(unlabeled)</code> (of type <code>bool</code>): Initial
value.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>remove</code> (of type <code>() -&gt; unit</code>)</li>
<li><code>set</code> (of type <code>(bool) -&gt; unit</code>)</li>
</ul>
<h3 id="interactive.float"><a href="#interactive.float"
class="anchor"><code>interactive.float</code></a></h3>
<p>Read a float from an interactive input.</p>
<p>Type:</p>
<pre><code>(?min : float, ?max : float, ?step : float,
 ?description : string, ?unit : string, ?osc : string,
 string, float) -&gt; () -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>min</code> (of type <code>float</code>, which defaults to
<code>-inf</code>): Minimal value.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>inf</code>): Maximal value.</li>
<li><code>step</code> (of type <code>float</code>, which defaults to
<code>0.1</code>): Typical variation of the value.</li>
<li><code>description</code> (of type <code>string</code>, which
defaults to <code>""</code>): Description of the variable.</li>
<li><code>unit</code> (of type <code>string</code>, which defaults to
<code>""</code>): Unit for the variable.</li>
<li><code>osc</code> (of type <code>string</code>, which defaults to
<code>""</code>): OSC address.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
variable.</li>
<li><code>(unlabeled)</code> (of type <code>float</code>): Initial
value.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>remove</code> (of type <code>() -&gt; unit</code>)</li>
<li><code>set</code> (of type <code>(float) -&gt; unit</code>)</li>
</ul>
<h3 id="interactive.harbor"><a href="#interactive.harbor"
class="anchor"><code>interactive.harbor</code></a></h3>
<p>Expose interactive variables through habor http server.</p>
<p>Type:</p>
<pre><code>(?port : int, ?uri : string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port of the server.</li>
<li><code>uri</code> (of type <code>string</code>, which defaults to
<code>"/interactive"</code>): URI of the server.</li>
</ul>
<h3 id="interactive.int"><a href="#interactive.int"
class="anchor"><code>interactive.int</code></a></h3>
<p>Read an integer from an interactive input.</p>
<p>Type:</p>
<pre><code>(?description : string, ?osc : string, string, int) -&gt;
() -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>description</code> (of type <code>string</code>, which
defaults to <code>""</code>): Description of the variable.</li>
<li><code>osc</code> (of type <code>string</code>, which defaults to
<code>""</code>): OSC address.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
variable.</li>
<li><code>(unlabeled)</code> (of type <code>int</code>): Initial
value.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>remove</code> (of type <code>() -&gt; unit</code>)</li>
<li><code>set</code> (of type <code>(int) -&gt; unit</code>)</li>
</ul>
<h3 id="interactive.string"><a href="#interactive.string"
class="anchor"><code>interactive.string</code></a></h3>
<p>Read a string from an interactive input.</p>
<p>Type:</p>
<pre><code>(?description : string, ?osc : string, string, string) -&gt;
() -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>description</code> (of type <code>string</code>, which
defaults to <code>""</code>): Description of the variable.</li>
<li><code>osc</code> (of type <code>string</code>, which defaults to
<code>""</code>): OSC address.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
variable.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Initial
value.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>remove</code> (of type <code>() -&gt; unit</code>)</li>
<li><code>set</code> (of type <code>(string) -&gt; unit</code>)</li>
</ul>
<h3 id="metadata.getter"><a href="#metadata.getter"
class="anchor"><code>metadata.getter</code></a></h3>
<p>Create a getter from a metadata: this is a string, whose value can be
changed with a metadata.</p>
<p>Type:</p>
<pre><code>(string, &#39;a, &#39;c
 .{on_metadata : ((([&#39;a * string]) -&gt; unit)) -&gt; &#39;b}) -&gt;
() -&gt; string where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Initial
value.</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>): Metadata on which the
value should be updated.</li>
<li><code>(unlabeled)</code> (of type
<code>'c.{on_metadata : (((['a * string]) -&gt; unit)) -&gt; 'b} where 'a is an orderable type</code>):
Source containing the metadata.</li>
</ul>
<h3 id="metadata.getter.float"><a href="#metadata.getter.float"
class="anchor"><code>metadata.getter.float</code></a></h3>
<p>Create a float getter from a metadata: this is a float, whose value
can be changed with a metadata.</p>
<p>Type:</p>
<pre><code>(float, &#39;a, &#39;c
 .{on_metadata : ((([&#39;a * string]) -&gt; unit)) -&gt; &#39;b}) -&gt;
() -&gt; float where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>): Initial
value.</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>): Metadata on which the
value should be updated.</li>
<li><code>(unlabeled)</code> (of type
<code>'c.{on_metadata : (((['a * string]) -&gt; unit)) -&gt; 'b} where 'a is an orderable type</code>):
Source containing the metadata.</li>
</ul>
<h3 id="osc.bool"><a href="#osc.bool"
class="anchor"><code>osc.bool</code></a></h3>
<p>Read from an OSC path.</p>
<p>Type:</p>
<pre><code>(string, bool) -&gt; () -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>bool</code>): Initial
value.</li>
</ul>
<h3 id="osc.float"><a href="#osc.float"
class="anchor"><code>osc.float</code></a></h3>
<p>Read from an OSC path.</p>
<p>Type:</p>
<pre><code>(string, float) -&gt; () -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>float</code>): Initial
value.</li>
</ul>
<h3 id="osc.float_pair"><a href="#osc.float_pair"
class="anchor"><code>osc.float_pair</code></a></h3>
<p>Read from an OSC path.</p>
<p>Type:</p>
<pre><code>(string, (float * float)) -&gt; () -&gt; float * float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>float * float</code>):
Initial value.</li>
</ul>
<h3 id="osc.int"><a href="#osc.int"
class="anchor"><code>osc.int</code></a></h3>
<p>Read from an OSC path.</p>
<p>Type:</p>
<pre><code>(string, int) -&gt; () -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>int</code>): Initial
value.</li>
</ul>
<h3 id="osc.int_pair"><a href="#osc.int_pair"
class="anchor"><code>osc.int_pair</code></a></h3>
<p>Read from an OSC path.</p>
<p>Type:</p>
<pre><code>(string, (int * int)) -&gt; () -&gt; int * int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>int * int</code>): Initial
value.</li>
</ul>
<h3 id="osc.on_bool"><a href="#osc.on_bool"
class="anchor"><code>osc.on_bool</code></a></h3>
<p>Register a callback on OSC messages.</p>
<p>Type:</p>
<pre><code>(string, ((bool) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>(bool) -&gt; unit</code>):
Callback function.</li>
</ul>
<h3 id="osc.on_float"><a href="#osc.on_float"
class="anchor"><code>osc.on_float</code></a></h3>
<p>Register a callback on OSC messages.</p>
<p>Type:</p>
<pre><code>(string, ((float) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>(float) -&gt; unit</code>):
Callback function.</li>
</ul>
<h3 id="osc.on_float_pair"><a href="#osc.on_float_pair"
class="anchor"><code>osc.on_float_pair</code></a></h3>
<p>Register a callback on OSC messages.</p>
<p>Type:</p>
<pre><code>(string, (((float * float)) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type
<code>((float * float)) -&gt; unit</code>): Callback function.</li>
</ul>
<h3 id="osc.on_int"><a href="#osc.on_int"
class="anchor"><code>osc.on_int</code></a></h3>
<p>Register a callback on OSC messages.</p>
<p>Type:</p>
<pre><code>(string, ((int) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>(int) -&gt; unit</code>):
Callback function.</li>
</ul>
<h3 id="osc.on_int_pair"><a href="#osc.on_int_pair"
class="anchor"><code>osc.on_int_pair</code></a></h3>
<p>Register a callback on OSC messages.</p>
<p>Type:</p>
<pre><code>(string, (((int * int)) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type
<code>((int * int)) -&gt; unit</code>): Callback function.</li>
</ul>
<h3 id="osc.on_string"><a href="#osc.on_string"
class="anchor"><code>osc.on_string</code></a></h3>
<p>Register a callback on OSC messages.</p>
<p>Type:</p>
<pre><code>(string, ((string) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>(string) -&gt; unit</code>):
Callback function.</li>
</ul>
<h3 id="osc.on_string_pair"><a href="#osc.on_string_pair"
class="anchor"><code>osc.on_string_pair</code></a></h3>
<p>Register a callback on OSC messages.</p>
<p>Type:</p>
<pre><code>(string, (((string * string)) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type
<code>((string * string)) -&gt; unit</code>): Callback function.</li>
</ul>
<h3 id="osc.send_bool"><a href="#osc.send_bool"
class="anchor"><code>osc.send_bool</code></a></h3>
<p>Send a value to an OSC client.</p>
<p>Type:</p>
<pre><code>(host : string, port : int, string, bool) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>host</code> (of type <code>string</code>): OSC client
address.</li>
<li><code>port</code> (of type <code>int</code>): OSC client port.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>bool</code>): Value to
send.</li>
</ul>
<h3 id="osc.send_float"><a href="#osc.send_float"
class="anchor"><code>osc.send_float</code></a></h3>
<p>Send a value to an OSC client.</p>
<p>Type:</p>
<pre><code>(host : string, port : int, string, float) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>host</code> (of type <code>string</code>): OSC client
address.</li>
<li><code>port</code> (of type <code>int</code>): OSC client port.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>float</code>): Value to
send.</li>
</ul>
<h3 id="osc.send_float_pair"><a href="#osc.send_float_pair"
class="anchor"><code>osc.send_float_pair</code></a></h3>
<p>Send a value to an OSC client.</p>
<p>Type:</p>
<pre><code>(host : string, port : int, string, (float * float)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>host</code> (of type <code>string</code>): OSC client
address.</li>
<li><code>port</code> (of type <code>int</code>): OSC client port.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>float * float</code>): Value
to send.</li>
</ul>
<h3 id="osc.send_int"><a href="#osc.send_int"
class="anchor"><code>osc.send_int</code></a></h3>
<p>Send a value to an OSC client.</p>
<p>Type:</p>
<pre><code>(host : string, port : int, string, int) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>host</code> (of type <code>string</code>): OSC client
address.</li>
<li><code>port</code> (of type <code>int</code>): OSC client port.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>int</code>): Value to
send.</li>
</ul>
<h3 id="osc.send_int_pair"><a href="#osc.send_int_pair"
class="anchor"><code>osc.send_int_pair</code></a></h3>
<p>Send a value to an OSC client.</p>
<p>Type:</p>
<pre><code>(host : string, port : int, string, (int * int)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>host</code> (of type <code>string</code>): OSC client
address.</li>
<li><code>port</code> (of type <code>int</code>): OSC client port.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>int * int</code>): Value to
send.</li>
</ul>
<h3 id="osc.send_string"><a href="#osc.send_string"
class="anchor"><code>osc.send_string</code></a></h3>
<p>Send a value to an OSC client.</p>
<p>Type:</p>
<pre><code>(host : string, port : int, string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>host</code> (of type <code>string</code>): OSC client
address.</li>
<li><code>port</code> (of type <code>int</code>): OSC client port.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Value to
send.</li>
</ul>
<h3 id="osc.send_string_pair"><a href="#osc.send_string_pair"
class="anchor"><code>osc.send_string_pair</code></a></h3>
<p>Send a value to an OSC client.</p>
<p>Type:</p>
<pre><code>(host : string, port : int, string, (string * string)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>host</code> (of type <code>string</code>): OSC client
address.</li>
<li><code>port</code> (of type <code>int</code>): OSC client port.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>string * string</code>):
Value to send.</li>
</ul>
<h3 id="osc.string"><a href="#osc.string"
class="anchor"><code>osc.string</code></a></h3>
<p>Read from an OSC path.</p>
<p>Type:</p>
<pre><code>(string, string) -&gt; () -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Initial
value.</li>
</ul>
<h3 id="osc.string_pair"><a href="#osc.string_pair"
class="anchor"><code>osc.string_pair</code></a></h3>
<p>Read from an OSC path.</p>
<p>Type:</p>
<pre><code>(string, (string * string)) -&gt; () -&gt; string * string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): OSC
path.</li>
<li><code>(unlabeled)</code> (of type <code>string * string</code>):
Initial value.</li>
</ul>
<h3 id="print"><a href="#print"
class="anchor"><code>print</code></a></h3>
<p>Print on standard output.</p>
<p>Type:</p>
<pre><code>(?newline : bool, &#39;a) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>newline</code> (of type <code>bool</code>, which defaults to
<code>true</code>): If true, a newline is added after displaying the
value.</li>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
</ul>
<h3 id="prometheus.counter"><a href="#prometheus.counter"
class="anchor"><code>prometheus.counter</code></a></h3>
<p>Register a prometheus counter</p>
<p>Type:</p>
<pre><code>(help : string, ?namespace : string, ?subsystem : string,
 labels : [string], string) -&gt;
(label_values : [string]) -&gt; (float) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>help</code> (of type <code>string</code>): Help of the
metric</li>
<li><code>namespace</code> (of type <code>string</code>, which defaults
to <code>""</code>): namespace of the metric</li>
<li><code>subsystem</code> (of type <code>string</code>, which defaults
to <code>""</code>): subsystem of the metric</li>
<li><code>labels</code> (of type <code>[string]</code>): labels for the
metric</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
metric</li>
</ul>
<h3 id="prometheus.gauge"><a href="#prometheus.gauge"
class="anchor"><code>prometheus.gauge</code></a></h3>
<p>Register a prometheus gauge</p>
<p>Type:</p>
<pre><code>(help : string, ?namespace : string, ?subsystem : string,
 labels : [string], string) -&gt;
(label_values : [string]) -&gt; (float) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>help</code> (of type <code>string</code>): Help of the
metric</li>
<li><code>namespace</code> (of type <code>string</code>, which defaults
to <code>""</code>): namespace of the metric</li>
<li><code>subsystem</code> (of type <code>string</code>, which defaults
to <code>""</code>): subsystem of the metric</li>
<li><code>labels</code> (of type <code>[string]</code>): labels for the
metric</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
metric</li>
</ul>
<h3 id="prometheus.summary"><a href="#prometheus.summary"
class="anchor"><code>prometheus.summary</code></a></h3>
<p>Register a prometheus summary</p>
<p>Type:</p>
<pre><code>(help : string, ?namespace : string, ?subsystem : string,
 labels : [string], string) -&gt;
(label_values : [string]) -&gt; (float) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>help</code> (of type <code>string</code>): Help of the
metric</li>
<li><code>namespace</code> (of type <code>string</code>, which defaults
to <code>""</code>): namespace of the metric</li>
<li><code>subsystem</code> (of type <code>string</code>, which defaults
to <code>""</code>): subsystem of the metric</li>
<li><code>labels</code> (of type <code>[string]</code>): labels for the
metric</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
metric</li>
</ul>
<h3 id="server.broadcast"><a href="#server.broadcast"
class="anchor"><code>server.broadcast</code></a></h3>
<p>Restart all server clients waiting on the given condition.</p>
<p>Type:</p>
<pre><code>((&#39;a * (&#39;b * (() -&gt; &#39;c)))) -&gt; &#39;c</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>'a * ('b * (() -&gt; 'c))</code>): condition</li>
</ul>
<h3 id="server.register"><a href="#server.register"
class="anchor"><code>server.register</code></a></h3>
<p>Register a command. You can then execute this function through the
server, either telnet or socket.</p>
<p>Type:</p>
<pre><code>(?namespace : string?, ?description : string,
 ?usage : string?, string, ((string) -&gt; string)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>namespace</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Used to group multiple commands for the same
functionality. If specified, the command will be named
<code>namespace.command</code>.</li>
<li><code>description</code> (of type <code>string</code>, which
defaults to <code>"No documentation available."</code>): A description
of your command.</li>
<li><code>usage</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Description of how the command should be used.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
command.</li>
<li><code>(unlabeled)</code> (of type
<code>(string) -&gt; string</code>): Function called when the command is
executed. It takes as argument the argument passed on the commandline
and returns the message which will be printed on the commandline.</li>
</ul>
<h3 id="server.signal"><a href="#server.signal"
class="anchor"><code>server.signal</code></a></h3>
<p>Restart one server client waiting on the given condition.</p>
<p>Type:</p>
<pre><code>((&#39;a * ((() -&gt; &#39;b) * &#39;c))) -&gt; &#39;b</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>'a * ((() -&gt; 'b) * 'c)</code>): condition</li>
</ul>
<h3 id="server.telnet"><a href="#server.telnet"
class="anchor"><code>server.telnet</code></a></h3>
<p>Enable telnet server.</p>
<p>Type:</p>
<pre><code>(?port : int) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>1234</code>): Port on which we should listen.</li>
</ul>
<h2 id="interactive"><a href="#interactive"
class="anchor">Interactive</a></h2>
<h3 id="interactive.load"><a href="#interactive.load"
class="anchor"><code>interactive.load</code></a></h3>
<p>Load the value of interactive variables from a file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
file.</li>
</ul>
<h3 id="interactive.persistent"><a href="#interactive.persistent"
class="anchor"><code>interactive.persistent</code></a></h3>
<p>Make the value of interactive variables persistent: they are loaded
from the given file and stored there whenever updated. This function
should be called after all interactive variables have been defined
(variables not declared yet will not be loaded).</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
file.</li>
</ul>
<h3 id="interactive.save"><a href="#interactive.save"
class="anchor"><code>interactive.save</code></a></h3>
<p>Save the value of all interactive variables in a file.</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
file.</li>
</ul>
<h2 id="liquidsoap"><a href="#liquidsoap"
class="anchor">Liquidsoap</a></h2>
<h3 id="add_decoder"><a href="#add_decoder"
class="anchor"><code>add_decoder</code></a></h3>
<p>Register an external decoder. The encoder should output in WAV format
to his standard output (stdout) and read data from its standard input
(stdin).</p>
<p>Type:</p>
<pre><code>(name : string, description : string, ?mimes : [string],
 ?file_extensions : [string], ?priority : int,
 test : ((string) -&gt; int), string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>name</code> (of type <code>string</code>): Format/decoder’s
name.</li>
<li><code>description</code> (of type <code>string</code>): Description
of the decoder.</li>
<li><code>mimes</code> (of type <code>[string]</code>, which defaults to
<code>[]</code>): List of mime types supported by this decoder. Empty
means any mime type should be accepted.</li>
<li><code>file_extensions</code> (of type <code>[string]</code>, which
defaults to <code>[]</code>): List of file extensions. Empty means any
file extension should be accepted.</li>
<li><code>priority</code> (of type <code>int</code>, which defaults to
<code>1</code>): Decoder priority</li>
<li><code>test</code> (of type <code>(string) -&gt; int</code>):
Function used to determine if a file should be decoded by the decoder.
Returned values are: 0: no decodable audio, -1: decodable audio but
number of audio channels unknown, x: fixed number of decodable audio
channels.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Process to
start.</li>
</ul>
<h3 id="add_metadata_resolver"><a href="#add_metadata_resolver"
class="anchor"><code>add_metadata_resolver</code></a></h3>
<p>Register an external file metadata decoder.</p>
<p>Type:</p>
<pre><code>(string, ((string) -&gt; [string * string])) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>):
Format/resolver’s name.</li>
<li><code>(unlabeled)</code> (of type
<code>(string) -&gt; [string * string]</code>): Process to start. The
function takes the format and filename as argument and returns a list of
(name,value) fields.</li>
</ul>
<h3 id="add_oblivious_decoder"><a href="#add_oblivious_decoder"
class="anchor"><code>add_oblivious_decoder</code></a></h3>
<p>Register an external file decoder. The encoder should output in WAV
format to his standard output (stdout) and read data from the file it
receives. The estimated remaining duration for this decoder will be
unknown until the <code>buffer</code> last seconds of the file. If
possible, it is recommended to decode from stdin and use
<code>add_decoder</code>.</p>
<p>Type:</p>
<pre><code>(name : string, description : string,
 test : ((string) -&gt; int), ?priority : int,
 ?mimes : [string], ?file_extensions : [string],
 ?buffer : float, ((string) -&gt; string)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>name</code> (of type <code>string</code>): Format/decoder’s
name.</li>
<li><code>description</code> (of type <code>string</code>): Description
of the decoder.</li>
<li><code>test</code> (of type <code>(string) -&gt; int</code>):
Function used to determine if a file should be decoded by the decoder.
Returned values are: 0: no decodable audio, -1: decodable audio but
number of audio channels unknown, x: fixed number of decodable audio
channels.</li>
<li><code>priority</code> (of type <code>int</code>, which defaults to
<code>1</code>): Decoder priority</li>
<li><code>mimes</code> (of type <code>[string]</code>, which defaults to
<code>[]</code>): List of mime types supported by this decoder. Empty
means any mime type should be accepted.</li>
<li><code>file_extensions</code> (of type <code>[string]</code>, which
defaults to <code>[]</code>): List of file extensions. Empty means any
file extension should be accepted.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>5.</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>(string) -&gt; string</code>): Process to start. The function
takes the filename as argument and returns the process to start.</li>
</ul>
<h3 id="add_protocol"><a href="#add_protocol"
class="anchor"><code>add_protocol</code></a></h3>
<p>Register a new protocol.</p>
<p>Type:</p>
<pre><code>(?temporary : bool, ?static : bool, ?syntax : string,
 ?doc : string, string,
 ((rlog : ((string) -&gt; unit), maxtime : float, string) -&gt;
  [string])) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>temporary</code> (of type <code>bool</code>, which defaults to
<code>false</code>): if true, file is removed when it is finished.</li>
<li><code>static</code> (of type <code>bool</code>, which defaults to
<code>false</code>): if true, then requests can be resolved once and for
all. Typically, static protocols can be used to create infallible
sources.</li>
<li><code>syntax</code> (of type <code>string</code>, which defaults to
<code>"Undocumented"</code>): URI syntax.</li>
<li><code>doc</code> (of type <code>string</code>, which defaults to
<code>"Undocumented"</code>): Protocol documentation.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Protocol
name. Resolver will be called on uris of the form:
<code>&lt;protocol name&gt;:...</code>.</li>
<li><code>(unlabeled)</code> (of type
<code>(rlog : ((string) -&gt; unit), maxtime : float, string) -&gt; [string]</code>):
Protocol resolver. Receives a function to log protocol resolution, the
<code>&lt;arg&gt;</code> in
<code>&lt;protocol name&gt;:&lt;arg&gt;</code> and the max delay that
resolution should take.</li>
</ul>
<h3 id="assert"><a href="#assert"
class="anchor"><code>assert</code></a></h3>
<p>Ensure that a condition is satisfied (raise
<code>error.assertion</code> exception otherwise).</p>
<p>Type:</p>
<pre><code>(bool) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>bool</code>): Condition
which should be satisfied.</li>
</ul>
<h3 id="audio.channels"><a href="#audio.channels"
class="anchor"><code>audio.channels</code></a></h3>
<p>Channels for audio.</p>
<p>Type:</p>
<pre><code>() -&gt; int</code></pre>
<p>Arguments:</p>
<h3 id="audio.samplerate"><a href="#audio.samplerate"
class="anchor"><code>audio.samplerate</code></a></h3>
<p>Samplerate for audio.</p>
<p>Type:</p>
<pre><code>() -&gt; int</code></pre>
<p>Arguments:</p>
<h3 id="clock"><a href="#clock"
class="anchor"><code>clock</code></a></h3>
<p>Assign a new clock to the given source (and to other time-dependent
sources) and return the source. It is a conveniency wrapper around
clock.assign_new(), allowing more concise scripts in some cases.</p>
<p>Type:</p>
<pre><code>(?sync : string, ?id : string?, source(&#39;a)) -&gt; source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>sync</code> (of type <code>string</code>, which defaults to
<code>"auto"</code>): Synchronization mode. One of: <code>"auto"</code>,
<code>"cpu"</code>, or <code>"none"</code>. Defaults to
<code>"auto"</code>, which synchronizes with the CPU clock if none of
the active sources are attached to their own clock (e.g. ALSA input,
etc). <code>"cpu"</code> always synchronizes with the CPU clock.
<code>"none"</code> removes all synchronization control.</li>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="clock.assign_new"><a href="#clock.assign_new"
class="anchor"><code>clock.assign_new</code></a></h3>
<p>Create a new clock and assign it to a list of sources.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?sync : string, [source(&#39;a)]) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Identifier for the new clock. The default empty
string means that the identifier of the first source will be used.</li>
<li><code>sync</code> (of type <code>string</code>, which defaults to
<code>"auto"</code>): Synchronization mode. One of: <code>"auto"</code>,
<code>"cpu"</code>, or <code>"none"</code>. Defaults to
<code>"auto"</code>, which synchronizes with the CPU clock if none of
the active sources are attached to their own clock (e.g. ALSA input,
etc). <code>"cpu"</code> always synchronizes with the CPU clock.
<code>"none"</code> removes all synchronization control.</li>
<li><code>(unlabeled)</code> (of type <code>[source('a)]</code>): List
of sources to which the new clock will be assigned.</li>
</ul>
<h3 id="clock.log"><a href="#clock.log"
class="anchor"><code>clock.log</code></a></h3>
<p>Create a log of clock times for all the clocks initially present. The
log is in a simple format which you can directly use with gnuplot.</p>
<p>Type:</p>
<pre><code>(?delay : float, ?every : float, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>delay</code> (of type <code>float</code>, which defaults to
<code>0.</code>): Delay before setting up the clock logger. This should
be used to ensure that the logger starts only after the clocks are
created.</li>
<li><code>every</code> (of type <code>float</code>, which defaults to
<code>1.</code>): Polling interval.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Path of the
log file.</li>
</ul>
<h3 id="clock.status"><a href="#clock.status"
class="anchor"><code>clock.status</code></a></h3>
<p>Get the current time (in ticks) for all allocated clocks.</p>
<p>Type:</p>
<pre><code>() -&gt; [string * int]</code></pre>
<p>Arguments:</p>
<h3 id="clock.status.seconds"><a href="#clock.status.seconds"
class="anchor"><code>clock.status.seconds</code></a></h3>
<p>Get the current time in seconds for all allocated clocks.</p>
<p>Type:</p>
<pre><code>() -&gt; [string * float]</code></pre>
<p>Arguments:</p>
<h3 id="clock.unify"><a href="#clock.unify"
class="anchor"><code>clock.unify</code></a></h3>
<p>Enforce that a list of sources all belong to the same clock.</p>
<p>Type:</p>
<pre><code>([source(&#39;a)]) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>[source('a)]</code>)</li>
</ul>
<h3 id="configure.bindir"><a href="#configure.bindir"
class="anchor"><code>configure.bindir</code></a></h3>
<p>Liquidsoap’s Internal script directory.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="configure.camomile_dir"><a href="#configure.camomile_dir"
class="anchor"><code>configure.camomile_dir</code></a></h3>
<p>Liquidsoap’s camomile files directory.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="configure.default_font"><a href="#configure.default_font"
class="anchor"><code>configure.default_font</code></a></h3>
<p>Liquidsoap’s default font file.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="configure.libdir"><a href="#configure.libdir"
class="anchor"><code>configure.libdir</code></a></h3>
<p>Liquidsoap’s library directory.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="configure.logdir"><a href="#configure.logdir"
class="anchor"><code>configure.logdir</code></a></h3>
<p>Liquidsoap’s logging directory.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="configure.rundir"><a href="#configure.rundir"
class="anchor"><code>configure.rundir</code></a></h3>
<p>Liquidsoap’s PID file directory.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="enable_external_faad_decoder"><a
href="#enable_external_faad_decoder"
class="anchor"><code>enable_external_faad_decoder</code></a></h3>
<p>Enable or disable external FAAD (AAC/AAC+/M4A) decoders. Does not
work on Win32. Please note that built-in support for faad is available
in liquidsoap if compiled and should be preferred over the external
decoder.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<h3 id="enable_external_ffmpeg_decoder"><a
href="#enable_external_ffmpeg_decoder"
class="anchor"><code>enable_external_ffmpeg_decoder</code></a></h3>
<p>Enable ffmpeg decoder.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<h3 id="enable_external_flac_decoder"><a
href="#enable_external_flac_decoder"
class="anchor"><code>enable_external_flac_decoder</code></a></h3>
<p>Enable external FLAC decoders. Please note that built-in support for
FLAC is available in liquidsoap if compiled and should be preferred over
the external decoder.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<h3 id="enable_external_mpc_decoder"><a
href="#enable_external_mpc_decoder"
class="anchor"><code>enable_external_mpc_decoder</code></a></h3>
<p>Enable external Musepack decoder.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<h3 id="enable_replaygain_metadata"><a
href="#enable_replaygain_metadata"
class="anchor"><code>enable_replaygain_metadata</code></a></h3>
<p>Enable ReplayGain metadata resolver. This resolver will process any
file decoded by Liquidsoap and add a <code>replaygain_track_gain</code>
metadata when this value could be computed. For a finer-grained replay
gain processing, use the <code>replaygain:</code> protocol.</p>
<p>Type:</p>
<pre><code>(?delay : float, ?extract_replaygain : string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>delay</code> (of type <code>float</code>, which defaults to
<code>-1.</code>): Maximum delay for extracting metadata.</li>
<li><code>extract_replaygain</code> (of type <code>string</code>, which
defaults to
<code>"/usr/share/liquidsoap/2.1.4/bin/extract-replaygain"</code>): The
extraction program.</li>
</ul>
<h3 id="encoder.content_type"><a href="#encoder.content_type"
class="anchor"><code>encoder.content_type</code></a></h3>
<p>Return the content-type (mime) of an encoder, if known.</p>
<p>Type:</p>
<pre><code>(format(&#39;a)) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>format('a)</code>)</li>
</ul>
<h3 id="encoder.extension"><a href="#encoder.extension"
class="anchor"><code>encoder.extension</code></a></h3>
<p>Return the file extension of an encoder, if known.</p>
<p>Type:</p>
<pre><code>(format(&#39;a)) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>format('a)</code>)</li>
</ul>
<h3 id="error.on_error"><a href="#error.on_error"
class="anchor"><code>error.on_error</code></a></h3>
<p>Register a callback to monitor errors raised during the execution of
the program. The callback is allow to re-raise a different error if
needed.</p>
<p>Type:</p>
<pre><code>(((error
   .{
     kind : string,
     message : string,
     positions : [string]
   }) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>(error  .{kind : string, message : string, positions : [string]  }) -&gt; unit</code>)</li>
</ul>
<h3 id="error.raise"><a href="#error.raise"
class="anchor"><code>error.raise</code></a></h3>
<p>Raise an error.</p>
<p>Type:</p>
<pre><code>(error
 .{kind : string, message : string, positions : [string]
 }, ?string) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>error .{kind : string, message : string, positions : [string]}</code>):
Error kind.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>, which
defaults to <code>""</code>): Description of the error.</li>
</ul>
<h3 id="error.register"><a href="#error.register"
class="anchor"><code>error.register</code></a></h3>
<p>Register an error of the given kind</p>
<p>Type:</p>
<pre><code>(string) -&gt; error</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Kind of the
error</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>kind</code> (of type <code>string</code>): Error kind.</li>
<li><code>message</code> (of type <code>string</code>): Error
message.</li>
<li><code>positions</code> (of type <code>[string]</code>): Error
positions.</li>
</ul>
<h3 id="failwith"><a href="#failwith"
class="anchor"><code>failwith</code></a></h3>
<p>Major failure.</p>
<p>Type:</p>
<pre><code>(string) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Explanation
about the failure.</li>
</ul>
<h3 id="frame.duration"><a href="#frame.duration"
class="anchor"><code>frame.duration</code></a></h3>
<p>Duration of a frame.</p>
<p>Type:</p>
<pre><code>() -&gt; float</code></pre>
<p>Arguments:</p>
<h3 id="fst"><a href="#fst" class="anchor"><code>fst</code></a></h3>
<p>Get the first component of a pair.</p>
<p>Type:</p>
<pre><code>((&#39;a * &#39;b)) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a * 'b</code>)</li>
</ul>
<h3 id="getter"><a href="#getter"
class="anchor"><code>getter</code></a></h3>
<p>Create a getter.</p>
<p>Type:</p>
<pre><code>({&#39;a}) -&gt; {&#39;a}</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{'a}</code>): Value from
which the getter should be created.</li>
</ul>
<h3 id="getter.case"><a href="#getter.case"
class="anchor"><code>getter.case</code></a></h3>
<p>Return a value depending on whether the getter is constant or
not.</p>
<p>Type:</p>
<pre><code>({&#39;a}, ((&#39;a) -&gt; &#39;b), (((() -&gt; &#39;a)) -&gt; &#39;b)) -&gt; &#39;b</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{'a}</code>): Getter to
inspect.</li>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; 'b</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>((() -&gt; 'a)) -&gt; 'b</code>)</li>
</ul>
<h3 id="getter.changes"><a href="#getter.changes"
class="anchor"><code>getter.changes</code></a></h3>
<p>Detect whether the value of the getter changes.</p>
<p>Type:</p>
<pre><code>({&#39;a}) -&gt; () -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>{'a} where 'a is an orderable type</code>)</li>
</ul>
<h3 id="getter.float_of_int"><a href="#getter.float_of_int"
class="anchor"><code>getter.float_of_int</code></a></h3>
<p>Convert an int getter to a float getter.</p>
<p>Type:</p>
<pre><code>({int}) -&gt; {float}</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{int}</code>)</li>
</ul>
<h3 id="getter.function"><a href="#getter.function"
class="anchor"><code>getter.function</code></a></h3>
<p>Construct a function returning the value of a getter.</p>
<p>Type:</p>
<pre><code>({&#39;a}) -&gt; () -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{'a}</code>)</li>
</ul>
<h3 id="getter.get"><a href="#getter.get"
class="anchor"><code>getter.get</code></a></h3>
<p>Get the value of a getter.</p>
<p>Type:</p>
<pre><code>({&#39;a}) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{'a}</code>)</li>
</ul>
<h3 id="getter.int_of_float"><a href="#getter.int_of_float"
class="anchor"><code>getter.int_of_float</code></a></h3>
<p>Convert a float getter to a int getter.</p>
<p>Type:</p>
<pre><code>({float}) -&gt; {int}</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{float}</code>)</li>
</ul>
<h3 id="getter.is_constant"><a href="#getter.is_constant"
class="anchor"><code>getter.is_constant</code></a></h3>
<p>Determine if a getter is a constant.</p>
<p>Type:</p>
<pre><code>({&#39;a}) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{'a}</code>)</li>
</ul>
<h3 id="getter.map"><a href="#getter.map"
class="anchor"><code>getter.map</code></a></h3>
<p>Apply a function on a getter.</p>
<p>Type:</p>
<pre><code>(((&#39;a) -&gt; &#39;b), {&#39;a}) -&gt; {&#39;b}</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; 'b</code>):
Function to apply.</li>
<li><code>(unlabeled)</code> (of type <code>{'a}</code>)</li>
</ul>
<h3 id="getter.map.memoize"><a href="#getter.map.memoize"
class="anchor"><code>getter.map.memoize</code></a></h3>
<p>Apply a function on a getter. If the input value has not changed
compared to last call, the previous result is returned without computing
the function again.</p>
<p>Type:</p>
<pre><code>(((&#39;a) -&gt; &#39;b), {&#39;a}) -&gt; {&#39;b}
where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>('a) -&gt; 'b where 'a is an orderable type</code>): Function to
apply.</li>
<li><code>(unlabeled)</code> (of type
<code>{'a} where 'a is an orderable type</code>)</li>
</ul>
<h3 id="getter.merge"><a href="#getter.merge"
class="anchor"><code>getter.merge</code></a></h3>
<p>Give the latest value among two getters.</p>
<p>Type:</p>
<pre><code>({&#39;a}, {&#39;a}) -&gt; () -&gt; &#39;a where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>{'a} where 'a is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>{'a} where 'a is an orderable type</code>)</li>
</ul>
<h3 id="getter.on_change"><a href="#getter.on_change"
class="anchor"><code>getter.on_change</code></a></h3>
<p>Execute a function when the value of the getter changes.</p>
<p>Type:</p>
<pre><code>(((&#39;a) -&gt; unit), {&#39;a}) -&gt; () -&gt; &#39;a
where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>('a) -&gt; unit where 'a is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>{'a} where 'a is an orderable type</code>)</li>
</ul>
<h3 id="harbor.http.register"><a href="#harbor.http.register"
class="anchor"><code>harbor.http.register</code></a></h3>
<p>Register a HTTP handler on the harbor. The given function receives as
argument the full requested uri (e.g. “foo?var=bar”), http protocol
version, possible input data and the list of HTTP headers and returns
the answer sent to the client, including HTTP headers. Registered uri
can be regular expressions (e.g. “.+.php”) and can override default
metadata handlers. Response is a string getter, i.e. either of type
<code>string</code> or type <code>()-&gt;string</code>. In the later
case, getter function will be called until it returns an empty
string.</p>
<p>Type:</p>
<pre><code>(?port : int, ?method : string, string,
 ((protocol : string, data : string,
   headers : [string * string], string) -&gt; {string})) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port to server.</li>
<li><code>method</code> (of type <code>string</code>, which defaults to
<code>"GET"</code>): Accepted method (“GET” / “POST” / “PUT” / “DELETE”
/ “HEAD” / “OPTIONS”).</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): URI to
serve.</li>
<li><code>(unlabeled)</code> (of type
<code>(protocol : string, data : string,  headers : [string * string], string) -&gt; {string}</code>):
Function to execute. Method argument is “PUT” or “GET”, protocol
argument is “HTTP/1.1” or “HTTP/1.0” etc., data argument contains data
passed in case of a PUT request, and “” otherwise. Headers argument
contains the HTTP headers. Unlabeled argument contains the requested
URI.</li>
</ul>
<h3 id="harbor.http.remove"><a href="#harbor.http.remove"
class="anchor"><code>harbor.http.remove</code></a></h3>
<p>Remove a registered HTTP handler on the harbor.</p>
<p>Type:</p>
<pre><code>(?port : int, ?method : string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port to server.</li>
<li><code>method</code> (of type <code>string</code>, which defaults to
<code>"GET"</code>): Method served.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): URI
served.</li>
</ul>
<h3 id="harbor.https.register"><a href="#harbor.https.register"
class="anchor"><code>harbor.https.register</code></a></h3>
<p>Register a HTTPS handler on the harbor. The given function receives
as argument the full requested uri (e.g. “foo?var=bar”), http protocol
version, possible input data and the list of HTTP headers and returns
the answer sent to the client, including HTTP headers. Registered uri
can be regular expressions (e.g. “.+.php”) and can override default
metadata handlers. Response is a string getter, i.e. either of type
<code>string</code> or type <code>()-&gt;string</code>. In the later
case, getter function will be called until it returns an empty
string.</p>
<p>Type:</p>
<pre><code>(?port : int, ?method : string, string,
 ((protocol : string, data : string,
   headers : [string * string], string) -&gt; {string})) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port to server.</li>
<li><code>method</code> (of type <code>string</code>, which defaults to
<code>"GET"</code>): Accepted method (“GET” / “POST” / “PUT” / “DELETE”
/ “HEAD” / “OPTIONS”).</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): URI to
serve.</li>
<li><code>(unlabeled)</code> (of type
<code>(protocol : string, data : string,  headers : [string * string], string) -&gt; {string}</code>):
Function to execute. Method argument is “PUT” or “GET”, protocol
argument is “HTTP/1.1” or “HTTP/1.0” etc., data argument contains data
passed in case of a PUT request, and “” otherwise. Headers argument
contains the HTTP headers. Unlabeled argument contains the requested
URI.</li>
</ul>
<h3 id="harbor.https.remove"><a href="#harbor.https.remove"
class="anchor"><code>harbor.https.remove</code></a></h3>
<p>Remove a registered HTTPS handler on the harbor.</p>
<p>Type:</p>
<pre><code>(?port : int, ?method : string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port to server.</li>
<li><code>method</code> (of type <code>string</code>, which defaults to
<code>"GET"</code>): Method served.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): URI
served.</li>
</ul>
<h3 id="liquidsoap.chroot.make"><a href="#liquidsoap.chroot.make"
class="anchor"><code>liquidsoap.chroot.make</code></a></h3>
<p>Export all the files required to install liquidsoap in a root folder.
Usefull for packaging and docker images</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="liquidsoap.executable"><a href="#liquidsoap.executable"
class="anchor"><code>liquidsoap.executable</code></a></h3>
<p>Path to the Liquidsoap executable.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="liquidsoap.version"><a href="#liquidsoap.version"
class="anchor"><code>liquidsoap.version</code></a></h3>
<p>Liquidsoap version string.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="liquidsoap.version.at_least"><a
href="#liquidsoap.version.at_least"
class="anchor"><code>liquidsoap.version.at_least</code></a></h3>
<p>Ensure that Liquidsoap version is greater or equal to given one.</p>
<p>Type:</p>
<pre><code>(string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Minimal
version.</li>
</ul>
<h3 id="log"><a href="#log" class="anchor"><code>log</code></a></h3>
<p>Log a message.</p>
<p>Type:</p>
<pre><code>(?label : string, ?level : int, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>label</code> (of type <code>string</code>, which defaults to
<code>"lang"</code>)</li>
<li><code>level</code> (of type <code>int</code>, which defaults to
<code>3</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="log.critical"><a href="#log.critical"
class="anchor"><code>log.critical</code></a></h3>
<p>Log a critical message</p>
<p>Type:</p>
<pre><code>(?label : string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>label</code> (of type <code>string</code>, which defaults to
<code>"lang"</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="log.debug"><a href="#log.debug"
class="anchor"><code>log.debug</code></a></h3>
<p>Log a debug message</p>
<p>Type:</p>
<pre><code>(?label : string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>label</code> (of type <code>string</code>, which defaults to
<code>"lang"</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="log.file"><a href="#log.file"
class="anchor"><code>log.file</code></a></h3>
<p>Get and set the file logging</p>
<p>Type:</p>
<pre><code>() -&gt; bool</code></pre>
<p>Arguments:</p>
<h3 id="log.important"><a href="#log.important"
class="anchor"><code>log.important</code></a></h3>
<p>Log an important message</p>
<p>Type:</p>
<pre><code>(?label : string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>label</code> (of type <code>string</code>, which defaults to
<code>"lang"</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="log.info"><a href="#log.info"
class="anchor"><code>log.info</code></a></h3>
<p>Log a normal message</p>
<p>Type:</p>
<pre><code>(?label : string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>label</code> (of type <code>string</code>, which defaults to
<code>"lang"</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="log.level"><a href="#log.level"
class="anchor"><code>log.level</code></a></h3>
<p>Get and set the log level.</p>
<p>Type:</p>
<pre><code>() -&gt; int</code></pre>
<p>Arguments:</p>
<h3 id="log.severe"><a href="#log.severe"
class="anchor"><code>log.severe</code></a></h3>
<p>Log a severe message</p>
<p>Type:</p>
<pre><code>(?label : string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>label</code> (of type <code>string</code>, which defaults to
<code>"lang"</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="log.stdout"><a href="#log.stdout"
class="anchor"><code>log.stdout</code></a></h3>
<p>Get and set logging to stdout</p>
<p>Type:</p>
<pre><code>() -&gt; bool</code></pre>
<p>Arguments:</p>
<h3 id="null"><a href="#null" class="anchor"><code>null</code></a></h3>
<p>Create a nullable value.</p>
<p>Type:</p>
<pre><code>(?&#39;a?) -&gt; &#39;a?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a?</code>, which defaults
to <code>null</code>): Value to make nullable.</li>
</ul>
<h3 id="null.case"><a href="#null.case"
class="anchor"><code>null.case</code></a></h3>
<p>Return a result dending on whether a value is nothing or not.</p>
<p>Type:</p>
<pre><code>(&#39;a?, (() -&gt; &#39;b), ((&#39;a) -&gt; &#39;b)) -&gt; &#39;b</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a?</code>): Value to reason
by case analysis on.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; 'b</code>): Value
to return in case we have nothing.</li>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; 'b</code>): Value
to return in case we have something.</li>
</ul>
<h3 id="null.default"><a href="#null.default"
class="anchor"><code>null.default</code></a></h3>
<p>Return a result dending on whether a value is nothing or not.</p>
<p>Type:</p>
<pre><code>(&#39;a?, (() -&gt; &#39;a)) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a?</code>): Value to reason
by case analysis on.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; 'a</code>): Value
to return in case we have nothing.</li>
</ul>
<h3 id="null.defined"><a href="#null.defined"
class="anchor"><code>null.defined</code></a></h3>
<p>Determine whether a nullable value is not null.</p>
<p>Type:</p>
<pre><code>(&#39;a?) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a?</code>)</li>
</ul>
<h3 id="null.get"><a href="#null.get"
class="anchor"><code>null.get</code></a></h3>
<p>Get the value of a nullable. Raises <code>error.not_found</code> if
the value is <code>null</code> and no default value was specified.</p>
<p>Type:</p>
<pre><code>(?default : &#39;a?, &#39;a?) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>'a?</code>, which defaults to
<code>null</code>): Returned value when the value is
<code>null</code>.</li>
<li><code>(unlabeled)</code> (of type <code>'a?</code>)</li>
</ul>
<h3 id="null.to_list"><a href="#null.to_list"
class="anchor"><code>null.to_list</code></a></h3>
<p>Convert a nullable value to a list containing zero or one element
depending on whether the value is null or not.</p>
<p>Type:</p>
<pre><code>(&#39;a?) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a?</code>)</li>
</ul>
<h3 id="playlist.files"><a href="#playlist.files"
class="anchor"><code>playlist.files</code></a></h3>
<p>Retrieve the list of files contained in a playlist.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?mime_type : string?, ?timeout : float,
 string) -&gt; [string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>mime_type</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Default MIME type for the playlist.
<code>null</code> means automatic detection.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Timeout for resolving the playlist</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Path to the
playlist</li>
</ul>
<h3 id="playlist.id"><a href="#playlist.id"
class="anchor"><code>playlist.id</code></a></h3>
<p>Default id assignment for playlists</p>
<p>Type:</p>
<pre><code>(default : string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>string</code>): Default name
pattern when no useful name can be extracted from <code>uri</code></li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Playlist
uri</li>
</ul>
<h3 id="playlist.parse"><a href="#playlist.parse"
class="anchor"><code>playlist.parse</code></a></h3>
<p>Try to parse a local playlist. Return a list of (metadata,URI) items,
where metadata is a list of (key,value) bindings.</p>
<p>Type:</p>
<pre><code>(?path : string, ?mime : string?, string) -&gt;
[[string * string] * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>path</code> (of type <code>string</code>, which defaults to
<code>""</code>): Default path for files.</li>
<li><code>mime</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Mime type for the playlist</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="playlist.parse.register"><a href="#playlist.parse.register"
class="anchor"><code>playlist.parse.register</code></a></h3>
<p>Register a new playlist parser. An empty playlist is considered as a
failure to resolve.</p>
<p>Type:</p>
<pre><code>(format : string, strict : bool,
 ((?pwd : string, string) -&gt;
  [[string * string] * string])) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>format</code> (of type <code>string</code>): Playlist format.
If possible, a mime-type.</li>
<li><code>strict</code> (of type <code>bool</code>): True if playlist
format can be detected unambiguously.</li>
<li><code>(unlabeled)</code> (of type
<code>(?pwd : string, string) -&gt; [[string * string] * string]</code>):
Playlist parser</li>
</ul>
<h3 id="predicate.activates"><a href="#predicate.activates"
class="anchor"><code>predicate.activates</code></a></h3>
<p>Detect when a predicate becomes true.</p>
<p>Type:</p>
<pre><code>(?init : bool, (() -&gt; bool)) -&gt; () -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>init</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Detect at beginning.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; bool</code>):
Predicate.</li>
</ul>
<h3 id="predicate.changes"><a href="#predicate.changes"
class="anchor"><code>predicate.changes</code></a></h3>
<p>Detect when a predicate changes.</p>
<p>Type:</p>
<pre><code>((() -&gt; &#39;a)) -&gt; () -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>() -&gt; 'a where 'a is an orderable type</code>): Predicate.</li>
</ul>
<h3 id="predicate.first"><a href="#predicate.first"
class="anchor"><code>predicate.first</code></a></h3>
<p>First occurrence of a predicate.</p>
<p>Type:</p>
<pre><code>((() -&gt; bool)) -&gt; () -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>() -&gt; bool</code>):
Predicate.</li>
</ul>
<h3 id="predicate.once"><a href="#predicate.once"
class="anchor"><code>predicate.once</code></a></h3>
<p>Become true once every time a predicate is true.</p>
<p>Type:</p>
<pre><code>((() -&gt; bool)) -&gt; () -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>() -&gt; bool</code>):
Predicate.</li>
</ul>
<h3 id="predicate.signal"><a href="#predicate.signal"
class="anchor"><code>predicate.signal</code></a></h3>
<p>Predicate which is true when a signal is sent. The returned predicate
has a method <code>signal</code> to send the signal.</p>
<p>Type:</p>
<pre><code>() -&gt; () -&gt; bool</code></pre>
<p>Arguments:</p>
<p>Methods:</p>
<ul>
<li><code>signal</code> (of type <code>() -&gt; unit</code>): Send a
signal.</li>
</ul>
<h3 id="process_uri"><a href="#process_uri"
class="anchor"><code>process_uri</code></a></h3>
<p>Create a process: uri, replacing <code>:</code> with
<code>$(colon)</code></p>
<p>Type:</p>
<pre><code>(extname : &#39;a, ?uri : string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>extname</code> (of type <code>'a</code>): Output file
extension (with no leading ‘.’)</li>
<li><code>uri</code> (of type <code>string</code>, which defaults to
<code>""</code>): Input uri</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Command line
to execute</li>
</ul>
<h3 id="profiler.disable"><a href="#profiler.disable"
class="anchor"><code>profiler.disable</code></a></h3>
<p>Record profiling statistics.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<h3 id="profiler.enable"><a href="#profiler.enable"
class="anchor"><code>profiler.enable</code></a></h3>
<p>Record profiling statistics.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<h3 id="profiler.run"><a href="#profiler.run"
class="anchor"><code>profiler.run</code></a></h3>
<p>Time a function with the profiler.</p>
<p>Type:</p>
<pre><code>(string, (() -&gt; &#39;a)) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
profiled function.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; 'a</code>):
Function to profile.</li>
</ul>
<h3 id="profiler.stats.string"><a href="#profiler.stats.string"
class="anchor"><code>profiler.stats.string</code></a></h3>
<p>Profiling statistics.</p>
<p>Type:</p>
<pre><code>() -&gt; string</code></pre>
<p>Arguments:</p>
<h3 id="prometheus.latency"><a href="#prometheus.latency"
class="anchor"><code>prometheus.latency</code></a></h3>
<p>Monitor a source’s internal latencies on Prometheus</p>
<p>Type:</p>
<pre><code>(?window : float, ?prefix : string, labels : [string]) -&gt;
(label_values : [string], source(&#39;a)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>window</code> (of type <code>float</code>, which defaults to
<code>5.</code>): Window over which mean and peak metrics are
reported.</li>
<li><code>prefix</code> (of type <code>string</code>, which defaults to
<code>"liquidsoap_"</code>): Prefix for the metric’s name</li>
<li><code>labels</code> (of type <code>[string]</code>): labels for the
metric</li>
</ul>
<h3 id="ref"><a href="#ref" class="anchor"><code>ref</code></a></h3>
<p>Create a reference, i.e. a value which can be modified.</p>
<p>Type:</p>
<pre><code>(&#39;a) -&gt; ref(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
</ul>
<h3 id="ref.get"><a href="#ref.get"
class="anchor"><code>ref.get</code></a></h3>
<p>Retrieve the contents of a reference.</p>
<p>Type:</p>
<pre><code>(ref(&#39;a)) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>ref('a)</code>)</li>
</ul>
<h3 id="ref.getter"><a href="#ref.getter"
class="anchor"><code>ref.getter</code></a></h3>
<p>Create a getter from a reference.</p>
<p>Type:</p>
<pre><code>(ref(&#39;a)) -&gt; () -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>ref('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>set</code> (of type <code>('A) -&gt; unit</code>)</li>
</ul>
<h3 id="ref.incr"><a href="#ref.incr"
class="anchor"><code>ref.incr</code></a></h3>
<p>Increment a reference to an integer.</p>
<p>Type:</p>
<pre><code>(ref(int)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>ref(int)</code>)</li>
</ul>
<h3 id="ref.set"><a href="#ref.set"
class="anchor"><code>ref.set</code></a></h3>
<p>Set the value of a reference.</p>
<p>Type:</p>
<pre><code>(ref(&#39;a), &#39;a) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>ref('a)</code>)</li>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
</ul>
<h3 id="request.create"><a href="#request.create"
class="anchor"><code>request.create</code></a></h3>
<p>Create a request from an URI.</p>
<p>Type:</p>
<pre><code>(?indicators : [string], ?persistent : bool,
 ?temporary : bool, string) -&gt; request</code></pre>
<p>Arguments:</p>
<ul>
<li><code>indicators</code> (of type <code>[string]</code>, which
defaults to <code>[]</code>)</li>
<li><code>persistent</code> (of type <code>bool</code>, which defaults
to <code>false</code>): Indicate that the request is persistent,
i.e. that it may be used again once it has been played.</li>
<li><code>temporary</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Indicate that the request is a temporary file: it
will be destroyed after being played.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="request.destroy"><a href="#request.destroy"
class="anchor"><code>request.destroy</code></a></h3>
<p>Destroying a request causes any temporary associated file to be
deleted, and releases its RID. Persistent requests resist to destroying,
unless forced.</p>
<p>Type:</p>
<pre><code>(?force : bool, request) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>force</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Destroy the request even if it is persistent.</li>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="request.duration"><a href="#request.duration"
class="anchor"><code>request.duration</code></a></h3>
<p>Compute the duration in seconds of audio data contained in a request.
The computation may be expensive. Returns -1. if computation failed,
typically if the file was not recognized as valid audio.</p>
<p>Type:</p>
<pre><code>(string) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="request.filename"><a href="#request.filename"
class="anchor"><code>request.filename</code></a></h3>
<p>Return a valid local filename if the request is ready, and the empty
string otherwise.</p>
<p>Type:</p>
<pre><code>(request) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="request.id"><a href="#request.id"
class="anchor"><code>request.id</code></a></h3>
<p>Identifier of a request.</p>
<p>Type:</p>
<pre><code>(request) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="request.log"><a href="#request.log"
class="anchor"><code>request.log</code></a></h3>
<p>Get log data associated to a request.</p>
<p>Type:</p>
<pre><code>(request) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="request.metadata"><a href="#request.metadata"
class="anchor"><code>request.metadata</code></a></h3>
<p>Get the metadata associated to a request.</p>
<p>Type:</p>
<pre><code>(request) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="request.read_metadata"><a href="#request.read_metadata"
class="anchor"><code>request.read_metadata</code></a></h3>
<p>Force reading the metadata of a request.</p>
<p>Type:</p>
<pre><code>(request) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="request.resolve"><a href="#request.resolve"
class="anchor"><code>request.resolve</code></a></h3>
<p>Resolve a request, i.e. attempt to get a valid local file. The
operation can take some time. Return true if the resolving was
successful, false otherwise (timeout or invalid URI). The request should
not be decoded afterward: this is mostly useful to download files such
as playlists, etc.</p>
<p>Type:</p>
<pre><code>(?content_type : source(&#39;a)?, ?timeout : float, request) -&gt;
bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>content_type</code> (of type <code>source('a)?</code>, which
defaults to <code>null</code>): If specified, the request will be
decoded with the same content type as the given source.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>30.</code>): Limit in seconds to the duration of the
resolving.</li>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="request.resolved"><a href="#request.resolved"
class="anchor"><code>request.resolved</code></a></h3>
<p>Check if a request is resolved, i.e. is associated to a valid local
file.</p>
<p>Type:</p>
<pre><code>(request) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="request.status"><a href="#request.status"
class="anchor"><code>request.status</code></a></h3>
<p>Current status of a request. Can be idle, resolving, ready, playing
or destroyed.</p>
<p>Type:</p>
<pre><code>(request) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="request.uri"><a href="#request.uri"
class="anchor"><code>request.uri</code></a></h3>
<p>Initial URI of a request.</p>
<p>Type:</p>
<pre><code>(request) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>request</code>)</li>
</ul>
<h3 id="runtime.gc.full_major"><a href="#runtime.gc.full_major"
class="anchor"><code>runtime.gc.full_major</code></a></h3>
<p>Trigger full major garbage collection.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<h3 id="runtime.gc.get"><a href="#runtime.gc.get"
class="anchor"><code>runtime.gc.get</code></a></h3>
<p>Return the current values of the GC parameters</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<p>Methods:</p>
<ul>
<li><code>allocation_policy</code> (of type <code>int</code>)</li>
<li><code>custom_major_ratio</code> (of type <code>int</code>)</li>
<li><code>custom_minor_max_size</code> (of type <code>int</code>)</li>
<li><code>custom_minor_ratio</code> (of type <code>int</code>)</li>
<li><code>major_heap_increment</code> (of type <code>int</code>)</li>
<li><code>max_overhead</code> (of type <code>int</code>)</li>
<li><code>minor_heap_size</code> (of type <code>int</code>)</li>
<li><code>space_overhead</code> (of type <code>int</code>)</li>
<li><code>stack_limit</code> (of type <code>int</code>)</li>
<li><code>verbose</code> (of type <code>int</code>)</li>
<li><code>window_size</code> (of type <code>int</code>)</li>
</ul>
<h3 id="runtime.gc.print_stat"><a href="#runtime.gc.print_stat"
class="anchor"><code>runtime.gc.print_stat</code></a></h3>
<p>Print the current values of the memory management counters in
human-readable form.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<h3 id="runtime.gc.quick_stat"><a href="#runtime.gc.quick_stat"
class="anchor"><code>runtime.gc.quick_stat</code></a></h3>
<p>Same as stat except that <code>live_words</code>,
<code>live_blocks</code>, <code>free_words</code>,
<code>free_blocks</code>, <code>largest_free</code>, and
<code>fragments</code> are set to <code>0</code>. This function is much
faster than <code>gc.stat</code> because it does not need to go through
the heap.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<p>Methods:</p>
<ul>
<li><code>compactions</code> (of type <code>int</code>)</li>
<li><code>fragments</code> (of type <code>int</code>)</li>
<li><code>free_blocks</code> (of type <code>int</code>)</li>
<li><code>free_words</code> (of type <code>int</code>)</li>
<li><code>heap_chunks</code> (of type <code>int</code>)</li>
<li><code>heap_words</code> (of type <code>int</code>)</li>
<li><code>largest_free</code> (of type <code>int</code>)</li>
<li><code>live_blocks</code> (of type <code>int</code>)</li>
<li><code>live_words</code> (of type <code>int</code>)</li>
<li><code>major_collections</code> (of type <code>int</code>)</li>
<li><code>major_words</code> (of type <code>float</code>)</li>
<li><code>minor_collections</code> (of type <code>int</code>)</li>
<li><code>minor_words</code> (of type <code>float</code>)</li>
<li><code>promoted_words</code> (of type <code>float</code>)</li>
<li><code>stack_size</code> (of type <code>int</code>)</li>
<li><code>top_heap_words</code> (of type <code>int</code>)</li>
</ul>
<h3 id="runtime.gc.set"><a href="#runtime.gc.set"
class="anchor"><code>runtime.gc.set</code></a></h3>
<p>Set the GC parameters.</p>
<p>Type:</p>
<pre><code>(
 {
   allocation_policy : int,
   custom_major_ratio : int,
   custom_minor_max_size : int,
   custom_minor_ratio : int,
   major_heap_increment : int,
   max_overhead : int,
   minor_heap_size : int,
   space_overhead : int,
   stack_limit : int,
   verbose : int,
   window_size : int
 }) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>{   allocation_policy : int,   custom_major_ratio : int,   custom_minor_max_size : int,   custom_minor_ratio : int,   major_heap_increment : int,   max_overhead : int,   minor_heap_size : int,   space_overhead : int,   stack_limit : int,   verbose : int,   window_size : int }</code>)</li>
</ul>
<h3 id="runtime.gc.stat"><a href="#runtime.gc.stat"
class="anchor"><code>runtime.gc.stat</code></a></h3>
<p>Return the current values of the memory management counters. This
function examines every heap block to get the statistics.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<p>Methods:</p>
<ul>
<li><code>compactions</code> (of type <code>int</code>)</li>
<li><code>fragments</code> (of type <code>int</code>)</li>
<li><code>free_blocks</code> (of type <code>int</code>)</li>
<li><code>free_words</code> (of type <code>int</code>)</li>
<li><code>heap_chunks</code> (of type <code>int</code>)</li>
<li><code>heap_words</code> (of type <code>int</code>)</li>
<li><code>largest_free</code> (of type <code>int</code>)</li>
<li><code>live_blocks</code> (of type <code>int</code>)</li>
<li><code>live_words</code> (of type <code>int</code>)</li>
<li><code>major_collections</code> (of type <code>int</code>)</li>
<li><code>major_words</code> (of type <code>float</code>)</li>
<li><code>minor_collections</code> (of type <code>int</code>)</li>
<li><code>minor_words</code> (of type <code>float</code>)</li>
<li><code>promoted_words</code> (of type <code>float</code>)</li>
<li><code>stack_size</code> (of type <code>int</code>)</li>
<li><code>top_heap_words</code> (of type <code>int</code>)</li>
</ul>
<h3 id="runtime.mem_usage.prettify_bytes"><a
href="#runtime.mem_usage.prettify_bytes"
class="anchor"><code>runtime.mem_usage.prettify_bytes</code></a></h3>
<p>Returns a human-redable description of an amount of bytes.</p>
<p>Type:</p>
<pre><code>(?float_printer : ((float) -&gt; string)?, ?signed : bool?,
 ?bits : bool?, ?binary : bool?, int) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>float_printer</code> (of type
<code>((float) -&gt; string)?</code>, which defaults to
<code>null</code>)</li>
<li><code>signed</code> (of type <code>bool?</code>, which defaults to
<code>null</code>)</li>
<li><code>bits</code> (of type <code>bool?</code>, which defaults to
<code>null</code>)</li>
<li><code>binary</code> (of type <code>bool?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>int</code>)</li>
</ul>
<h3 id="runtime.memory"><a href="#runtime.memory"
class="anchor"><code>runtime.memory</code></a></h3>
<p>Returns information about the system and process’ memory usage.
Requires <code>mem_usage</code> for a full report.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<p>Methods:</p>
<ul>
<li><code>pretty</code> (of type
<code>{   process_managed_memory : string,   process_physical_memory : string,   process_virtual_memory : string,   total_physical_memory : string,   total_used_physical_memory : string,   total_used_virtual_memory : string,   total_virtual_memory : string }</code>)</li>
<li><code>process_managed_memory</code> (of type <code>int</code>)</li>
<li><code>process_physical_memory</code> (of type <code>int</code>)</li>
<li><code>process_virtual_memory</code> (of type <code>int</code>)</li>
<li><code>total_physical_memory</code> (of type <code>int</code>)</li>
<li><code>total_used_physical_memory</code> (of type
<code>int</code>)</li>
<li><code>total_used_virtual_memory</code> (of type
<code>int</code>)</li>
<li><code>total_virtual_memory</code> (of type <code>int</code>)</li>
</ul>
<h3 id="runtime.sys.word_size"><a href="#runtime.sys.word_size"
class="anchor"><code>runtime.sys.word_size</code></a></h3>
<p>Size of one word on the machine currently executing the program, in
bits. Either <code>32</code> or <code>64</code>.</p>
<p>Type:</p>
<pre><code>int</code></pre>
<p>Arguments:</p>
<h3 id="seconds_of_main"><a href="#seconds_of_main"
class="anchor"><code>seconds_of_main</code></a></h3>
<p>Convert a number of main ticks in seconds.</p>
<p>Type:</p>
<pre><code>(int) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>)</li>
</ul>
<h3 id="server.execute"><a href="#server.execute"
class="anchor"><code>server.execute</code></a></h3>
<p>Execute a liquidsoap server command.</p>
<p>Type:</p>
<pre><code>(string, ?string) -&gt; [string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Command to
execute.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>, which
defaults to <code>""</code>): Argument for the command.</li>
</ul>
<h3 id="settings"><a href="#settings"
class="anchor"><code>settings</code></a></h3>
<p>All settings.</p>
<p>Type:</p>
<pre><code>
{
  alsa : 
  {
    alsa_buffer : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    },
    buffer_length : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    },
    comments : string,
    description : string,
    periods : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    }
  },
  audio : 
  {
    comments : string,
    converter : 
    {
      channel_layout : 
      {
        comments : string,
        converters : (() -&gt; [string])
        .{
          comments : string,
          description : string,
          set : ([string]) -&gt; unit
        },
        description : string
      },
      comments : string,
      description : string,
      samplerate : 
      {
        comments : string,
        converters : (() -&gt; [string])
        .{
          comments : string,
          description : string,
          set : ([string]) -&gt; unit
        },
        description : string,
        libsamplerate : 
        {
          comments : string,
          description : string,
          quality : (() -&gt; string)
          .{
            comments : string,
            description : string,
            set : (string) -&gt; unit
          }
        },
        native : 
        {
          comments : string,
          description : string,
          quality : (() -&gt; string)
          .{
            comments : string,
            description : string,
            set : (string) -&gt; unit
          }
        }
      }
    },
    description : string
  },
  clock : 
  {
    allow_streaming_errors : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    comments : string,
    description : string,
    log_delay : (() -&gt; float)
    .{
      comments : string,
      description : string,
      set : (float) -&gt; unit
    }
  },
  comments : string,
  console : 
  {
    colorize : (() -&gt; string)
    .{
      comments : string,
      description : string,
      set : (string) -&gt; unit
    },
    comments : string,
    description : string
  },
  decoder : 
  {
    comments : string,
    debug : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    decoders : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      set : ([string]) -&gt; unit
    },
    description : string,
    ffmpeg : 
    {
      codecs : 
      {
        _4xm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        aac : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        aasc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ac3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        acelpkelvin : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_4xm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_adx : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_afc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_agm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_dtk : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_ea_xas : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_g726le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_ima_ea_eacs : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_ima_ea_sead : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_ima_qt : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_ima_smjpeg : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_ima_ws : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_psx : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_swf : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_thp : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_thp_le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        adpcm_yamaha : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        agm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        aic : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        alac : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        amr_nb : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        amr_wb : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        amv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        anm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ansi : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ape : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        apng : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        aptx : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        arbc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        asv1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        asv2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        atrac1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        atrac3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        atrac3al : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        atrac9 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        aura : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        aura2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        av1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        avc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        avrn : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        avrp : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        avs : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        avui : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ayuv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        bethsoftvid : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        bfi : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        binkaudio_dct : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        binkvideo : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        bitpacked : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        bmp : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        bmv_audio : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        bmv_video : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        brender_pix : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        c93 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        cavs : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        cdxl : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        cfhd : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        cljr : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        cllc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        cmv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        comfortnoise : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        comments : string,
        cook : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        cpia : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        cscd : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        cyuv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dds : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        description : string,
        dfa : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dpx : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dsd_lsbf_planar : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dsd_msbf_planar : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dsicinvideo : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dss_sp : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dst : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dts : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dxa : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dxtory : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        dxv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        eac3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        escape124 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        escape130 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        evrc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        exr : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ffv1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        fic : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        fits : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        flac : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        flashsv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        flic : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        flv1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        fmvc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        fraps : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        frwu : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        g2m : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        g723_1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        g729 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        gdv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        gif : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        gsm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        h261 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        h263 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        h263i : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        h263p : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        h264 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        hap : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        hca : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        hcom : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        hevc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        hnm4video : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        hq_hqa : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        hqx : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        hymt : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        iac : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        iff_ilbm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ilbc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        imc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        imm4 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        imm5 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        interplayacm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        interplayvideo : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        jpeg2000 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        jv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        kgv1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        kmvc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        lagarith : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        loco : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        lscr : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        m101 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mace3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mace6 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mad : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mdec : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        metasound : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mimic : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mjpeg : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mjpegb : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mlp : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        motionpixels : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mp1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mp2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mp3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mpeg1video : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mpeg2video : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mpeg4 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        msa1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mscc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        msmpeg4v1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        msmpeg4v2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        msmpeg4v3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        msrle : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mss1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mss2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mszh : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mts2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mv30 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mvc1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mvc2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mvdv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mvha : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mwsc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        mxpeg : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        notchlc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        nuv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        opus : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pam : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pbm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_bluray : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_dvd : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_f16le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_f24le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_f32be : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_f32le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_f64be : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_f64le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_lxf : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s16be : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s16le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s16le_planar : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s24be : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s24daud : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s24le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s24le_planar : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s32be : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s32le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s32le_planar : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s64be : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_s64le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_u16be : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_u16le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_u24be : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_u24le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_u32be : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_u32le : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcm_vidc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pcx : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pfm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pgm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pgmyuv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        pictor : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        png : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ppm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        psd : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ptx : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        qdm2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        qdmc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        qpeg : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        r10k : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        r210 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ralf : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        rasc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        rl2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        roq : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        rpza : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        rscc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        rv10 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        rv20 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        rv30 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        rv40 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        sanm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        sbc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        scpr : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        screenpresso : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        sdx2_dpcm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        sgi : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        sipr : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        siren : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        smc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        snow : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        sol_dpcm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        sonic : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        sp5x : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        speedhq : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        speex : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        srgc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        svg : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        svq1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        svq3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tak : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        targa : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        targa_y216 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tdsc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tgq : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tgv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        theora : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        thp : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tiertexseqvideo : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tiff : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tmv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tqi : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        truehd : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        truemotion1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        truemotion2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        truemotion2rt : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tscc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tscc2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        tta : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        txd : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ulti : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        v210 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        v210x : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        v308 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        v408 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        v410 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vb : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vble : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vc1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vc1image : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vcr1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vixl : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vmdaudio : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vmdvideo : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vmnc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vorbis : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vp3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vp4 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vp5 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vp6 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vp6a : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vp6f : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vp7 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vp8 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        vp9 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        wavesynth : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        wavpack : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        wcmv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        webp : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        westwood_snd1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        wmalossless : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        wmavoice : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        wmv1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        wmv2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        wmv3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        wnv1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ws_vqa : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        xan_wc3 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        xan_wc4 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        xbm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        xma1 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        xma2 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        xpm : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        xwd : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        y41p : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        ylc : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        yop : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        yuv4 : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        zlib : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        zmbv : (() -&gt; string?)
        .{
          available : (() -&gt; [string])
          .{
            comments : string,
            description : string,
            set : ([string]) -&gt; unit
          },
          comments : string,
          description : string,
          set : (string) -&gt; unit
        }
      },
      comments : string,
      description : string
    },
    file_extensions : 
    {
      aac : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      aiff : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      comments : string,
      description : string,
      ffmpeg : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        images : (() -&gt; [string])
        .{
          comments : string,
          description : string,
          set : ([string]) -&gt; unit
        },
        set : ([string]) -&gt; unit
      },
      flac : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      gstreamer : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      id3 : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      image_metadata : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      mad : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      mp3 : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      mp4 : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      ogg : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      srt : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      taglib : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      video_metadata : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      wav : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      }
    },
    id3 : 
    {comments : string, description : string
    },
    image_file_decoders : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      set : ([string]) -&gt; unit
    },
    image_metadata : 
    {comments : string, description : string
    },
    mime_types : 
    {
      aac : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      aiff : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      basic : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      comments : string,
      description : string,
      ffmpeg : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        images : (() -&gt; [string])
        .{
          comments : string,
          description : string,
          set : ([string]) -&gt; unit
        },
        set : ([string]) -&gt; unit
      },
      flac : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      gstreamer : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      id3 : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      image_metadata : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      mad : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      mp3 : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      mp4 : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      ogg : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      srt : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      taglib : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      video_metadata : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      },
      wav : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      }
    },
    priorities : 
    {
      aac : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      aiff : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      basic : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      comments : string,
      description : string,
      ffmpeg : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      flac : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      gstreamer : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      mad : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      mp4 : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      ogg : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      srt : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      wav : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      }
    },
    taglib : 
    {comments : string, description : string
    },
    video_metadata : 
    {comments : string, description : string
    }
  },
  description : string,
  encoder : 
  {
    comments : string,
    description : string,
    metadata : 
    {
      comments : string,
      description : string,
      export : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      }
    }
  },
  ffmpeg : 
  {
    comments : string,
    content : 
    {
      comments : string,
      copy : 
      {
        comments : string,
        description : string,
        relaxed_compatibility_check : (() -&gt; bool)
        .{
          comments : string,
          description : string,
          set : (bool) -&gt; unit
        }
      },
      description : string
    },
    description : string,
    log : 
    {
      comments : string,
      description : string,
      level : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      verbosity : (() -&gt; string)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      }
    },
    scaling_algorithm : (() -&gt; string)
    .{
      comments : string,
      description : string,
      set : (string) -&gt; unit
    }
  },
  frame : 
  {
    audio : 
    {
      channels : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      comments : string,
      description : string,
      samplerate : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      size : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      }
    },
    comments : string,
    description : string,
    duration : (() -&gt; float)
    .{
      comments : string,
      description : string,
      set : (float) -&gt; unit
    },
    midi : 
    {
      channels : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      comments : string,
      description : string
    },
    video : 
    {
      comments : string,
      default : (() -&gt; bool)
      .{
        comments : string,
        description : string,
        set : (bool) -&gt; unit
      },
      description : string,
      framerate : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      height : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      width : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      }
    }
  },
  gstreamer : 
  {
    add_borders : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    comments : string,
    description : string,
    max_buffers : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    }
  },
  harbor : 
  {
    bind_addrs : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      set : ([string]) -&gt; unit
    },
    comments : string,
    description : string,
    icy_formats : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      set : ([string]) -&gt; unit
    },
    max_connections : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    },
    reverse_dns : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    ssl : 
    {
      certificate : (() -&gt; string)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      },
      comments : string,
      description : string,
      password : (() -&gt; string)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      },
      private_key : (() -&gt; string)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      },
      read_timeout : (() -&gt; float)
      .{
        comments : string,
        description : string,
        set : (float) -&gt; unit
      },
      write_timeout : (() -&gt; float)
      .{
        comments : string,
        description : string,
        set : (float) -&gt; unit
      }
    },
    timeout : (() -&gt; float)
    .{
      comments : string,
      description : string,
      set : (float) -&gt; unit
    },
    verbose : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    }
  },
  init : 
  {
    allow_root : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    catch_exn : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    comments : string,
    daemon : (() -&gt; bool)
    .{
      change_user : (() -&gt; bool)
      .{
        comments : string,
        description : string,
        group : (() -&gt; string)
        .{
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        set : (bool) -&gt; unit,
        user : (() -&gt; string)
        .{
          comments : string,
          description : string,
          set : (string) -&gt; unit
        }
      },
      comments : string,
      description : string,
      pidfile : (() -&gt; bool)
      .{
        comments : string,
        description : string,
        path : (() -&gt; string?)
        .{
          comments : string,
          description : string,
          set : (string) -&gt; unit
        },
        perms : (() -&gt; int)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (bool) -&gt; unit
      },
      set : (bool) -&gt; unit
    },
    description : string,
    force_start : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    trace : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    }
  },
  lang : 
  {
    comments : string,
    debug : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    debug_errors : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    description : string
  },
  log : 
  {
    comments : string,
    description : string,
    file : (() -&gt; bool)
    .{
      append : (() -&gt; bool)
      .{
        comments : string,
        description : string,
        set : (bool) -&gt; unit
      },
      comments : string,
      description : string,
      path : (() -&gt; string?)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      },
      perms : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      set : (bool) -&gt; unit
    },
    level : (() -&gt; int)
    .{
      annotate : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      audio : (() -&gt; int?)
      .{
        comments : string,
        converter : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          libsamplerate : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          set : (int) -&gt; unit
        },
        description : string,
        set : (int) -&gt; unit
      },
      audioscrobbler : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      avi : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        encoder : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      camomile : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      clock : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      comments : string,
      console : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      decoder : (() -&gt; int?)
      .{
        aac : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        camlimages : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        comments : string,
        description : string,
        external : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          oblivious : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          set : (int) -&gt; unit
        },
        ffmpeg : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          image : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          internal : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          set : (int) -&gt; unit
        },
        flac : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        gstreamer : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        id3 : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        image : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          metadata : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          set : (int) -&gt; unit
        },
        mad : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        midi : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        mp4 : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        ogg : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        ppm : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        raw : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        sdlimage : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit,
        srt : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        taglib : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        video : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          metadata : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          set : (int) -&gt; unit
        },
        wav_aiff : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        }
      },
      deprecated : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      description : string,
      dssi_synthesizer : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      dynamic : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        loader : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      encoder : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        gstreamer : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      ffmpeg : (() -&gt; int?)
      .{
        comments : string,
        copy : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          encoder : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          set : (int) -&gt; unit
        },
        decoder : (() -&gt; int?)
        .{
          comments : string,
          copy : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          description : string,
          set : (int) -&gt; unit
        },
        description : string,
        encoder : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          internal : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          set : (int) -&gt; unit
        },
        filter : (() -&gt; int?)
        .{
          bitstream : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        internal : (() -&gt; int?)
        .{
          comments : string,
          decoder : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      file_watcher : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        native : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      frame : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      frei0r : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      gstreamer : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      harbor : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      hls : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        output : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      icy : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit,
        update_metadata : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        }
      },
      image : (() -&gt; int?)
      .{
        comments : string,
        decoder : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        description : string,
        set : (int) -&gt; unit
      },
      input : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        external : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit,
          video : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          }
        },
        http : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        jack : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      io : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        gstreamer : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      irc : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      ladspa_extension : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      lang : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        json : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      langfile : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      lastfm : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit,
        submit : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        }
      },
      lifecycle : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      lo : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      metadata : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        flac : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        mp4 : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      oggmuxer : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      playlist : (() -&gt; int?)
      .{
        basic : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        comments : string,
        description : string,
        set : (int) -&gt; unit,
        xml : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        }
      },
      playlist_parser : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      process : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      prometheus : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        server : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      request : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        dynamic : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      sandbox : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      server : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      set : (int) -&gt; unit,
      single : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      source : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        dump : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      srt : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      string : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        interpolate : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        set : (int) -&gt; unit
      },
      threads : (() -&gt; int?)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      video : (() -&gt; int?)
      .{
        add_text : (() -&gt; int?)
        .{
          camlimages : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        comments : string,
        converter : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          set : (int) -&gt; unit
        },
        description : string,
        set : (int) -&gt; unit,
        text : (() -&gt; int?)
        .{
          comments : string,
          description : string,
          native : (() -&gt; int?)
          .{
            comments : string,
            description : string,
            set : (int) -&gt; unit
          },
          set : (int) -&gt; unit
        }
      }
    },
    stdout : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    unix_timestamps : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    }
  },
  mpd : 
  {
    comments : string,
    debug : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    description : string,
    host : (() -&gt; string)
    .{
      comments : string,
      description : string,
      set : (string) -&gt; unit
    },
    path : (() -&gt; string)
    .{
      comments : string,
      description : string,
      set : (string) -&gt; unit
    },
    port : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    },
    randomize : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    }
  },
  osc : 
  {
    comments : string,
    description : string,
    port : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    }
  },
  playlists : 
  {
    comments : string,
    cue_in_metadata : (() -&gt; string)
    .{
      comments : string,
      description : string,
      set : (string) -&gt; unit
    },
    cue_out_metadata : (() -&gt; string)
    .{
      comments : string,
      description : string,
      set : (string) -&gt; unit
    },
    description : string,
    mime_types : 
    {
      comments : string,
      description : string,
      xml : (() -&gt; [string])
      .{
        comments : string,
        description : string,
        set : ([string]) -&gt; unit
      }
    }
  },
  prometheus : 
  {
    comments : string,
    description : string,
    server : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      port : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      set : (bool) -&gt; unit
    }
  },
  request : 
  {
    comments : string,
    description : string,
    leak_warning : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    },
    metadata_decoders : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      duration : (() -&gt; bool)
      .{
        comments : string,
        description : string,
        set : (bool) -&gt; unit
      },
      override : (() -&gt; bool)
      .{
        comments : string,
        description : string,
        set : (bool) -&gt; unit
      },
      set : ([string]) -&gt; unit
    }
  },
  root : 
  {
    comments : string,
    description : string,
    max_latency : (() -&gt; float)
    .{
      comments : string,
      description : string,
      set : (float) -&gt; unit
    }
  },
  sandbox : (() -&gt; bool)
  .{
    binary : (() -&gt; string)
    .{
      comments : string,
      description : string,
      set : (string) -&gt; unit
    },
    comments : string,
    description : string,
    network : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    ro : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      set : ([string]) -&gt; unit
    },
    rw : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      set : ([string]) -&gt; unit
    },
    set : (bool) -&gt; unit,
    setenv : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      set : ([string]) -&gt; unit
    },
    shell : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      path : (() -&gt; string)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      },
      set : (bool) -&gt; unit
    },
    unsetenv : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      set : ([string]) -&gt; unit
    }
  },
  scheduler : 
  {
    comments : string,
    description : string,
    fast_queues : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    },
    generic_queues : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    },
    log : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    non_blocking_queues : (() -&gt; int)
    .{
      comments : string,
      description : string,
      set : (int) -&gt; unit
    }
  },
  server : 
  {
    comments : string,
    description : string,
    log : 
    {
      comments : string,
      description : string,
      level : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      }
    },
    socket : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      path : (() -&gt; string)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      },
      permissions : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      set : (bool) -&gt; unit
    },
    telnet : (() -&gt; bool)
    .{
      bind_addr : (() -&gt; string)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      },
      comments : string,
      description : string,
      port : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      revdns : (() -&gt; bool)
      .{
        comments : string,
        description : string,
        set : (bool) -&gt; unit
      },
      set : (bool) -&gt; unit
    },
    timeout : (() -&gt; float)
    .{
      comments : string,
      description : string,
      set : (float) -&gt; unit
    }
  },
  srt : 
  {
    comments : string,
    description : string,
    enforced_encryption : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      set : (bool) -&gt; unit
    },
    log : (() -&gt; bool)
    .{
      comments : string,
      description : string,
      level : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      },
      set : (bool) -&gt; unit,
      verbosity : (() -&gt; string)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      }
    },
    poll : 
    {
      comments : string,
      description : string,
      timeout : (() -&gt; int)
      .{
        comments : string,
        description : string,
        set : (int) -&gt; unit
      }
    }
  },
  tag : 
  {
    comments : string,
    description : string,
    encodings : (() -&gt; [string])
    .{
      comments : string,
      description : string,
      set : ([string]) -&gt; unit
    }
  },
  video : 
  {
    comments : string,
    converter : 
    {
      comments : string,
      description : string,
      preferred : (() -&gt; string)
      .{
        comments : string,
        description : string,
        set : (string) -&gt; unit
      },
      proportional_scale : (() -&gt; bool)
      .{
        comments : string,
        description : string,
        set : (bool) -&gt; unit
      }
    },
    description : string
  }
}</code></pre>
<p>Arguments:</p>
<h3 id="snd"><a href="#snd" class="anchor"><code>snd</code></a></h3>
<p>Get the second component of a pair.</p>
<p>Type:</p>
<pre><code>((&#39;a * &#39;b)) -&gt; &#39;b</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a * 'b</code>)</li>
</ul>
<h3 id="source.dump"><a href="#source.dump"
class="anchor"><code>source.dump</code></a></h3>
<p>Immediately encode the whole contents of a source into a file.</p>
<p>Type:</p>
<pre><code>(format(&#39;a), string, source(&#39;b)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>format('a)</code>): Encoding
format.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Name of the
file.</li>
<li><code>(unlabeled)</code> (of type <code>source('b)</code>): Source
to encode</li>
</ul>
<p>This function is experimental.</p>
<h3 id="source.duration"><a href="#source.duration"
class="anchor"><code>source.duration</code></a></h3>
<p>Estimation of the duration in the current track.</p>
<p>Type:</p>
<pre><code>(source(&#39;a)) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="source.elapsed"><a href="#source.elapsed"
class="anchor"><code>source.elapsed</code></a></h3>
<p>Elapsed time in the current track.</p>
<p>Type:</p>
<pre><code>(source(&#39;a)) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="source.fallible"><a href="#source.fallible"
class="anchor"><code>source.fallible</code></a></h3>
<p>Indicate if a source may fail, i.e. may not be ready to stream.</p>
<p>Type:</p>
<pre><code>(source(&#39;a)) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="source.id"><a href="#source.id"
class="anchor"><code>source.id</code></a></h3>
<p>Get the identifier of a source.</p>
<p>Type:</p>
<pre><code>(source(&#39;a)) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="source.init"><a href="#source.init"
class="anchor"><code>source.init</code></a></h3>
<p>Simultaneously initialize sources, return the sublist of sources that
failed to initialize.</p>
<p>Type:</p>
<pre><code>([source(audio=&#39;a, video=&#39;b, midi=&#39;c)]) -&gt;
[source(audio=&#39;a, video=&#39;b, midi=&#39;c)]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>[source(audio='a, video='b, midi='c)]</code>)</li>
</ul>
<p>This function is experimental.</p>
<h3 id="source.is_ready"><a href="#source.is_ready"
class="anchor"><code>source.is_ready</code></a></h3>
<p>Indicate if a source is ready to stream (we also say that it is
available), or currently streaming.</p>
<p>Type:</p>
<pre><code>(source(&#39;a)) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="source.remaining"><a href="#source.remaining"
class="anchor"><code>source.remaining</code></a></h3>
<p>Estimation of remaining time in the current track.</p>
<p>Type:</p>
<pre><code>(source(&#39;a)) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="source.seek"><a href="#source.seek"
class="anchor"><code>source.seek</code></a></h3>
<p>Seek forward, in seconds. Returns the amount of time effectively
seeked.</p>
<p>Type:</p>
<pre><code>(source(&#39;a), float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="source.set_name"><a href="#source.set_name"
class="anchor"><code>source.set_name</code></a></h3>
<p>Set the name of an operator.</p>
<p>Type:</p>
<pre><code>(source(&#39;a), string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="source.skip"><a href="#source.skip"
class="anchor"><code>source.skip</code></a></h3>
<p>Skip to the next track.</p>
<p>Type:</p>
<pre><code>(source(&#39;a)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="source.time"><a href="#source.time"
class="anchor"><code>source.time</code></a></h3>
<p>Get a source’s time, based on its assigned clock</p>
<p>Type:</p>
<pre><code>(source(&#39;a)) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="thread.on_error"><a href="#thread.on_error"
class="anchor"><code>thread.on_error</code></a></h3>
<p>Register the function to be called when an error of the given kind is
raised in a thread. Catches all errors if first argument is
<code>null</code>.</p>
<p>Type:</p>
<pre><code>(error
 .{kind : string, message : string, positions : [string]
 }?,
 ((backtrace : string, error
   .{
     kind : string,
     message : string,
     positions : [string]
   }) -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>error .{kind : string, message : string, positions : [string]}?</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>(backtrace : string, error  .{kind : string, message : string, positions : [string]  }) -&gt; unit</code>)</li>
</ul>
<h3 id="thread.run.recurrent"><a href="#thread.run.recurrent"
class="anchor"><code>thread.run.recurrent</code></a></h3>
<p>Run a recurrent function in a separate thread.</p>
<p>Type:</p>
<pre><code>(?fast : bool, ?delay : float, (() -&gt; float)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>fast</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Whether the thread is supposed to return quickly or
not. Typically, blocking tasks (e.g. fetching data over the internet)
should not be considered to be fast. When set to <code>false</code> its
priority will be lowered below that of request resolutions and fast
timeouts. This is only effective if you set a dedicated queue for fast
tasks, see the “scheduler” settings for more details.</li>
<li><code>delay</code> (of type <code>float</code>, which defaults to
<code>0.</code>): Delay (in sec.) after which the thread should be
launched.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; float</code>):
Function to execute recurrently. The returned value is the delay (in
sec.) in which the function should be run again (it won’t be run if the
value is strictly negative).</li>
</ul>
<h3 id="time.make"><a href="#time.make"
class="anchor"><code>time.make</code></a></h3>
<p>Convert a date and time in the local timezone into a time, in
seconds, since 00:00:00 GMT, Jan. 1, 1970.</p>
<p>Type:</p>
<pre><code>(
 {
   day : int,
   dst : bool?,
   hour : int,
   min : int,
   month : int,
   sec : int,
   year : int
 }) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>{   day : int,   dst : bool?,   hour : int,   min : int,   month : int,   sec : int,   year : int }</code>)</li>
</ul>
<h3 id="time.predicate"><a href="#time.predicate"
class="anchor"><code>time.predicate</code></a></h3>
<p>Parse a string as a time predicate</p>
<p>Type:</p>
<pre><code>(string) -&gt; () -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="time.zone"><a href="#time.zone"
class="anchor"><code>time.zone</code></a></h3>
<p>Returns a description of the time zone set for the running
process.</p>
<p>Type:</p>
<pre><code>() -&gt; string</code></pre>
<p>Arguments:</p>
<p>Methods:</p>
<ul>
<li><code>daylight</code> (of type <code>string</code>): Daylight
Savings Time</li>
<li><code>utc_diff</code> (of type <code>int</code>): Difference in
seconds between the current timezone and UTC.</li>
</ul>
<h3 id="time.zone.set"><a href="#time.zone.set"
class="anchor"><code>time.zone.set</code></a></h3>
<p>Set the current time zone. This is equivalent to setting the
<code>TZ</code> environment variable.</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="while"><a href="#while"
class="anchor"><code>while</code></a></h3>
<p>A while loop.</p>
<p>Type:</p>
<pre><code>({bool}, (() -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>{bool}</code>): Condition
guarding the loop.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>):
Function to execute.</li>
</ul>
<h2 id="list"><a href="#list" class="anchor">List</a></h2>
<h3 id="section-6"><a href="#section-6"
class="anchor"><code>_::_</code></a></h3>
<p>Add an element at the top of a list.</p>
<p>Type:</p>
<pre><code>(&#39;a, [&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="section-7"><a href="#section-7"
class="anchor"><code>_[_]</code></a></h3>
<p>l[k] returns the first v such that (k,v) is in the list l (or “” if
no such v exists).</p>
<p>Type:</p>
<pre><code>([&#39;a * string], &#39;a) -&gt; string
where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>['a * string] where 'a is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
</ul>
<h3 id="list.add"><a href="#list.add"
class="anchor"><code>list.add</code></a></h3>
<p>Add an element at the top of a list.</p>
<p>Type:</p>
<pre><code>(&#39;a, [&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.append"><a href="#list.append"
class="anchor"><code>list.append</code></a></h3>
<p>Concatenate two lists.</p>
<p>Type:</p>
<pre><code>([&#39;a], [&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.assoc"><a href="#list.assoc"
class="anchor"><code>list.assoc</code></a></h3>
<p>Associate a value to a key in an association list. This functions
raises <code>error.not_found</code> if no default value is
specified.</p>
<p>Type:</p>
<pre><code>(?default : &#39;a?, &#39;b, [&#39;b * &#39;a]) -&gt; &#39;a
where &#39;b is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>'a?</code>, which defaults to
<code>null</code>): Value returned if the key is not found.</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>['b * 'a] where 'b is an orderable type</code>)</li>
</ul>
<h3 id="list.assoc.filter"><a href="#list.assoc.filter"
class="anchor"><code>list.assoc.filter</code></a></h3>
<p>Keep only the elements of an association list satisfying a given
predicate.</p>
<p>Type:</p>
<pre><code>(((&#39;a, &#39;b) -&gt; bool), [&#39;a * &#39;b]) -&gt; [&#39;a * &#39;b]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>('a, 'b) -&gt; bool</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a * 'b]</code>)</li>
</ul>
<h3 id="list.assoc.mem"><a href="#list.assoc.mem"
class="anchor"><code>list.assoc.mem</code></a></h3>
<p>list.assoc.mem(key,l) returns true if l contains a pair
(key,value).</p>
<p>Type:</p>
<pre><code>(&#39;a, [&#39;a * &#39;b]) -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>): Key to look for</li>
<li><code>(unlabeled)</code> (of type
<code>['a * 'b] where 'a is an orderable type</code>): List of pairs
(key,value)</li>
</ul>
<h3 id="list.assoc.remove"><a href="#list.assoc.remove"
class="anchor"><code>list.assoc.remove</code></a></h3>
<p>Remove the first pair from an associative list.</p>
<p>Type:</p>
<pre><code>(&#39;a, [&#39;a * &#39;b]) -&gt; [&#39;a * &#39;b]
where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>): Key of pair to be
removed.</li>
<li><code>(unlabeled)</code> (of type
<code>['a * 'b] where 'a is an orderable type</code>): List of pairs
(key,value).</li>
</ul>
<h3 id="list.assoc.remove.all"><a href="#list.assoc.remove.all"
class="anchor"><code>list.assoc.remove.all</code></a></h3>
<p>Remove all pairs with given key from an associative list.</p>
<p>Type:</p>
<pre><code>(&#39;a, [&#39;a * &#39;b]) -&gt; [&#39;a * &#39;b]
where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>): Key of pairs to be
removed.</li>
<li><code>(unlabeled)</code> (of type
<code>['a * 'b] where 'a is an orderable type</code>): List of pairs
(key,value).</li>
</ul>
<h3 id="list.case"><a href="#list.case"
class="anchor"><code>list.case</code></a></h3>
<p>Define a function by case analysis, depending on whether a list is
empty or not.</p>
<p>Type:</p>
<pre><code>([&#39;a], &#39;b, ((&#39;a, [&#39;a]) -&gt; &#39;b)) -&gt; &#39;b</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List to
perform case analysis on.</li>
<li><code>(unlabeled)</code> (of type <code>'b</code>): Result when the
list is empty.</li>
<li><code>(unlabeled)</code> (of type <code>('a, ['a]) -&gt; 'b</code>):
Result when the list is non-empty.</li>
</ul>
<h3 id="list.cons"><a href="#list.cons"
class="anchor"><code>list.cons</code></a></h3>
<p>Add an element at the top of a list.</p>
<p>Type:</p>
<pre><code>(&#39;a, [&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.dcase"><a href="#list.dcase"
class="anchor"><code>list.dcase</code></a></h3>
<p>“Delayed” version of <code>list.case</code> where the value on empty
list is only evaluated if necessary.</p>
<p>Type:</p>
<pre><code>([&#39;a], (() -&gt; &#39;b), ((&#39;a, [&#39;a]) -&gt; &#39;b)) -&gt; &#39;b</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; 'b</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>('a, ['a]) -&gt; 'b</code>)</li>
</ul>
<h3 id="list.exists"><a href="#list.exists"
class="anchor"><code>list.exists</code></a></h3>
<p>Check that a predicate is satisfied for some element in a list.</p>
<p>Type:</p>
<pre><code>(((&#39;a) -&gt; bool), [&#39;a]) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; bool</code>):
Predicate.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List.</li>
</ul>
<h3 id="list.filter"><a href="#list.filter"
class="anchor"><code>list.filter</code></a></h3>
<p>Filter a list according to a predicate. The order in which elements
are handled is not specified (and is currently implemented from the
right).</p>
<p>Type:</p>
<pre><code>(?remove : ((&#39;a) -&gt; unit), ((&#39;a) -&gt; bool), [&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>remove</code> (of type <code>('a) -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Function called on an element
when it is removed.</li>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; bool</code>):
Predicate indicating whether an element should be kept or not.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List to
filter.</li>
</ul>
<h3 id="list.find"><a href="#list.find"
class="anchor"><code>list.find</code></a></h3>
<p>First element satisfying a predicate. Raises
<code>error.not_found</code> if not element is found and no default
value was specified.</p>
<p>Type:</p>
<pre><code>(?default : &#39;a?, ((&#39;a) -&gt; bool), [&#39;a]) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>'a?</code>, which defaults to
<code>null</code>): Returned value when the predicate is not found.</li>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; bool</code>):
Predicate.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List.</li>
</ul>
<h3 id="list.fold"><a href="#list.fold"
class="anchor"><code>list.fold</code></a></h3>
<p>Fold a function on every element of a list:
<code>list.fold(f,x1,[e1,..,en]) is f(...f(f(x1,e1),e2)...,en)</code>.</p>
<p>Type:</p>
<pre><code>(((&#39;a, &#39;b) -&gt; &#39;a), &#39;a, [&#39;b]) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a, 'b) -&gt; 'a</code>):
Function <code>f</code> for which <code>f(x,e)</code> which will be
called on every element <code>e</code> with the current value of
<code>x</code>, returning the new value of <code>x</code>.</li>
<li><code>(unlabeled)</code> (of type <code>'a</code>): Initial value
x1, to be updated by successive calls of <code>f(x,e)</code>.</li>
<li><code>(unlabeled)</code> (of type <code>['b]</code>)</li>
</ul>
<h3 id="list.fold.right"><a href="#list.fold.right"
class="anchor"><code>list.fold.right</code></a></h3>
<p>Fold a function on every element of a list. Similar to
<code>list.fold</code> but iterates from the right of the list. It is
slightly more efficient than <code>list.fold</code>.</p>
<p>Type:</p>
<pre><code>(((&#39;a, &#39;b) -&gt; &#39;b), &#39;b, [&#39;a]) -&gt; &#39;b</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a, 'b) -&gt; 'b</code>):
Function <code>f</code> for which <code>f(x,e)</code> which will be
called on every element <code>e</code> with the current value of
<code>x</code>, returning the new value of <code>x</code>.</li>
<li><code>(unlabeled)</code> (of type <code>'b</code>): Initial value
x1, to be updated by successive calls of <code>f(x,e)</code>.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.for_all"><a href="#list.for_all"
class="anchor"><code>list.for_all</code></a></h3>
<p>Check that a predicate is satisfied for every element in a list.</p>
<p>Type:</p>
<pre><code>(((&#39;a) -&gt; bool), [&#39;a]) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; bool</code>):
Predicate.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List.</li>
</ul>
<h3 id="list.hd"><a href="#list.hd"
class="anchor"><code>list.hd</code></a></h3>
<p>Return the head (first element) of a list, or <code>default</code> if
the list is empty.</p>
<p>Type:</p>
<pre><code>(?default : &#39;a?, [&#39;a]) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>'a?</code>, which defaults to
<code>null</code>): Default value if key does not exist.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.ind"><a href="#list.ind"
class="anchor"><code>list.ind</code></a></h3>
<p>Define a function by induction on a list. This is slightly more
efficient than defining a recursive function. The list is scanned from
the right.</p>
<p>Type:</p>
<pre><code>([&#39;a], &#39;b, ((&#39;a, [&#39;a], &#39;b) -&gt; &#39;b)) -&gt; &#39;b</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List to
perform induction on.</li>
<li><code>(unlabeled)</code> (of type <code>'b</code>): Result when the
list is empty.</li>
<li><code>(unlabeled)</code> (of type
<code>('a, ['a], 'b) -&gt; 'b</code>): Result when the list is
non-empty, given the current element, the tail and the result of the
recursive call on the tail.</li>
</ul>
<h3 id="list.index"><a href="#list.index"
class="anchor"><code>list.index</code></a></h3>
<p>First index where a predicate is satisfied.</p>
<p>Type:</p>
<pre><code>(((&#39;a) -&gt; bool), [&#39;a]) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; bool</code>):
Predicate.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List.</li>
</ul>
<h3 id="list.indexed"><a href="#list.indexed"
class="anchor"><code>list.indexed</code></a></h3>
<p>Add indices to every element of a list, so that it can be accessed
with the notation <code>l[n]</code>.</p>
<p>Type:</p>
<pre><code>([&#39;a]) -&gt; [int * &#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.init"><a href="#list.init"
class="anchor"><code>list.init</code></a></h3>
<p>Initialize a list.</p>
<p>Type:</p>
<pre><code>(int, ((int) -&gt; &#39;a)) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>): Number of
elements in the list.</li>
<li><code>(unlabeled)</code> (of type <code>(int) -&gt; 'a</code>):
Function such that <code>f i</code> is the <code>i</code>th
element.</li>
</ul>
<h3 id="list.insert"><a href="#list.insert"
class="anchor"><code>list.insert</code></a></h3>
<p>Returns a copy of the given list with a new element inserted at a
given position. Raises <code>error.not_found</code> if the list has less
than <code>index</code> elements.</p>
<p>Type:</p>
<pre><code>(int, &#39;a, [&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>): Index to insert
at, starting at <code>0</code>.</li>
<li><code>(unlabeled)</code> (of type <code>'a</code>): Element to
insert</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List to insert
into.</li>
</ul>
<h3 id="list.is_empty"><a href="#list.is_empty"
class="anchor"><code>list.is_empty</code></a></h3>
<p>Determining whether a list is empty or not.</p>
<p>Type:</p>
<pre><code>([&#39;a]) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.iter"><a href="#list.iter"
class="anchor"><code>list.iter</code></a></h3>
<p>Call a function on every element of a list.</p>
<p>Type:</p>
<pre><code>(((&#39;a) -&gt; unit), [&#39;a]) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; unit</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.iterator"><a href="#list.iterator"
class="anchor"><code>list.iterator</code></a></h3>
<p>Create an iterator over the elements of a list.</p>
<p>Type:</p>
<pre><code>([&#39;a?]) -&gt; () -&gt; &#39;a?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a?]</code>)</li>
</ul>
<h3 id="list.iteri"><a href="#list.iteri"
class="anchor"><code>list.iteri</code></a></h3>
<p>Call a function on every element of a list, along with its index</p>
<p>Type:</p>
<pre><code>(((int, &#39;a) -&gt; unit), [&#39;a]) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>(int, 'a) -&gt; unit</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.last"><a href="#list.last"
class="anchor"><code>list.last</code></a></h3>
<p>Return the last element of a list.</p>
<p>Type:</p>
<pre><code>(?default : &#39;a?, [&#39;a]) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>'a?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.length"><a href="#list.length"
class="anchor"><code>list.length</code></a></h3>
<p>Compute the length of a list, i.e., the number of its elements.</p>
<p>Type:</p>
<pre><code>([&#39;a]) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.map"><a href="#list.map"
class="anchor"><code>list.map</code></a></h3>
<p>Map a function on every element of a list.</p>
<p>Type:</p>
<pre><code>(((&#39;a) -&gt; &#39;b), [&#39;a]) -&gt; [&#39;b]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; 'b</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.map.right"><a href="#list.map.right"
class="anchor"><code>list.map.right</code></a></h3>
<p>Map a function on every element of a list, starting from the right.
This function is tail-recursive.</p>
<p>Type:</p>
<pre><code>(((&#39;a) -&gt; &#39;b), [&#39;a]) -&gt; [&#39;b]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a) -&gt; 'b</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.mapi"><a href="#list.mapi"
class="anchor"><code>list.mapi</code></a></h3>
<p>Map a function on every element of a list, along with its index.</p>
<p>Type:</p>
<pre><code>(((int, &#39;a) -&gt; &#39;b), [&#39;a]) -&gt; [&#39;b]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>(int, 'a) -&gt; 'b</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.mem"><a href="#list.mem"
class="anchor"><code>list.mem</code></a></h3>
<p>Check whether an element belongs to a list.</p>
<p>Type:</p>
<pre><code>(&#39;a, [&#39;a]) -&gt; bool where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>['a] where 'a is an orderable type</code>)</li>
</ul>
<h3 id="list.nth"><a href="#list.nth"
class="anchor"><code>list.nth</code></a></h3>
<p>Get the n-th element of a list (the first element is at position 0),
or <code>default</code> if element does not exist.</p>
<p>Type:</p>
<pre><code>(?default : &#39;a?, [&#39;a], int) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>'a?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
<li><code>(unlabeled)</code> (of type <code>int</code>)</li>
</ul>
<h3 id="list.pick"><a href="#list.pick"
class="anchor"><code>list.pick</code></a></h3>
<p>Pick a random element in a list.</p>
<p>Type:</p>
<pre><code>(?default : &#39;a?, [&#39;a]) -&gt; &#39;a</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>'a?</code>, which defaults to
<code>null</code>): Value returned if the list is empty.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List in which
the element should be picked.</li>
</ul>
<h3 id="list.prefix"><a href="#list.prefix"
class="anchor"><code>list.prefix</code></a></h3>
<p>Compute the beginning of a list.</p>
<p>Type:</p>
<pre><code>(int, [&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>): Number of
elements in the returned list.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List whose
prefix should be taken.</li>
</ul>
<h3 id="list.randomize"><a href="#list.randomize"
class="anchor"><code>list.randomize</code></a></h3>
<p>Shuffle the content of a list.</p>
<p>Type:</p>
<pre><code>([&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.remove"><a href="#list.remove"
class="anchor"><code>list.remove</code></a></h3>
<p>Remove the first occurrence of a value from a list.</p>
<p>Type:</p>
<pre><code>(&#39;a, [&#39;a]) -&gt; [&#39;a] where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>['a] where 'a is an orderable type</code>)</li>
</ul>
<h3 id="list.rev"><a href="#list.rev"
class="anchor"><code>list.rev</code></a></h3>
<p>Revert list order.</p>
<p>Type:</p>
<pre><code>([&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="list.shuffle"><a href="#list.shuffle"
class="anchor"><code>list.shuffle</code></a></h3>
<p>Create a list with the same elements as another, but in a random
order.</p>
<p>Type:</p>
<pre><code>([&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List of which
the elements should be shuffled.</li>
</ul>
<h3 id="list.sort"><a href="#list.sort"
class="anchor"><code>list.sort</code></a></h3>
<p>Sort a list according to a comparison function.</p>
<p>Type:</p>
<pre><code>(((&#39;a, &#39;a) -&gt; int), [&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>('a, 'a) -&gt; int</code>):
Comparison function f such that f(x,y)&lt;0 when x&lt;y, f(x,y)=0 when
x=y, and f(x,y)&gt;0 when x&gt;y.</li>
<li><code>(unlabeled)</code> (of type <code>['a]</code>): List to
sort.</li>
</ul>
<h3 id="list.tl"><a href="#list.tl"
class="anchor"><code>list.tl</code></a></h3>
<p>Return the list without its first element.</p>
<p>Type:</p>
<pre><code>([&#39;a]) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>['a]</code>)</li>
</ul>
<h3 id="null.find"><a href="#null.find"
class="anchor"><code>null.find</code></a></h3>
<p>Find the first element of a list for which the image of the function
is not <code>null</code>. Raises <code>error.not_found</code> if not
element is found and no default value was specified.</p>
<p>Type:</p>
<pre><code>(?default : &#39;a??, ((&#39;b) -&gt; &#39;a?), [&#39;b]) -&gt; &#39;a?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>'a??</code>, which defaults to
<code>null</code>): Returned value when no element is found.</li>
<li><code>(unlabeled)</code> (of type <code>('b) -&gt; 'a?</code>):
Function.</li>
<li><code>(unlabeled)</code> (of type <code>['b]</code>): List.</li>
</ul>
<h2 id="list."><a href="#list." class="anchor">List.</a></h2>
<h3 id="list.make"><a href="#list.make"
class="anchor"><code>list.make</code></a></h3>
<p>Create a list with given length, filled with given element.</p>
<p>Type:</p>
<pre><code>(int, &#39;a) -&gt; [&#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>): Number of
elements in the list.</li>
<li><code>(unlabeled)</code> (of type <code>'a</code>): Element to fill
the list with.</li>
</ul>
<h2 id="math"><a href="#math" class="anchor">Math</a></h2>
<h3 id="section-8"><a href="#section-8"
class="anchor"><code>*</code></a></h3>
<p>Multiplication of numbers.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; &#39;a where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h3 id="section-9"><a href="#section-9"
class="anchor"><code>+</code></a></h3>
<p>Addition of numbers.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; &#39;a where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h3 id="section-10"><a href="#section-10"
class="anchor"><code>-</code></a></h3>
<p>Subtraction of numbers.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; &#39;a where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h3 id="section-11"><a href="#section-11"
class="anchor"><code>/</code></a></h3>
<p>Division of numbers.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; &#39;a where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h3 id="abs"><a href="#abs" class="anchor"><code>abs</code></a></h3>
<p>Absolute value.</p>
<p>Type:</p>
<pre><code>(&#39;a) -&gt; &#39;a where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h3 id="acos"><a href="#acos" class="anchor"><code>acos</code></a></h3>
<p>Arc cosine. The argument must fall within the range [-1.0, 1.0].
Result is in radians and is between 0.0 and pi.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="asin"><a href="#asin" class="anchor"><code>asin</code></a></h3>
<p>Arc sine. The argument must fall within the range [-1.0, 1.0]. Result
is in radians and is between -pi/2 and pi/2.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="atan"><a href="#atan" class="anchor"><code>atan</code></a></h3>
<p>Arc tangent. Result is in radians and is between -pi/2 and pi/2.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="bool_of_float"><a href="#bool_of_float"
class="anchor"><code>bool_of_float</code></a></h3>
<p>Convert a float to a bool.</p>
<p>Type:</p>
<pre><code>(float) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="bool_of_int"><a href="#bool_of_int"
class="anchor"><code>bool_of_int</code></a></h3>
<p>Convert an int to a bool.</p>
<p>Type:</p>
<pre><code>(int) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>)</li>
</ul>
<h3 id="cos"><a href="#cos" class="anchor"><code>cos</code></a></h3>
<p>Cosine. Argument is in radians.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="cosh"><a href="#cosh" class="anchor"><code>cosh</code></a></h3>
<p>Hyperbolic cosine. Argument is in radians.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="db_of_lin"><a href="#db_of_lin"
class="anchor"><code>dB_of_lin</code></a></h3>
<p>Convert linear scale into decibels.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="exp"><a href="#exp" class="anchor"><code>exp</code></a></h3>
<p>Exponential.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="float"><a href="#float"
class="anchor"><code>float</code></a></h3>
<p>Convert a number to a float.</p>
<p>Type:</p>
<pre><code>(&#39;a) -&gt; float where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h3 id="float_of_int"><a href="#float_of_int"
class="anchor"><code>float_of_int</code></a></h3>
<p>Convert an int to a float.</p>
<p>Type:</p>
<pre><code>(int) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>)</li>
</ul>
<h3 id="infinity"><a href="#infinity"
class="anchor"><code>infinity</code></a></h3>
<p>Float representation of infinity.</p>
<p>Type:</p>
<pre><code>float</code></pre>
<p>Arguments:</p>
<h3 id="int"><a href="#int" class="anchor"><code>int</code></a></h3>
<p>Convert a number to an integer.</p>
<p>Type:</p>
<pre><code>(&#39;a) -&gt; int where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h3 id="int_of_float"><a href="#int_of_float"
class="anchor"><code>int_of_float</code></a></h3>
<p>Convert a float to a int.</p>
<p>Type:</p>
<pre><code>(float) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="lin_of_db"><a href="#lin_of_db"
class="anchor"><code>lin_of_dB</code></a></h3>
<p>Convert decibels into linear scale.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="ln"><a href="#ln" class="anchor"><code>ln</code></a></h3>
<p>Natural logarithm.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="log10"><a href="#log10"
class="anchor"><code>log10</code></a></h3>
<p>Base 10 logarithm.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="lsl"><a href="#lsl" class="anchor"><code>lsl</code></a></h3>
<p>Logical shift left.</p>
<p>Type:</p>
<pre><code>(int, int) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>): Number to
shift.</li>
<li><code>(unlabeled)</code> (of type <code>int</code>): Number of bits
to shift.</li>
</ul>
<h3 id="lsr"><a href="#lsr" class="anchor"><code>lsr</code></a></h3>
<p>Logical shift right.</p>
<p>Type:</p>
<pre><code>(int, int) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>): Number to
shift.</li>
<li><code>(unlabeled)</code> (of type <code>int</code>): Number of bits
to shift.</li>
</ul>
<h3 id="max"><a href="#max" class="anchor"><code>max</code></a></h3>
<p>Compute the maximum of two values.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; &#39;a where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
</ul>
<h3 id="max_int"><a href="#max_int"
class="anchor"><code>max_int</code></a></h3>
<p>Maximal representable integer.</p>
<p>Type:</p>
<pre><code>int</code></pre>
<p>Arguments:</p>
<h3 id="min"><a href="#min" class="anchor"><code>min</code></a></h3>
<p>Compute the minimum of two values.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; &#39;a where &#39;a is an orderable type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is an orderable type</code>)</li>
</ul>
<h3 id="min_int"><a href="#min_int"
class="anchor"><code>min_int</code></a></h3>
<p>Minimal representable integer.</p>
<p>Type:</p>
<pre><code>int</code></pre>
<p>Arguments:</p>
<h3 id="mkfade"><a href="#mkfade"
class="anchor"><code>mkfade</code></a></h3>
<p>Make a fade function based on a source’s clock.</p>
<p>Type:</p>
<pre><code>(?type : string, ?start : float, ?stop : float,
 ?duration : float, ?on_done : (() -&gt; unit), source(&#39;a)) -&gt;
() -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>type</code> (of type <code>string</code>, which defaults to
<code>"lin"</code>): Fade shape. One of: “sin”, “exp”, “log”, “lin”</li>
<li><code>start</code> (of type <code>float</code>, which defaults to
<code>0.</code>): Start value.</li>
<li><code>stop</code> (of type <code>float</code>, which defaults to
<code>1.</code>): Stop value.</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Duration in seconds.</li>
<li><code>on_done</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Function to execute when the fade
is finished</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="mod"><a href="#mod" class="anchor"><code>mod</code></a></h3>
<p>Remainder of division of numbers.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; &#39;a where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h3 id="nan"><a href="#nan" class="anchor"><code>nan</code></a></h3>
<p>A special floating-point value denoting the result of an undefined
operation such as 0.0 /. 0.0. Stands for ‘not a number’. Any
floating-point operation with nan as argument returns nan as result. As
for floating-point comparisons, <code>==</code>, <code>&lt;</code>,
<code>&lt;=</code>, <code>&gt;</code> and <code>&gt;=</code> return
<code>false</code> and <code>!=</code> returns <code>true</code> if one
or both of their arguments is <code>nan</code>.</p>
<p>Type:</p>
<pre><code>float</code></pre>
<p>Arguments:</p>
<h3 id="pow"><a href="#pow" class="anchor"><code>pow</code></a></h3>
<p>Exponentiation of numbers.</p>
<p>Type:</p>
<pre><code>(&#39;a, &#39;a) -&gt; &#39;a where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h3 id="random.float"><a href="#random.float"
class="anchor"><code>random.float</code></a></h3>
<p>Generate a random value between <code>min</code> (included) and
<code>max</code> (excluded).</p>
<p>Type:</p>
<pre><code>(?min : float, ?max : float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>min</code> (of type <code>float</code>, which defaults to
<code>0.</code>)</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>1.</code>)</li>
</ul>
<h3 id="random.int"><a href="#random.int"
class="anchor"><code>random.int</code></a></h3>
<p>Generate a random value between <code>min</code> (included) and
<code>max</code> (excluded).</p>
<p>Type:</p>
<pre><code>(?min : int, ?max : int) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>min</code> (of type <code>int</code>, which defaults to
<code>-536870911</code>)</li>
<li><code>max</code> (of type <code>int</code>, which defaults to
<code>536870912</code>)</li>
</ul>
<h3 id="sin"><a href="#sin" class="anchor"><code>sin</code></a></h3>
<p>Sine. Argument is in radians.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="sinh"><a href="#sinh" class="anchor"><code>sinh</code></a></h3>
<p>Hyperbolic sine. Argument is in radians.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="sqrt"><a href="#sqrt" class="anchor"><code>sqrt</code></a></h3>
<p>Square root.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="tan"><a href="#tan" class="anchor"><code>tan</code></a></h3>
<p>Tangent. Argument is in radians.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="tanh"><a href="#tanh" class="anchor"><code>tanh</code></a></h3>
<p>Hyperbolic tangent. Argument is in radians.</p>
<p>Type:</p>
<pre><code>(float) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="section-12"><a href="#section-12"
class="anchor"><code>~-</code></a></h3>
<p>Returns the opposite of its argument.</p>
<p>Type:</p>
<pre><code>(&#39;a) -&gt; &#39;a where &#39;a is a number type</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>anything that is a number type</code>)</li>
</ul>
<h2 id="output"><a href="#output" class="anchor">Output</a></h2>
<h3 id="output-1"><a href="#output-1"
class="anchor"><code>output</code></a></h3>
<p>Output a stream using the default operator. The input source does not
need to be infallible, blank will just be played during failures.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool, source(audio=pcm(&#39;A), video=none,
 midi=&#39;B)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Allow the child source to fail, in which case the
output will be (temporarily) stopped.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Automatically start outputting whenever possible. If
<code>true</code>, an infallible (normal) output will start outputting
as soon as it is created, and a fallible output will (re)start as soon
as its source becomes available for streaming.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('A), video=none, midi='B)</code>): Source to
play.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.audio_video"><a href="#output.audio_video"
class="anchor"><code>output.audio_video</code></a></h3>
<p>Output a stream with audio and video using the default operator. The
input source does not need to be infallible, blank will just be played
during failures.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool, source(audio=pcm(&#39;A), video=canvas(&#39;a),
 midi=&#39;B)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Allow the child source to fail, in which case the
output will be (temporarily) stopped.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Automatically start outputting whenever possible. If
<code>true</code>, an infallible (normal) output will start outputting
as soon as it is created, and a fallible output will (re)start as soon
as its source becomes available for streaming.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('A), video=canvas('a), midi='B)</code>): Source
to play.</li>
</ul>
<h3 id="output.file.dash.ffmpeg"><a href="#output.file.dash.ffmpeg"
class="anchor"><code>output.file.dash.ffmpeg</code></a></h3>
<p>Output an MPEG-DASH playlist using ffmpeg</p>
<p>Type:</p>
<pre><code>(?id : string?, ?flush : bool, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?reopen_delay : float, ?reopen_on_metadata : bool,
 ?reopen_when : (() -&gt; bool), ?start : bool,
 ?playlist : string, directory : &#39;a,
 source(audio=pcm(stereo), video=canvas, midi=none)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>flush</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Perform a flush after each write.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be (temporarily) stopped.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
stops.</li>
<li><code>reopen_delay</code> (of type <code>float</code>, which
defaults to <code>120.</code>): Prevent re-opening within that delay, in
seconds.</li>
<li><code>reopen_on_metadata</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Re-open on every new metadata
information.</li>
<li><code>reopen_when</code> (of type <code>() -&gt; bool</code>, which
defaults to <code>{false}</code>): When should the output be
re-opened.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Automatically start outputting whenever possible. If
true, an infallible (normal) output will start outputting as soon as it
is created, and a fallible output will (re)start as soon as its source
becomes available for streaming.</li>
<li><code>playlist</code> (of type <code>string</code>, which defaults
to <code>"stream.mpd"</code>): Playlist name</li>
<li><code>directory</code> (of type <code>'a</code>): Directory to write
to</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video=canvas, midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reopen</code> (of type <code>() -&gt; unit</code>): Reopen the
pipe.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.video"><a href="#output.video"
class="anchor"><code>output.video</code></a></h3>
<p>Output a video stream using the default operator. The input source
does not need to be infallible, blank will just be played during
failures.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool, source(audio=&#39;a, video=canvas(&#39;b),
 midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Allow the child source to fail, in which case the
output will be (temporarily) stopped.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Automatically start outputting whenever possible. If
<code>true</code>, an infallible (normal) output will start outputting
as soon as it is created, and a fallible output will (re)start as soon
as its source becomes available for streaming.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video=canvas('b), midi='c)</code>): Source to
play.</li>
</ul>
<h3 id="output.youtube.live.hls"><a href="#output.youtube.live.hls"
class="anchor"><code>output.youtube.live.hls</code></a></h3>
<p>Stream to youtube using HLS.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?stream_info : (string * 
                 {
                   bandwidth : int,
                   codecs : string,
                   extname : string,
                   video_size : (int * int)?
                 })?,
 ?segment_duration : float, ?segments : int,
 ?segments_overhead : int, ?start : bool, ?url : string,
 key : string, encoder : format(&#39;a), source(&#39;a)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be (temporarily) stopped.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
stops.</li>
<li><code>stream_info</code> (of type
<code>(string *   {    bandwidth : int,    codecs : string,    extname : string,    video_size : (int * int)?  })?</code>,
which defaults to <code>null</code>): Informations about the stream (see
<code>output.file.hls</code> for details).</li>
<li><code>segment_duration</code> (of type <code>float</code>, which
defaults to <code>2.</code>): Segment duration (in seconds).</li>
<li><code>segments</code> (of type <code>int</code>, which defaults to
<code>4</code>): Number of segments per playlist.</li>
<li><code>segments_overhead</code> (of type <code>int</code>, which
defaults to <code>4</code>): Number of segments to keep after they have
been featured in the live playlist.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Automatically start outputting whenever possible. If
true, an infallible (normal) output will start outputting as soon as it
is created, and a fallible output will (re)start as soon as its source
becomes available for streaming.</li>
<li><code>url</code> (of type <code>string</code>, which defaults to
<code>"https://a.upload.youtube.com/http_upload_hls"</code>): HLS URL to
stream to</li>
<li><code>key</code> (of type <code>string</code>): Your secret youtube
key</li>
<li><code>encoder</code> (of type <code>format('a)</code>): Encoder to
use (most likely a <code>%ffmpeg</code> encoder)</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.youtube.live.rtmp"><a href="#output.youtube.live.rtmp"
class="anchor"><code>output.youtube.live.rtmp</code></a></h3>
<p>Stream to youtube using RTMP.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool, ?url : string, key : string,
 encoder : format(&#39;a), source(&#39;a)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be (temporarily) stopped.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when outputting
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Automatically start outputting whenever possible. If
true, an infallible (normal) output will start outputting as soon as it
is created, and a fallible output will (re)start as soon as its source
becomes available for streaming.</li>
<li><code>url</code> (of type <code>string</code>, which defaults to
<code>"rtmp://a.rtmp.youtube.com/live2"</code>): RTMP URL to stream
to</li>
<li><code>key</code> (of type <code>string</code>): Your secret youtube
key</li>
<li><code>encoder</code> (of type <code>format('a)</code>): Encoder to
use (most likely a <code>%ffmpeg</code> encoder)</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-audio-processing"><a href="#source-audio-processing"
class="anchor">Source / Audio Processing</a></h2>
<h3 id="add"><a href="#add" class="anchor"><code>add</code></a></h3>
<p>Mix sources, with optional normalization. Only relay metadata from
the first source that is effectively summed.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?normalize : {bool}, ?power : {bool},
 ?weights : [{float}],
 [source(audio=internal(&#39;a), video=internal(&#39;b),
  midi=internal(&#39;c))]) -&gt; source(audio=internal(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>normalize</code> (of type <code>{bool}</code>, which defaults
to <code>true</code>): Divide by the sum of weights of ready sources (or
by the number of ready sources if weights are not specified).</li>
<li><code>power</code> (of type <code>{bool}</code>, which defaults to
<code>false</code>): Perform constant-power normalization.</li>
<li><code>weights</code> (of type <code>[{float}]</code>, which defaults
to <code>[]</code>): Relative weight of the sources in the sum. The
empty list stands for the homogeneous distribution. These are used as
amplification coefficients if we are not normalizing.</li>
<li><code>(unlabeled)</code> (of type
<code>[source(audio=internal('a), video=internal('b),  midi=internal('c))]</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="amplify"><a href="#amplify"
class="anchor"><code>amplify</code></a></h3>
<p>Multiply the amplitude of the signal.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?override : string?, {float},
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>override</code> (of type <code>string?</code>, which defaults
to <code>"liq_amplify"</code>): Specify the name of a metadata field
that, when present and well-formed, overrides the amplification factor
for the current track. Well-formed values are floats in decimal notation
(e.g. <code>0.7</code>) which are taken as normal/linear multiplicative
factors; values can be passed in decibels with the suffix
<code>dB</code> (e.g. <code>-8.2 dB</code>, but the spaces do not
matter).</li>
<li><code>(unlabeled)</code> (of type <code>{float}</code>):
Multiplicative factor.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="audio.map"><a href="#audio.map"
class="anchor"><code>audio.map</code></a></h3>
<p>Map a function to all audio samples. This is SLOW!</p>
<p>Type:</p>
<pre><code>(?id : string?, ((float) -&gt; float), source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>(float) -&gt; float</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>This function is experimental.</p>
<h3 id="clip"><a href="#clip" class="anchor"><code>clip</code></a></h3>
<p>Clip samples, i.e. ensure that all values are between -1 and 1:
values lower than -1 become -1 and values higher than 1 become 1.
<code>nan</code> values become <code>0.</code></p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="comb"><a href="#comb" class="anchor"><code>comb</code></a></h3>
<p>Comb filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?delay : float, ?feedback : {float},
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>delay</code> (of type <code>float</code>, which defaults to
<code>0.001</code>): Delay in seconds.</li>
<li><code>feedback</code> (of type <code>{float}</code>, which defaults
to <code>-6.</code>): Feedback coefficient in dB.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="compand"><a href="#compand"
class="anchor"><code>compand</code></a></h3>
<p>Compand the signal.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?mu : float, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>mu</code> (of type <code>float</code>, which defaults to
<code>1.</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="compress"><a href="#compress"
class="anchor"><code>compress</code></a></h3>
<p>Compress the signal.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?attack : {float}, ?gain : {float},
 ?knee : {float}, ?lookahead : {float},
 ?pre_gain : {float}, ?ratio : {float},
 ?release : {float}, ?threshold : {float},
 ?track_sensitive : bool, ?wet : {float},
 ?window : {float}, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>attack</code> (of type <code>{float}</code>, which defaults to
<code>50.</code>): Attack time (ms).</li>
<li><code>gain</code> (of type <code>{float}</code>, which defaults to
<code>0.</code>): Post-amplification (dB).</li>
<li><code>knee</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Knee width (dB).</li>
<li><code>lookahead</code> (of type <code>{float}</code>, which defaults
to <code>0.</code>): Lookahead (ms).</li>
<li><code>pre_gain</code> (of type <code>{float}</code>, which defaults
to <code>0.</code>): Pre-amplification (dB).</li>
<li><code>ratio</code> (of type <code>{float}</code>, which defaults to
<code>2.</code>): Gain reduction ratio (reduction is ratio:1).</li>
<li><code>release</code> (of type <code>{float}</code>, which defaults
to <code>400.</code>): Release time (ms).</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>-10.</code>): Threshold level (dB).</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Reset on every track.</li>
<li><code>wet</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): How much of input sound to output (between 0 and 1, 0
means only original sound, 1 means only compressed sound).</li>
<li><code>window</code> (of type <code>{float}</code>, which defaults to
<code>0.</code>): RMS window length (second). <code>0.</code> means peak
mode.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>gain</code> (of type <code>() -&gt; float</code>): Gain
(dB).</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>): RMS or peak
power (linear).</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="compress.exponential"><a href="#compress.exponential"
class="anchor"><code>compress.exponential</code></a></h3>
<p>Exponential compressor.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?mu : float, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>mu</code> (of type <code>float</code>, which defaults to
<code>2.</code>): Exponential compression factor, typically greater than
1.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="compress.old"><a href="#compress.old"
class="anchor"><code>compress.old</code></a></h3>
<p>Compress the signal.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?attack : {float}, ?gain : {float},
 ?knee : {float}, ?ratio : {float}, ?release : {float},
 ?threshold : {float}, ?window : float,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>attack</code> (of type <code>{float}</code>, which defaults to
<code>100.</code>): Attack time (ms).</li>
<li><code>gain</code> (of type <code>{float}</code>, which defaults to
<code>0.</code>): Additional gain (dB).</li>
<li><code>knee</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Knee radius (dB).</li>
<li><code>ratio</code> (of type <code>{float}</code>, which defaults to
<code>2.</code>): Gain reduction ratio (n:1).</li>
<li><code>release</code> (of type <code>{float}</code>, which defaults
to <code>400.</code>): Release time (ms).</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>-10.</code>): Threshold level (dB).</li>
<li><code>window</code> (of type <code>float</code>, which defaults to
<code>0.1</code>): Window for computing RMS (in sec).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="cross"><a href="#cross"
class="anchor"><code>cross</code></a></h3>
<p>Cross operator, allowing the composition of the <em>n</em> last
seconds of a track with the beginning of the next track, using a
transition function depending on the relative power of the signal before
and after the end of track.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?active : bool, ?conservative : bool,
 ?duration : {float}, ?minimum : float,
 ?override_duration : string, ?width : float,
 ((
   {
     db_level : float,
     metadata : [string * string],
     source : source(audio=pcm(&#39;a),
     video=&#39;b,
     midi=&#39;c)
   }, 
   {
     db_level : float,
     metadata : [string * string],
     source : source(audio=pcm(&#39;a),
     video=&#39;b,
     midi=&#39;c)
   }) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)),
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>active</code> (of type <code>bool</code>, which defaults to
<code>false</code>): The active behavior is to keep ticking the child’s
clock when the operator is not streaming. Otherwise the child’s clock is
strictly based on what is streamed off the child source, which results
in time-dependent active sources to be frozen when that source is
stopped.</li>
<li><code>conservative</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Do not trust remaining time estimations, always
buffering data in advance. This avoids being tricked by skips, either
manual or caused by blank.skip().</li>
<li><code>duration</code> (of type <code>{float}</code>, which defaults
to <code>5.</code>): Duration (in seconds) of buffered data from each
track that is used to compute the transition between tracks.</li>
<li><code>minimum</code> (of type <code>float</code>, which defaults to
<code>-1.</code>): Minimum duration (in sec.) for a cross: If the track
ends without any warning (e.g. in case of skip) there may not be enough
data for a decent composition. Set to 0. to avoid having transitions
after skips, or more to avoid transitions on short tracks. With a
negative default, transitions always occur.</li>
<li><code>override_duration</code> (of type <code>string</code>, which
defaults to <code>"liq_cross_duration"</code>): Metadata field which, if
present and containing a float, overrides the ‘duration’ parameter for
current track.</li>
<li><code>width</code> (of type <code>float</code>, which defaults to
<code>2.</code>): Width of the power computation window.</li>
<li><code>(unlabeled)</code> (of type
<code>(  {    db_level : float,    metadata : [string * string],    source : source(audio=pcm('a),    video='b,    midi='c)  },   {    db_level : float,    metadata : [string * string],    source : source(audio=pcm('a),    video='b,    midi='c)  }) -&gt; source(audio=pcm('a), video='b, midi='c)</code>):
Transition function, composing from the end of a track and the next
track. The sources corresponding to the two tracks are decorated with
fields indicating the power of the signal before and after the
transition (<code>power</code>), and the metadata
(<code>metadata</code>).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="delay_line"><a href="#delay_line"
class="anchor"><code>delay_line</code></a></h3>
<p>Delay the audio signal by a given amount of time.</p>
<p>Type:</p>
<pre><code>(?id : string?, {float}, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type <code>{float}</code>): Duration of
the delay in seconds.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="dtmf.detect"><a href="#dtmf.detect"
class="anchor"><code>dtmf.detect</code></a></h3>
<p>Detect DTMF tones.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?bands : int, ?debug : {bool},
 ?duration : {float}, ?smoothing : {float},
 ?threshold : {float}, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c), ((string) -&gt; unit)) -&gt; source(audio=pcm(&#39;a),
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>bands</code> (of type <code>int</code>, which defaults to
<code>1024</code>): Number of frequency bands.</li>
<li><code>debug</code> (of type <code>{bool}</code>, which defaults to
<code>false</code>): Show internal values on standard output in order to
fine-tune parameters: band number, band frequency, detected intensity
and smoothed intensity.</li>
<li><code>duration</code> (of type <code>{float}</code>, which defaults
to <code>0.05</code>): Duration for detecting a tone.</li>
<li><code>smoothing</code> (of type <code>{float}</code>, which defaults
to <code>0.01</code>): Smoothing time (in seconds) for band indensity
(the higher, the less sensitive we are to local variations, but the more
time we take to detect a band).</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>50.</code>): Threshold for detecting a band.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>): Source on which
DTMF tones should be detected.</li>
<li><code>(unlabeled)</code> (of type <code>(string) -&gt; unit</code>):
Function called with detected key as argument.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="echo"><a href="#echo" class="anchor"><code>echo</code></a></h3>
<p>Add echo.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?delay : {float}, ?feedback : {float},
 ?ping_pong : bool, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>delay</code> (of type <code>{float}</code>, which defaults to
<code>0.5</code>): Delay in seconds.</li>
<li><code>feedback</code> (of type <code>{float}</code>, which defaults
to <code>-6.</code>): Feedback coefficient in dB (negative).</li>
<li><code>ping_pong</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Use ping-pong delay.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.filter.audio.output"><a
href="#ffmpeg.filter.audio.output"
class="anchor"><code>ffmpeg.filter.audio.output</code></a></h3>
<p>Return an audio source from a filter’s output</p>
<p>Type:</p>
<pre><code>(?id : string?, ?pass_metadata : bool,
 ffmpeg.filter.graph, ffmpeg.filter.audio) -&gt;
source(audio=ffmpeg.audio.raw(&#39;a), video=none, midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>pass_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Pass ffmpeg stream metadata to
liquidsoap</li>
<li><code>(unlabeled)</code> (of type
<code>ffmpeg.filter.graph</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>ffmpeg.filter.audio</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter-1"><a href="#filter-1"
class="anchor"><code>filter</code></a></h3>
<p>Perform several kinds of filtering on the signal. Only frequencies
below the sampling rate / 4 (generally 10 kHz) are handled well for the
<code>freq</code> parameter.</p>
<p>Type:</p>
<pre><code>(?id : string?, freq : {float}, mode : string,
 ?q : {float}, ?wetness : {float}, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>freq</code> (of type <code>{float}</code>): Characteristic
frequency of the filter.</li>
<li><code>mode</code> (of type <code>string</code>): Available modes are
‘low’ (for low-pass filter), ‘high’ (for high-pass filter), ‘band’ (for
band-pass filter) and ‘notch’ (for notch / band-stop / band-rejection
filter).</li>
<li><code>q</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>)</li>
<li><code>wetness</code> (of type <code>{float}</code>, which defaults
to <code>1.</code>): How much of the original signal should be added (1.
means only filtered and 0. means only original signal).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.fir"><a href="#filter.fir"
class="anchor"><code>filter.fir</code></a></h3>
<p>Low-pass FIR filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, beta : float, ?coeffs : int,
 frequency : float, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>beta</code> (of type <code>float</code>): Beta should range
between 0 and 1.</li>
<li><code>coeffs</code> (of type <code>int</code>, which defaults to
<code>255</code>): Number of coefficients</li>
<li><code>frequency</code> (of type <code>float</code>): Corner
frequency in Hz (frequency at which the response is 0.5, that is -6
dB).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.butterworth.bandpass"><a
href="#filter.iir.butterworth.bandpass"
class="anchor"><code>filter.iir.butterworth.bandpass</code></a></h3>
<p>IIR filter</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency1 : float, frequency2 : float,
 ?order : int, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency1</code> (of type <code>float</code>): First corner
frequency</li>
<li><code>frequency2</code> (of type <code>float</code>): Second corner
frequency</li>
<li><code>order</code> (of type <code>int</code>, which defaults to
<code>4</code>): Filter order</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.butterworth.bandstop"><a
href="#filter.iir.butterworth.bandstop"
class="anchor"><code>filter.iir.butterworth.bandstop</code></a></h3>
<p>IIR filter</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency1 : float, frequency2 : float,
 ?order : int, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency1</code> (of type <code>float</code>): First corner
frequency</li>
<li><code>frequency2</code> (of type <code>float</code>): Second corner
frequency</li>
<li><code>order</code> (of type <code>int</code>, which defaults to
<code>4</code>): Filter order</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.butterworth.high"><a
href="#filter.iir.butterworth.high"
class="anchor"><code>filter.iir.butterworth.high</code></a></h3>
<p>IIR filter</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : float, ?order : int,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>float</code>): Corner
frequency</li>
<li><code>order</code> (of type <code>int</code>, which defaults to
<code>4</code>): Filter order</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.butterworth.low"><a
href="#filter.iir.butterworth.low"
class="anchor"><code>filter.iir.butterworth.low</code></a></h3>
<p>IIR filter</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : float, ?order : int,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>float</code>): Corner
frequency</li>
<li><code>order</code> (of type <code>int</code>, which defaults to
<code>4</code>): Filter order</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.eq.allpass"><a href="#filter.iir.eq.allpass"
class="anchor"><code>filter.iir.eq.allpass</code></a></h3>
<p>All-pass biquad filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?bandwidth : {float},
 frequency : {float}, source(audio=&#39;a, video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>bandwidth</code> (of type <code>{float}</code>, which defaults
to <code>0.333333333333</code>): Bandwidth (in octaves)</li>
<li><code>frequency</code> (of type <code>{float}</code>): Center
frequency</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.eq.bandpass"><a href="#filter.iir.eq.bandpass"
class="anchor"><code>filter.iir.eq.bandpass</code></a></h3>
<p>Band-pass biquad filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : {float}, ?q : {float},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>{float}</code>): Center
frequency</li>
<li><code>q</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Q</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.eq.high"><a href="#filter.iir.eq.high"
class="anchor"><code>filter.iir.eq.high</code></a></h3>
<p>High-pass biquad filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : {float}, ?q : {float},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>{float}</code>): Corner
frequency</li>
<li><code>q</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Q</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.eq.highshelf"><a href="#filter.iir.eq.highshelf"
class="anchor"><code>filter.iir.eq.highshelf</code></a></h3>
<p>High shelf biquad filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : {float}, ?slope : {float},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>{float}</code>): Center
frequency</li>
<li><code>slope</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Shelf slope (in dB/octave)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.eq.low"><a href="#filter.iir.eq.low"
class="anchor"><code>filter.iir.eq.low</code></a></h3>
<p>Low-pass biquad filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : {float}, ?q : {float},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>{float}</code>): Corner
frequency</li>
<li><code>q</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Q</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.eq.lowshelf"><a href="#filter.iir.eq.lowshelf"
class="anchor"><code>filter.iir.eq.lowshelf</code></a></h3>
<p>Low shelf biquad filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : {float}, ?slope : {float},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>{float}</code>): Corner
frequency</li>
<li><code>slope</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Shelf slope (dB/octave)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.eq.notch"><a href="#filter.iir.eq.notch"
class="anchor"><code>filter.iir.eq.notch</code></a></h3>
<p>Band-pass biquad filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : {float}, ?q : {float},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>{float}</code>): Center
frequency</li>
<li><code>q</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Q</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.eq.peak"><a href="#filter.iir.eq.peak"
class="anchor"><code>filter.iir.eq.peak</code></a></h3>
<p>Peak EQ biquad filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : {float}, ?gain : {float},
 ?q : {float}, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>{float}</code>): Center
frequency</li>
<li><code>gain</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Gain (in dB)</li>
<li><code>q</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Q</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.resonator.allpass"><a
href="#filter.iir.resonator.allpass"
class="anchor"><code>filter.iir.resonator.allpass</code></a></h3>
<p>IIR filter</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : float, ?q : float,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>float</code>): Corner
frequency</li>
<li><code>q</code> (of type <code>float</code>, which defaults to
<code>60.</code>): Quality factor</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.resonator.bandpass"><a
href="#filter.iir.resonator.bandpass"
class="anchor"><code>filter.iir.resonator.bandpass</code></a></h3>
<p>IIR filter</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : float, ?q : float,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>float</code>): Corner
frequency</li>
<li><code>q</code> (of type <code>float</code>, which defaults to
<code>60.</code>): Quality factor</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.resonator.bandstop"><a
href="#filter.iir.resonator.bandstop"
class="anchor"><code>filter.iir.resonator.bandstop</code></a></h3>
<p>IIR filter</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : float, ?q : float,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>float</code>): Corner
frequency</li>
<li><code>q</code> (of type <code>float</code>, which defaults to
<code>60.</code>): Quality factor</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.rc"><a href="#filter.rc"
class="anchor"><code>filter.rc</code></a></h3>
<p>First-order filter (RC filter).</p>
<p>Type:</p>
<pre><code>(?id : string?, frequency : {float}, mode : string,
 ?wetness : {float}, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>frequency</code> (of type <code>{float}</code>): Cutoff
frequency.</li>
<li><code>mode</code> (of type <code>string</code>): Available modes are
‘low’ (for low-pass filter), ‘high’ (for high-pass filter).</li>
<li><code>wetness</code> (of type <code>{float}</code>, which defaults
to <code>1.</code>): How much of the original signal should be added (1.
means only filtered and 0. means only original signal).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="flanger"><a href="#flanger"
class="anchor"><code>flanger</code></a></h3>
<p>Flanger effect.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?delay : float, ?feedback : {float},
 ?freq : {float}, ?phase : {float}, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>delay</code> (of type <code>float</code>, which defaults to
<code>0.001</code>): Delay in seconds.</li>
<li><code>feedback</code> (of type <code>{float}</code>, which defaults
to <code>0.</code>): Feedback coefficient in dB.</li>
<li><code>freq</code> (of type <code>{float}</code>, which defaults to
<code>0.5</code>): Frequency in Hz.</li>
<li><code>phase</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Phase difference between channels in radians.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="gate"><a href="#gate" class="anchor"><code>gate</code></a></h3>
<p>Reduce the volume when the stream is silent (typically in order to
avoid low intensity noise).</p>
<p>Type:</p>
<pre><code>(?id : string?, ?attack : {float}, ?hold : {float},
 ?range : {float}, ?release : {float},
 ?threshold : {float}, ?window : {float},
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>attack</code> (of type <code>{float}</code>, which defaults to
<code>10.</code>): Time to fully open the gate (ms).</li>
<li><code>hold</code> (of type <code>{float}</code>, which defaults to
<code>1000.</code>): Minimum amount of time the gate stays open
(ms).</li>
<li><code>range</code> (of type <code>{float}</code>, which defaults to
<code>-30.</code>): Difference between closed and open level (dB).</li>
<li><code>release</code> (of type <code>{float}</code>, which defaults
to <code>2000.</code>): Time to fully close the gate (ms).</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>-30.</code>): Threshold at which the gate will open (dB).</li>
<li><code>window</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Duration for computing peak (ms).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>gate</code> (of type <code>() -&gt; float</code>): Position of
the gate (0. means closed, 1. means open).</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="normalize.old"><a href="#normalize.old"
class="anchor"><code>normalize.old</code></a></h3>
<p>Normalize the signal. Dynamic normalization of the signal is
sometimes the only option, and can make a listening experience much
nicer. However, its dynamic aspect implies some limitations which can go
as far as creating saturation in some extreme cases. If possible,
consider using some track-based normalization techniques such as those
based on replay gain. See the documentation for more details. This is
the implementation provided in Liquidsoap &lt; 2.0. A new, better and
more customizable one is now given in <code>normalize</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?gain_max : {float}, ?gain_min : {float},
 ?k_down : {float}, ?k_up : {float}, ?target : {float},
 ?threshold : {float}, ?track_sensitive : bool,
 ?window : float, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>gain_max</code> (of type <code>{float}</code>, which defaults
to <code>6.</code>): Maximal gain value (dB).</li>
<li><code>gain_min</code> (of type <code>{float}</code>, which defaults
to <code>-6.</code>): Minimal gain value (dB).</li>
<li><code>k_down</code> (of type <code>{float}</code>, which defaults to
<code>0.1</code>): Coefficient when the power must go down (between 0
and 1, slowest to fastest).</li>
<li><code>k_up</code> (of type <code>{float}</code>, which defaults to
<code>0.005</code>): Coefficient when the power must go up (between 0
and 1, slowest to fastest).</li>
<li><code>target</code> (of type <code>{float}</code>, which defaults to
<code>-13.</code>): Desired RMS (dB).</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>-40.</code>): Minimal RMS for activaing gain control (dB).</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Reset values on every track.</li>
<li><code>window</code> (of type <code>float</code>, which defaults to
<code>0.1</code>): Duration of the window used to compute the current
RMS power (second).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>gain</code> (of type <code>() -&gt; float</code>): Current
amplification coefficient.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>): Current
RMS.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="peak"><a href="#peak" class="anchor"><code>peak</code></a></h3>
<p>Get current peak volume of the source. Returns the source with a
method <code>peak</code> to compute the current peak volume of the
source, with <code>0.0 &lt;= peak volume &lt;= 1.0</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : {float},
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>{float}</code>, which defaults
to <code>0.5</code>): Duration of the window (in seconds). A value &lt;=
0, means that computation should not be performed.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>peak</code> (of type <code>() -&gt; float</code>): Current
value for the peak volume.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="peak.stereo"><a href="#peak.stereo"
class="anchor"><code>peak.stereo</code></a></h3>
<p>Get current peak volume of the source. Returns the source with a
method <code>peak</code> to compute the current peak volume of the
source, with <code>0.0 &lt;= peak volume &lt;= 1.0</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : {float},
 source(audio=pcm(stereo), video=&#39;a, midi=&#39;b)) -&gt;
source(audio=pcm(stereo), video=&#39;a, midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>{float}</code>, which defaults
to <code>0.5</code>): Duration of the window (in seconds). A value &lt;=
0, means that computation should not be performed.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video='a, midi='b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>peak</code> (of type <code>() -&gt; float * float</code>):
Current value for the peak volume.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="pipe"><a href="#pipe" class="anchor"><code>pipe</code></a></h3>
<p>Process audio signal through a given process stdin/stdout.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer : float, ?data_length : int?,
 ?log_overfull : bool, ?max : float, process : string,
 ?replay_delay : float?, ?restart : bool,
 ?restart_on_error : bool, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>1.</code>): Duration of the pre-buffered data.</li>
<li><code>data_length</code> (of type <code>int?</code>, which defaults
to <code>null</code>): Length passed in the WAV data chunk. Data is
streamed so no the consuming program should process it as it comes. Some
program operate better when this value is set to <code>0</code>, some
other when it is set to the maximum length allowed by the WAV specs. Use
any negative value to set to maximum length.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum duration of the buffered data.</li>
<li><code>process</code> (of type <code>string</code>): Process used to
pipe data to.</li>
<li><code>replay_delay</code> (of type <code>float?</code>, which
defaults to <code>null</code>): Replay track marks and metadata from the
input source on the output after a given delay. If <code>null</code>
(default) close and flush the process on each track and metadata to get
an exact timing. This parameter is typically used when integrating with
<code>stereotool</code>.</li>
<li><code>restart</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Restart process when exited.</li>
<li><code>restart_on_error</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Restart process when exited with
error.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="rms"><a href="#rms" class="anchor"><code>rms</code></a></h3>
<p>Get current RMS volume of the source. Returns the source with a
method <code>rms</code> to compute the current RMS volume of the source,
with <code>0.0 &lt;= RMS volume &lt;= 1.0</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : {float},
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>{float}</code>, which defaults
to <code>0.5</code>): Duration of the window (in seconds). A value &lt;=
0, means that computation should not be performed.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>): Current
value for the RMS volume.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="rms.stereo"><a href="#rms.stereo"
class="anchor"><code>rms.stereo</code></a></h3>
<p>Get current RMS volume of the source. Returns the source with a
method <code>rms</code> to compute the current RMS volume of the source,
with <code>0.0 &lt;= RMS volume &lt;= 1.0</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : {float},
 source(audio=pcm(stereo), video=&#39;a, midi=&#39;b)) -&gt;
source(audio=pcm(stereo), video=&#39;a, midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>{float}</code>, which defaults
to <code>0.5</code>): Duration of the window (in seconds). A value &lt;=
0, means that computation should not be performed.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video='a, midi='b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float * float</code>):
Current value for the RMS volume.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="sine.detect"><a href="#sine.detect"
class="anchor"><code>sine.detect</code></a></h3>
<p>Detect sine waves.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?bands : int, ?debug : {bool},
 ?duration : {float}, ?smoothing : {float},
 ?threshold : {float}, [float], source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c), ((float) -&gt; unit)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>bands</code> (of type <code>int</code>, which defaults to
<code>1024</code>): Number of frequency bands.</li>
<li><code>debug</code> (of type <code>{bool}</code>, which defaults to
<code>false</code>): Show internal values on standard output in order to
fine-tune parameters: band number, band frequency, detected intensity
and smoothed intensity.</li>
<li><code>duration</code> (of type <code>{float}</code>, which defaults
to <code>0.5</code>): Duration for detecting a tone.</li>
<li><code>smoothing</code> (of type <code>{float}</code>, which defaults
to <code>0.01</code>): Smoothing time (in seconds) for band indensity
(the higher, the less sensitive we are to local variations, but the more
time we take to detect a band).</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>50.</code>): Threshold for detecting a band.</li>
<li><code>(unlabeled)</code> (of type <code>[float]</code>): List of
frequencies to detect.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>): Source on which
sines should be detected.</li>
<li><code>(unlabeled)</code> (of type <code>(float) -&gt; unit</code>):
Function called with detected frequency as argument.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="soundtouch"><a href="#soundtouch"
class="anchor"><code>soundtouch</code></a></h3>
<p>Change the rate, the tempo or the pitch of the sound.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?pitch : {float}, ?rate : {float},
 ?tempo : {float}, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>pitch</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>)</li>
<li><code>rate</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>)</li>
<li><code>tempo</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>This function is experimental.</p>
<h3 id="stereo.ms.decode"><a href="#stereo.ms.decode"
class="anchor"><code>stereo.ms.decode</code></a></h3>
<p>Decode mid+side stereo (M/S) to left+right stereo.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?width : float, source(audio=pcm(stereo),
 video=&#39;a, midi=&#39;b)) -&gt; source(audio=pcm(stereo),
video=&#39;a, midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>width</code> (of type <code>float</code>, which defaults to
<code>1.</code>): Width of the stereo field.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video='a, midi='b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="stereo.ms.encode"><a href="#stereo.ms.encode"
class="anchor"><code>stereo.ms.encode</code></a></h3>
<p>Encode left+right stereo to mid+side stereo (M/S).</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(stereo), video=&#39;a,
 midi=&#39;b)) -&gt; source(audio=pcm(stereo), video=&#39;a,
midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video='a, midi='b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="stereo.pan"><a href="#stereo.pan"
class="anchor"><code>stereo.pan</code></a></h3>
<p>Pan a stereo sound.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?field : {float}, ?pan : {float},
 source(audio=pcm(stereo), video=&#39;a, midi=&#39;b)) -&gt;
source(audio=pcm(stereo), video=&#39;a, midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>field</code> (of type <code>{float}</code>, which defaults to
<code>90.</code>): Field width in degrees (between 0 and 90).</li>
<li><code>pan</code> (of type <code>{float}</code>, which defaults to
<code>0.</code>): Pan ranges between -1 and 1.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video='a, midi='b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="stereo.width"><a href="#stereo.width"
class="anchor"><code>stereo.width</code></a></h3>
<p>Spacializer which allows controlling the width of the signal.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?{float}, source(audio=pcm(stereo),
 video=&#39;a, midi=&#39;b)) -&gt; source(audio=pcm(stereo),
video=&#39;a, midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type <code>{float}</code>, which
defaults to <code>0.</code>): Width of the signal (-1: mono, 0.:
original, 1.: wide stereo).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video='a, midi='b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="stretch"><a href="#stretch"
class="anchor"><code>stretch</code></a></h3>
<p>Slow down or accelerate an audio stream by stretching (sounds lower)
or squeezing it (sounds higher).</p>
<p>Type:</p>
<pre><code>(?id : string?, ratio : {float}, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>ratio</code> (of type <code>{float}</code>): A value higher
than 1 means slowing down.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-conversion"><a href="#source-conversion"
class="anchor">Source / Conversion</a></h2>
<h3 id="audio_to_stereo"><a href="#audio_to_stereo"
class="anchor"><code>audio_to_stereo</code></a></h3>
<p>Convert any pcm audio source into a stereo source.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(stereo), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="drop_audio"><a href="#drop_audio"
class="anchor"><code>drop_audio</code></a></h3>
<p>Drop all audio content of a stream.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=none, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="drop_midi"><a href="#drop_midi"
class="anchor"><code>drop_midi</code></a></h3>
<p>Drop all midi content of a stream.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="drop_video"><a href="#drop_video"
class="anchor"><code>drop_video</code></a></h3>
<p>Drop all video content of a stream.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=none, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.decode.audio"><a href="#ffmpeg.decode.audio"
class="anchor"><code>ffmpeg.decode.audio</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=ffmpeg.audio.copy(&#39;a),
 video=none, midi=none)) -&gt; source(audio=pcm(&#39;b),
video=none, midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=ffmpeg.audio.copy('a), video=none, midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.decode.audio_video"><a href="#ffmpeg.decode.audio_video"
class="anchor"><code>ffmpeg.decode.audio_video</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=ffmpeg.audio.copy(&#39;a),
 video=ffmpeg.video.copy(&#39;b), midi=none)) -&gt;
source(audio=pcm(&#39;c), video=canvas(&#39;d), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=ffmpeg.audio.copy('a), video=ffmpeg.video.copy('b), midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.decode.video"><a href="#ffmpeg.decode.video"
class="anchor"><code>ffmpeg.decode.video</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=none,
 video=ffmpeg.video.copy(&#39;a), midi=none)) -&gt;
source(audio=none, video=canvas(&#39;b), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=none, video=ffmpeg.video.copy('a), midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.encode.audio"><a href="#ffmpeg.encode.audio"
class="anchor"><code>ffmpeg.encode.audio</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, format(audio=pcm(&#39;a), video=none,
 midi=none), source(audio=pcm(&#39;a), video=none,
 midi=none)) -&gt; source(audio=ffmpeg.audio.copy(&#39;b),
video=none, midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio=pcm('a), video=none, midi=none)</code>): Encoding
format.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=none, midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.encode.audio_video"><a href="#ffmpeg.encode.audio_video"
class="anchor"><code>ffmpeg.encode.audio_video</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, format(audio=pcm(&#39;a), video=canvas(&#39;b),
 midi=none), source(audio=pcm(&#39;a), video=canvas(&#39;b),
 midi=none)) -&gt; source(audio=ffmpeg.audio.copy(&#39;c),
video=ffmpeg.video.copy(&#39;d), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio=pcm('a), video=canvas('b), midi=none)</code>):
Encoding format.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=canvas('b), midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.encode.video"><a href="#ffmpeg.encode.video"
class="anchor"><code>ffmpeg.encode.video</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, format(audio=none, video=canvas(&#39;a),
 midi=none), source(audio=none, video=canvas(&#39;a),
 midi=none)) -&gt; source(audio=none,
video=ffmpeg.video.copy(&#39;b), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio=none, video=canvas('a), midi=none)</code>): Encoding
format.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=none, video=canvas('a), midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.raw.decode.audio"><a href="#ffmpeg.raw.decode.audio"
class="anchor"><code>ffmpeg.raw.decode.audio</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=ffmpeg.audio.raw(&#39;a),
 video=none, midi=none)) -&gt; source(audio=pcm(&#39;b),
video=none, midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=ffmpeg.audio.raw('a), video=none, midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.raw.decode.audio_video"><a
href="#ffmpeg.raw.decode.audio_video"
class="anchor"><code>ffmpeg.raw.decode.audio_video</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=ffmpeg.audio.raw(&#39;a),
 video=ffmpeg.video.raw(&#39;b), midi=none)) -&gt;
source(audio=pcm(&#39;c), video=canvas(&#39;d), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=ffmpeg.audio.raw('a), video=ffmpeg.video.raw('b), midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.raw.decode.video"><a href="#ffmpeg.raw.decode.video"
class="anchor"><code>ffmpeg.raw.decode.video</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=none,
 video=ffmpeg.video.raw(&#39;a), midi=none)) -&gt;
source(audio=none, video=canvas(&#39;b), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=none, video=ffmpeg.video.raw('a), midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.raw.encode.audio"><a href="#ffmpeg.raw.encode.audio"
class="anchor"><code>ffmpeg.raw.encode.audio</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, format(audio=ffmpeg.audio.raw(&#39;a),
 video=none, midi=none), source(audio=pcm(&#39;b),
 video=none, midi=none)) -&gt;
source(audio=ffmpeg.audio.raw(&#39;a), video=none, midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio=ffmpeg.audio.raw('a), video=none, midi=none)</code>):
Encoding format.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('b), video=none, midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.raw.encode.audio_video"><a
href="#ffmpeg.raw.encode.audio_video"
class="anchor"><code>ffmpeg.raw.encode.audio_video</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, format(audio=ffmpeg.audio.raw(&#39;a),
 video=ffmpeg.video.raw(&#39;b), midi=none),
 source(audio=pcm(&#39;c), video=canvas(&#39;d), midi=none)) -&gt;
source(audio=ffmpeg.audio.raw(&#39;a),
video=ffmpeg.video.raw(&#39;b), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio=ffmpeg.audio.raw('a), video=ffmpeg.video.raw('b), midi=none)</code>):
Encoding format.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('c), video=canvas('d), midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="ffmpeg.raw.encode.video"><a href="#ffmpeg.raw.encode.video"
class="anchor"><code>ffmpeg.raw.encode.video</code></a></h3>
<p>Convert a source’s content</p>
<p>Type:</p>
<pre><code>(?id : string?, format(audio=none,
 video=ffmpeg.video.raw(&#39;a), midi=none),
 source(audio=none, video=canvas(&#39;b), midi=none)) -&gt;
source(audio=none, video=ffmpeg.video.raw(&#39;a), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio=none, video=ffmpeg.video.raw('a), midi=none)</code>):
Encoding format.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=none, video=canvas('b), midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="mean"><a href="#mean" class="anchor"><code>mean</code></a></h3>
<p>Produce mono audio by taking the mean of all audio channels.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?normalize : bool, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(mono), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>normalize</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Divide the output volume by the number of
channels.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>): Source whose
mean should be computed.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="mux_audio"><a href="#mux_audio"
class="anchor"><code>mux_audio</code></a></h3>
<p>Mux an audio stream into an audio-free stream. Track marks and
metadata are taken from both sources.</p>
<p>Type:</p>
<pre><code>(?id : string?, audio : source(audio=&#39;a, video=none,
 midi=none), source(audio=none, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>audio</code> (of type
<code>source(audio='a, video=none, midi=none)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=none, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="mux_video"><a href="#mux_video"
class="anchor"><code>mux_video</code></a></h3>
<p>Add video channels to a stream. Track marks and metadata are taken
from both sources.</p>
<p>Type:</p>
<pre><code>(?id : string?, video : source(audio=none, video=&#39;a,
 midi=none), source(audio=&#39;b, video=none, midi=&#39;c)) -&gt;
source(audio=&#39;b, video=&#39;a, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>video</code> (of type
<code>source(audio=none, video='a, midi=none)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='b, video=none, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="swap"><a href="#swap" class="anchor"><code>swap</code></a></h3>
<p>Swap two channels of a stereo source.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(stereo), video=&#39;a,
 midi=&#39;b)) -&gt; source(audio=pcm(stereo), video=&#39;a,
midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video='a, midi='b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-conversions"><a href="#source-conversions"
class="anchor">Source / Conversions</a></h2>
<h3 id="stereo.left"><a href="#stereo.left"
class="anchor"><code>stereo.left</code></a></h3>
<p>Extract the left channel of a stereo source</p>
<p>Type:</p>
<pre><code>(source(audio=pcm(stereo), video=&#39;a, midi=&#39;b)) -&gt;
source(audio=pcm(mono), video=&#39;a, midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video='a, midi='b)</code>): Source to
extract from</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="stereo.right"><a href="#stereo.right"
class="anchor"><code>stereo.right</code></a></h3>
<p>Extract the right channel of a stereo source</p>
<p>Type:</p>
<pre><code>(source(audio=pcm(stereo), video=&#39;a, midi=&#39;b)) -&gt;
source(audio=pcm(mono), video=&#39;a, midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(stereo), video='a, midi='b)</code>): Source to
extract from</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-ffmpeg-filter"><a href="#source-ffmpeg-filter"
class="anchor">Source / FFmpeg Filter</a></h2>
<h2 id="source-input"><a href="#source-input" class="anchor">Source /
Input</a></h2>
<h3 id="blank"><a href="#blank"
class="anchor"><code>blank</code></a></h3>
<p>Produce silence and blank images.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float) -&gt;
source(audio=internal(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>-1.</code>): Duration of blank tracks in seconds, Negative value
means forever.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.alsa"><a href="#input.alsa"
class="anchor"><code>input.alsa</code></a></h3>
<p>Stream from an ALSA input device.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?bufferize : bool, ?clock_safe : bool,
 ?device : string, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>bufferize</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Bufferize input</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of a dedicated clock</li>
<li><code>device</code> (of type <code>string</code>, which defaults to
<code>"default"</code>): Alsa device to use</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the source to fail. If set to
<code>false</code>, <code>start</code> must be <code>true</code> and
<code>stop</code> method raises an error.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start input as soon as it is available.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.external.avi"><a href="#input.external.avi"
class="anchor"><code>input.external.avi</code></a></h3>
<p>Stream data from an external application.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer : float, ?log_overfull : bool,
 ?max : float, ?restart : bool, ?restart_on_error : bool,
 {string}) -&gt; source(audio=pcm(&#39;a), video=canvas(&#39;b),
midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>1.</code>): Duration of the pre-buffered data.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum duration of the buffered data.</li>
<li><code>restart</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Restart process when exited.</li>
<li><code>restart_on_error</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Restart process when exited with
error.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Command to
execute.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffer_length</code> (of type
<code>() -&gt; float * float * float</code>): Length of the buffer (in
seconds).</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>This function is experimental.</p>
<h3 id="input.external.rawaudio"><a href="#input.external.rawaudio"
class="anchor"><code>input.external.rawaudio</code></a></h3>
<p>Stream raw PCM data (interleaved signed 16 bits little endian
integers) from an external application.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer : float, ?channels : int,
 ?log_overfull : bool, ?max : float, ?restart : bool,
 ?restart_on_error : bool, ?samplerate : int, {string}) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>2.</code>): Duration of the pre-buffered data.</li>
<li><code>channels</code> (of type <code>int</code>, which defaults to
<code>2</code>): Number of channels.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum duration of the buffered data.</li>
<li><code>restart</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Restart process when exited.</li>
<li><code>restart_on_error</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Restart process when exited with
error.</li>
<li><code>samplerate</code> (of type <code>int</code>, which defaults to
<code>44100</code>): Samplerate.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Command to
execute.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.external.rawvideo"><a href="#input.external.rawvideo"
class="anchor"><code>input.external.rawvideo</code></a></h3>
<p>Stream data from an external application.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer : float, ?log_overfull : bool,
 ?max : float, ?restart : bool, ?restart_on_error : bool,
 {string}) -&gt; source(audio=&#39;a, video=canvas(&#39;b), midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>1.</code>): Duration of the pre-buffered data.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum duration of the buffered data.</li>
<li><code>restart</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Restart process when exited.</li>
<li><code>restart_on_error</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Restart process when exited with
error.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Command to
execute.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffer_length</code> (of type
<code>() -&gt; float * float * float</code>): Length of the buffer (in
seconds).</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>This function is experimental.</p>
<h3 id="input.external.wav"><a href="#input.external.wav"
class="anchor"><code>input.external.wav</code></a></h3>
<p>Stream WAV data from an external application.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer : float, ?log_overfull : bool,
 ?max : float, ?restart : bool, ?restart_on_error : bool,
 {string}) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>2.</code>): Duration of the pre-buffered data.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum duration of the buffered data.</li>
<li><code>restart</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Restart process when exited.</li>
<li><code>restart_on_error</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Restart process when exited with
error.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Command to
execute.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.ffmpeg"><a href="#input.ffmpeg"
class="anchor"><code>input.ffmpeg</code></a></h3>
<p>Create a stream using ffmpeg</p>
<p>Type:</p>
<pre><code>(?id : string?, ?clock_safe : bool, ?debug : bool,
 ?float_args : [string * float], ?format : string?,
 ?int_args : [string * int], ?log_overfull : bool,
 ?max_buffer : float, ?new_track_on_metadata : bool,
 ?on_connect : (() -&gt; unit),
 ?on_disconnect : (() -&gt; unit), ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?poll_delay : float,
 ?self_sync : bool, ?start : bool,
 ?string_args : [string * string], {string}) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>false</code>): Force the use of a dedicated clock</li>
<li><code>debug</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Run in debugging mode, not catching some
exceptions.</li>
<li><code>float_args</code> (of type <code>[string * float]</code>,
which defaults to <code>[]</code>)</li>
<li><code>format</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force a specific input format. Autodetected when
passed a null argument</li>
<li><code>int_args</code> (of type <code>[string * int]</code>, which
defaults to <code>[]</code>)</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max_buffer</code> (of type <code>float</code>, which defaults
to <code>5.</code>): Maximum uration of buffered data</li>
<li><code>new_track_on_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Treat new metadata as new track.</li>
<li><code>on_connect</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Function to execute when a source
is connected.</li>
<li><code>on_disconnect</code> (of type <code>() -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Function to excecute when a
source is disconnected</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
stops.</li>
<li><code>poll_delay</code> (of type <code>float</code>, which defaults
to <code>2.</code>): Polling delay when trying to connect to the
stream.</li>
<li><code>self_sync</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Should the source control its own timing? Set to
<code>true</code> if you are having synchronization issues. Should be
<code>false</code> for most typical cases.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start input as soon as it is available.</li>
<li><code>string_args</code> (of type <code>[string * string]</code>,
which defaults to <code>[]</code>)</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): URL to
decode.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffer_length</code> (of type <code>() -&gt; float</code>):
Get the buffer’s length in seconds.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set_url</code> (of type <code>({string}) -&gt; unit</code>):
Set the source’s url.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>status</code> (of type <code>() -&gt; string</code>): Return
the current status of the source, either “stopped” “starting” (polling
task is about to begin) “polling” (attempting to connect to the HTTP
stream), “connected <url>” (connected to <url>, buffering or playing
back the stream) or “stopping” (source is stopping).</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
<li><code>url</code> (of type <code>() -&gt; string</code>): Return the
source’s current url.</li>
</ul>
<h3 id="input.gstreamer.audio"><a href="#input.gstreamer.audio"
class="anchor"><code>input.gstreamer.audio</code></a></h3>
<p>Stream audio from a GStreamer pipeline.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?log_overfull : bool, ?max : float,
 ?on_error : ((string) -&gt; float), ?pipeline : {string},
 ?restart : bool) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum duration of the buffered data.</li>
<li><code>on_error</code> (of type <code>(string) -&gt; float</code>,
which defaults to <code>fun (_) -&gt; 3.</code>): Callback executed when
an error happens. The callback receives a string representation of the
error that occurred and returns a float. If returned value is positive,
connection will be tried again after this amount of time (in
seconds).</li>
<li><code>pipeline</code> (of type <code>{string}</code>, which defaults
to <code>"audiotestsrc"</code>): GStreamer pipeline to input from.</li>
<li><code>restart</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Restart input on end of stream event.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.gstreamer.audio_video"><a
href="#input.gstreamer.audio_video"
class="anchor"><code>input.gstreamer.audio_video</code></a></h3>
<p>Stream audio+video from a GStreamer pipeline.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?audio_pipeline : {string},
 ?log_overfull : bool, ?max : float,
 ?on_error : ((string) -&gt; float), ?pipeline : {string},
 ?restart : bool, ?video_pipeline : {string}) -&gt;
source(audio=pcm(stereo), video=canvas(&#39;a), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>audio_pipeline</code> (of type <code>{string}</code>, which
defaults to <code>"audiotestsrc"</code>): Audio pipeline to input
from.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum duration of the buffered data.</li>
<li><code>on_error</code> (of type <code>(string) -&gt; float</code>,
which defaults to <code>fun (_) -&gt; 3.</code>): Callback executed when
an error happens. The callback receives a string representation of the
error that occurred and returns a float. If returned value is positive,
connection will be tried again after this amount of time (in
seconds).</li>
<li><code>pipeline</code> (of type <code>{string}</code>, which defaults
to <code>""</code>): Main GStreamer pipeline.</li>
<li><code>restart</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Restart input on end of stream event.</li>
<li><code>video_pipeline</code> (of type <code>{string}</code>, which
defaults to <code>"videotestsrc"</code>): Video pipeline to input
from.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>pause</code> (of type <code>() -&gt; unit</code>): Pause
input.</li>
<li><code>play</code> (of type <code>() -&gt; unit</code>): Play
input.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>restart</code> (of type <code>() -&gt; unit</code>): Restart
input.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.gstreamer.video"><a href="#input.gstreamer.video"
class="anchor"><code>input.gstreamer.video</code></a></h3>
<p>Stream video from a GStreamer pipeline.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?log_overfull : bool, ?max : float,
 ?on_error : ((string) -&gt; float), ?pipeline : {string},
 ?restart : bool) -&gt; source(audio=&#39;a, video=canvas(&#39;b),
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum duration of the buffered data.</li>
<li><code>on_error</code> (of type <code>(string) -&gt; float</code>,
which defaults to <code>fun (_) -&gt; 3.</code>): Callback executed when
an error happens. The callback receives a string representation of the
error that occurred and returns a float. If returned value is positive,
connection will be tried again after this amount of time (in
seconds).</li>
<li><code>pipeline</code> (of type <code>{string}</code>, which defaults
to <code>"videotestsrc"</code>): GStreamer pipeline to input from.</li>
<li><code>restart</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Restart input on end of stream event.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.harbor"><a href="#input.harbor"
class="anchor"><code>input.harbor</code></a></h3>
<p>Create a source that receives a http/icecast stream and forwards it
as a stream.</p>
<p>Type:</p>
<pre><code>(?id : string?,
 ?auth : ((
           {
             address : string,
             password : string,
             user : string
           }) -&gt; bool)?,
 ?buffer : float, ?debug : bool, ?dumpfile : string?,
 ?icy : bool, ?icy_metadata_charset : string?,
 ?log_overfull : bool, ?logfile : string?, ?max : float,
 ?metadata_charset : string?,
 ?on_connect : (([string * string]) -&gt; unit),
 ?on_disconnect : (() -&gt; unit), ?password : string,
 ?port : int, ?replay_metadata : bool, ?timeout : float,
 ?user : string, string) -&gt; source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>auth</code> (of type
<code>(({address : string, password : string, user : string}) -&gt;  bool)?</code>,
which defaults to <code>null</code>): Authentication function. Receives
a record with: <code>user</code>, <code>password</code> and
<code>address</code> (client network address) and returns
<code>true</code> if the user should be granted access for this login.
Override any other method if used.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>12.</code>): Duration of the pre-buffered data. Default value is
set to make it possible to use <code>crossfade</code> transitions with
<code>input.harbor</code>. You might be able to reduce it but, in this
case, make sure to not use the operator with <code>crossfade</code> or
make sure that it has enough buffered data for it.</li>
<li><code>debug</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Run in debugging mode by not catching some
exceptions.</li>
<li><code>dumpfile</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Dump stream to file, for debugging purpose.
Disabled if null.</li>
<li><code>icy</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Enable ICY (shoutcast) protocol.</li>
<li><code>icy_metadata_charset</code> (of type <code>string?</code>,
which defaults to <code>null</code>): ICY (shoutcast) metadata charset.
Guessed if null. Default for shoutcast is ISO-8859-1. Set to that value
if all your clients send metadata using this charset and automatic
detection is not working for you.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>logfile</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Log buffer status to file, for debugging purpose.
Disabled if null.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Maximum duration of the buffered data.</li>
<li><code>metadata_charset</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Metadata charset for non-ICY (shoutcast)
source protocols. Guessed if null.</li>
<li><code>on_connect</code> (of type
<code>([string * string]) -&gt; unit</code>, which defaults to
<code>&lt;fun&gt;</code>): Function to execute when a source is
connected. Its receives the list of headers, of the form:
(<label>,<value>). All labels are lowercase.</li>
<li><code>on_disconnect</code> (of type <code>() -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Functions to execute when a
source is disconnected</li>
<li><code>password</code> (of type <code>string</code>, which defaults
to <code>"hackme"</code>): Source password.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8005</code>): Port used to connect to the source.</li>
<li><code>replay_metadata</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Replay last known metadata when
switching back to this source. This helps when source has dropped due to
temporary connection issues.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>30.</code>): Timeout for source connectionn.</li>
<li><code>user</code> (of type <code>string</code>, which defaults to
<code>"source"</code>): Source user.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Mountpoint
to look for.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffer_length</code> (of type <code>() -&gt; float</code>):
Length of the buffer (in seconds).</li>
<li><code>connected_client</code> (of type
<code>() -&gt; string?</code>): Returns the address of the client
currently connected, if there is one.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>status</code> (of type <code>() -&gt; string</code>): Current
status of the input.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Disconnect
the client currently connected to the harbor. Does nothing if no client
is connected.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.harbor.ssl"><a href="#input.harbor.ssl"
class="anchor"><code>input.harbor.ssl</code></a></h3>
<p>Retrieves the given https stream from the harbor.</p>
<p>Type:</p>
<pre><code>(?id : string?,
 ?auth : ((
           {
             address : string,
             password : string,
             user : string
           }) -&gt; bool)?,
 ?buffer : float, ?debug : bool, ?dumpfile : string?,
 ?icy : bool, ?icy_metadata_charset : string?,
 ?log_overfull : bool, ?logfile : string?, ?max : float,
 ?metadata_charset : string?,
 ?on_connect : (([string * string]) -&gt; unit),
 ?on_disconnect : (() -&gt; unit), ?password : string,
 ?port : int, ?replay_metadata : bool, ?timeout : float,
 ?user : string, string) -&gt; source(&#39;a)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>auth</code> (of type
<code>(({address : string, password : string, user : string}) -&gt;  bool)?</code>,
which defaults to <code>null</code>): Authentication function. Receives
a record with: <code>user</code>, <code>password</code> and
<code>address</code> (client network address) and returns
<code>true</code> if the user should be granted access for this login.
Override any other method if used.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>12.</code>): Duration of the pre-buffered data. Default value is
set to make it possible to use <code>crossfade</code> transitions with
<code>input.harbor</code>. You might be able to reduce it but, in this
case, make sure to not use the operator with <code>crossfade</code> or
make sure that it has enough buffered data for it.</li>
<li><code>debug</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Run in debugging mode by not catching some
exceptions.</li>
<li><code>dumpfile</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Dump stream to file, for debugging purpose.
Disabled if null.</li>
<li><code>icy</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Enable ICY (shoutcast) protocol.</li>
<li><code>icy_metadata_charset</code> (of type <code>string?</code>,
which defaults to <code>null</code>): ICY (shoutcast) metadata charset.
Guessed if null. Default for shoutcast is ISO-8859-1. Set to that value
if all your clients send metadata using this charset and automatic
detection is not working for you.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>logfile</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Log buffer status to file, for debugging purpose.
Disabled if null.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Maximum duration of the buffered data.</li>
<li><code>metadata_charset</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Metadata charset for non-ICY (shoutcast)
source protocols. Guessed if null.</li>
<li><code>on_connect</code> (of type
<code>([string * string]) -&gt; unit</code>, which defaults to
<code>&lt;fun&gt;</code>): Function to execute when a source is
connected. Its receives the list of headers, of the form:
(<label>,<value>). All labels are lowercase.</li>
<li><code>on_disconnect</code> (of type <code>() -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Functions to execute when a
source is disconnected</li>
<li><code>password</code> (of type <code>string</code>, which defaults
to <code>"hackme"</code>): Source password.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8005</code>): Port used to connect to the source.</li>
<li><code>replay_metadata</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Replay last known metadata when
switching back to this source. This helps when source has dropped due to
temporary connection issues.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>30.</code>): Timeout for source connectionn.</li>
<li><code>user</code> (of type <code>string</code>, which defaults to
<code>"source"</code>): Source user.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Mountpoint
to look for.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffer_length</code> (of type <code>() -&gt; float</code>):
Length of the buffer (in seconds).</li>
<li><code>connected_client</code> (of type
<code>() -&gt; string?</code>): Returns the address of the client
currently connected, if there is one.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>status</code> (of type <code>() -&gt; string</code>): Current
status of the input.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Disconnect
the client currently connected to the harbor. Does nothing if no client
is connected.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.hls"><a href="#input.hls"
class="anchor"><code>input.hls</code></a></h3>
<p>Play an HLS stream.</p>
<p>Type:</p>
<pre><code>(?id : string?, {string}) -&gt; source(audio=&#39;A, video=&#39;B,
midi=&#39;C)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Playlist
URI.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffer_length</code> (of type <code>() -&gt; float</code>):
Get the buffer’s length in seconds.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set_url</code> (of type <code>({string}) -&gt; unit</code>):
Set the source’s url.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>status</code> (of type <code>() -&gt; string</code>): Return
the current status of the source, either “stopped” “starting” (polling
task is about to begin) “polling” (attempting to connect to the HTTP
stream), “connected <url>” (connected to <url>, buffering or playing
back the stream) or “stopping” (source is stopping).</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
<li><code>url</code> (of type <code>() -&gt; string</code>): Return the
source’s current url.</li>
</ul>
<h3 id="input.hls.native"><a href="#input.hls.native"
class="anchor"><code>input.hls.native</code></a></h3>
<p>Play an HLS stream.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?reload : float, string) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>reload</code> (of type <code>float</code>, which defaults to
<code>10.</code>): How often (in seconds) the playlist should be
reloaded.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Playlist
URI.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>This function is experimental.</p>
<h3 id="input.http"><a href="#input.http"
class="anchor"><code>input.http</code></a></h3>
<p>Create a http stream using ffmpeg</p>
<p>Type:</p>
<pre><code>(?id : string?, ?clock_safe : bool, ?debug : bool,
 ?float_args : [string * float], ?format : string?,
 ?int_args : [string * int], ?log_overfull : bool,
 ?max_buffer : float, ?new_track_on_metadata : bool,
 ?on_connect : (([string * string]) -&gt; unit),
 ?on_disconnect : (() -&gt; unit), ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?poll_delay : float,
 ?self_sync : bool, ?start : bool,
 ?string_args : [string * string], ?timeout : float,
 ?user_agent : string, {string}) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>false</code>): Force the use of a dedicated clock</li>
<li><code>debug</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Run in debugging mode, not catching some
exceptions.</li>
<li><code>float_args</code> (of type <code>[string * float]</code>,
which defaults to <code>[]</code>)</li>
<li><code>format</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force a specific input format. Autodetected when
passed a null argument</li>
<li><code>int_args</code> (of type <code>[string * int]</code>, which
defaults to <code>[]</code>)</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max_buffer</code> (of type <code>float</code>, which defaults
to <code>5.</code>): Maximum uration of buffered data</li>
<li><code>new_track_on_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Treat new metadata as new track.</li>
<li><code>on_connect</code> (of type
<code>([string * string]) -&gt; unit</code>, which defaults to
<code>&lt;fun&gt;</code>): Function to execute when a source is
connected. Its receives the list of ICY-specific headers, if
available.</li>
<li><code>on_disconnect</code> (of type <code>() -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Function to excecute when a
source is disconnected</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
stops.</li>
<li><code>poll_delay</code> (of type <code>float</code>, which defaults
to <code>2.</code>): Polling delay when trying to connect to the
stream.</li>
<li><code>self_sync</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Should the source control its own timing? Set to
<code>true</code> if you are having synchronization issues. Should be
<code>false</code> for most typical cases.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start input as soon as it is available.</li>
<li><code>string_args</code> (of type <code>[string * string]</code>,
which defaults to <code>[]</code>)</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Timeout for source connection.</li>
<li><code>user_agent</code> (of type <code>string</code>, which defaults
to <code>"Liquidsoap/2.1.4 (Unix; OCaml 4.14.0)"</code>): User
agent.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): URL to
decode.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffer_length</code> (of type <code>() -&gt; float</code>):
Get the buffer’s length in seconds.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set_url</code> (of type <code>({string}) -&gt; unit</code>):
Set the source’s url.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>status</code> (of type <code>() -&gt; string</code>): Return
the current status of the source, either “stopped” “starting” (polling
task is about to begin) “polling” (attempting to connect to the HTTP
stream), “connected <url>” (connected to <url>, buffering or playing
back the stream) or “stopping” (source is stopping).</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
<li><code>url</code> (of type <code>() -&gt; string</code>): Return the
source’s current url.</li>
</ul>
<h3 id="input.jack"><a href="#input.jack"
class="anchor"><code>input.jack</code></a></h3>
<p>Get stream from jack.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer_size : int, ?clock_safe : bool,
 ?fallible : bool, ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?server : string,
 ?start : bool) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buffer_size</code> (of type <code>int</code>, which defaults
to <code>2</code>): Set buffer size, in frames. Must be &gt;= 1.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of a dedicated clock</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the source to fail. If set to
<code>false</code>, <code>start</code> must be <code>true</code> and
<code>stop</code> method raises an error.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
stops.</li>
<li><code>server</code> (of type <code>string</code>, which defaults to
<code>""</code>): Jack server to connect to.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start input as soon as it is available.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.keyboard.sdl"><a href="#input.keyboard.sdl"
class="anchor"><code>input.keyboard.sdl</code></a></h3>
<p>Play notes from the keyboard.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?velocity : float) -&gt; source(audio=&#39;a,
video=&#39;b, midi=midi(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>velocity</code> (of type <code>float</code>, which defaults to
<code>0.8</code>): Velocity of notes.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>This function is experimental.</p>
<h3 id="input.oss"><a href="#input.oss"
class="anchor"><code>input.oss</code></a></h3>
<p>Stream from an OSS input device.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?clock_safe : bool, ?device : string,
 ?fallible : bool, ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?start : bool) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of a dedicated clock</li>
<li><code>device</code> (of type <code>string</code>, which defaults to
<code>"/dev/dsp"</code>): OSS device to use.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the source to fail. If set to
<code>false</code>, <code>start</code> must be <code>true</code> and
<code>stop</code> method raises an error.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start input as soon as it is available.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.portaudio"><a href="#input.portaudio"
class="anchor"><code>input.portaudio</code></a></h3>
<p>Stream from a portaudio input device.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buflen : int, ?clock_safe : bool,
 ?device_id : int?, ?fallible : bool, ?latency : float?,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buflen</code> (of type <code>int</code>, which defaults to
<code>256</code>): Length of a buffer in samples.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of a dedicated clock</li>
<li><code>device_id</code> (of type <code>int?</code>, which defaults to
<code>null</code>): Device ID. Uses default device if
<code>null</code>.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the source to fail. If set to
<code>false</code>, <code>start</code> must be <code>true</code> and
<code>stop</code> method raises an error.</li>
<li><code>latency</code> (of type <code>float?</code>, which defaults to
<code>null</code>): Device latency. Only used when specifying device
ID.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start input as soon as it is available.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.pulseaudio"><a href="#input.pulseaudio"
class="anchor"><code>input.pulseaudio</code></a></h3>
<p>Stream from a pulseaudio input device.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?client : string, ?clock_safe : bool,
 ?clock_safe : bool, ?device : string, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>client</code> (of type <code>string</code>, which defaults to
<code>"liquidsoap"</code>)</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of a dedicated clock</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of the dedicated Pulseaudio
clock.</li>
<li><code>device</code> (of type <code>string</code>, which defaults to
<code>""</code>): Device to use. Uses default if set to ““.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the source to fail. If set to
<code>false</code>, <code>start</code> must be <code>true</code> and
<code>stop</code> method raises an error.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start input as soon as it is available.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.rtmp"><a href="#input.rtmp"
class="anchor"><code>input.rtmp</code></a></h3>
<p>Read an RTMP stream.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?max_buffer : float, ?listen : bool,
 {string}) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>max_buffer</code> (of type <code>float</code>, which defaults
to <code>5.</code>): Maximum data buffer in seconds</li>
<li><code>listen</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Act as a RTMP server and wait for incoming
connection</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): URL to
read RTMP from, in the form <code>rtmp://IP:PORT/ENDPOINT</code></li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffer_length</code> (of type <code>() -&gt; float</code>):
Get the buffer’s length in seconds.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set_url</code> (of type <code>({string}) -&gt; unit</code>):
Set the source’s url.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>status</code> (of type <code>() -&gt; string</code>): Return
the current status of the source, either “stopped” “starting” (polling
task is about to begin) “polling” (attempting to connect to the HTTP
stream), “connected <url>” (connected to <url>, buffering or playing
back the stream) or “stopping” (source is stopping).</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
<li><code>url</code> (of type <code>() -&gt; string</code>): Return the
source’s current url.</li>
</ul>
<h3 id="input.srt"><a href="#input.srt"
class="anchor"><code>input.srt</code></a></h3>
<p>Receive a SRT stream from a distant agent.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?bind_address : string,
 ?clock_safe : bool, ?connection_timeout : int?,
 ?content_type : string, ?dump : string, ?host : string,
 ?log_overfull : bool, ?max : float, ?messageapi : bool,
 ?mode : string, ?on_connect : (() -&gt; unit),
 ?on_disconnect : (() -&gt; unit), ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?payload_size : int,
 ?port : int, ?read_timeout : int?, ?start : bool,
 ?stats_interval : int?, ?write_timeout : int?) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>bind_address</code> (of type <code>string</code>, which
defaults to <code>"0.0.0.0"</code>): Address to bind on the local
machine. Used only in listener mode</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of a dedicated clock</li>
<li><code>connection_timeout</code> (of type <code>int?</code>, which
defaults to <code>null</code>): Timeout, in milliseconds, after which
initial connection operations are aborted if no data was received,
indefinite if <code>null</code>. Only used in caller mode.</li>
<li><code>content_type</code> (of type <code>string</code>, which
defaults to <code>"application/ffmpeg"</code>): Content-Type (mime type)
used to find a decoder for the input stream.</li>
<li><code>dump</code> (of type <code>string</code>, which defaults to
<code>""</code>): Dump received data to the given file for debugging.
Unused is empty.</li>
<li><code>host</code> (of type <code>string</code>, which defaults to
<code>"localhost"</code>): Address to connect to. Used only in caller
mode.</li>
<li><code>log_overfull</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log when the source’s buffer is overfull.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum duration of the buffered data.</li>
<li><code>messageapi</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Use message api</li>
<li><code>mode</code> (of type <code>string</code>, which defaults to
<code>"listener"</code>): Mode to operate on. One of:
<code>"listener"</code> (waits for connection to come in) or
<code>"caller"</code> (initiate connection to a remote server)</li>
<li><code>on_connect</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Function to execute when
connected.</li>
<li><code>on_disconnect</code> (of type <code>() -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Function to execute when
disconnected</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when input
stops.</li>
<li><code>payload_size</code> (of type <code>int</code>, which defaults
to <code>1316</code>): Payload size.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port to bind on the local machine (listener mode) or
to connect to (caller mode). The term <code>port</code> as used in SRT
is occasionally identical to the term <code>UDP port</code>. However SRT
offers more flexibility than UDP because it manages ports as its own
resources. For example, one port may be shared between various
services.</li>
<li><code>read_timeout</code> (of type <code>int?</code>, which defaults
to <code>3000</code>): Timeout, in milliseconds, after which read
operations are aborted if no data was received, indefinite if
<code>null</code>.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start input as soon as it is available.</li>
<li><code>stats_interval</code> (of type <code>int?</code>, which
defaults to <code>null</code>): Interval used to collect internal stats
in milliseconds</li>
<li><code>write_timeout</code> (of type <code>int?</code>, which
defaults to <code>3000</code>): Timeout, in milliseconds, after which
write operations are aborted if no data was received, indefinite if
<code>null</code>.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stats</code> (of type
<code>() -&gt;  {   byteAvailRcvBuf : int,   byteAvailSndBuf : int,   byteMSS : int,   byteRcvBuf : int,   byteRcvDrop : int,   byteRcvDropTotal : int,   byteRcvUndecrypt : int,   byteRcvUndecryptTotal : int,   byteRecv : int,   byteRecvTotal : int,   byteRetrans : int,   byteRetransTotal : int,   byteSent : int,   byteSentTotal : int,   byteSndBuf : int,   byteSndDrop : int,   byteSndDropTotal : int,   mbpsBandwidth : float,   mbpsMaxBW : float,   mbpsRecvRate : float,   mbpsSendRate : float,   msRTT : float,   msRcvBuf : int,   msRcvTsbPdDelay : int,   msSndBuf : int,   msSndTsbPdDelay : int,   msTimeStamp : int,   pktCongestionWindow : int,   pktFlightSize : int,   pktFlowWindow : int,   pktRcvAvgBelatedTime : float,   pktRcvBelated : int,   pktRcvBuf : int,   pktRcvDrop : int,   pktRcvDropTotal : int,   pktRcvFilterExtra : int,   pktRcvFilterExtraTotal : int,   pktRcvFilterLoss : int,   pktRcvFilterLossTotal : int,   pktRcvFilterSupply : int,   pktRcvFilterSupplyTotal : int,   pktRcvLoss : int,   pktRcvLossTotal : int,   pktRcvRetrans : int,   pktRcvUndecrypt : int,   pktRcvUndecryptTotal : int,   pktRecv : int,   pktRecvACK : int,   pktRecvACKTotal : int,   pktRecvNAK : int,   pktRecvNAKTotal : int,   pktRecvTotal : int,   pktReorderDistance : int,   pktRetrans : int,   pktRetransTotal : int,   pktSent : int,   pktSentACK : int,   pktSentACKTotal : int,   pktSentNAK : int,   pktSentNAKTotal : int,   pktSentTotal : int,   pktSndBuf : int,   pktSndDrop : int,   pktSndDropTotal : int,   pktSndFilterExtra : int,   pktSndFilterExtraTotal : int,   pktSndLoss : int,   pktSndLossTotal : int,   usPktSndPeriod : float,   usSndDuration : int,   usSndDurationTotal : int}</code>):
Statistics.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="input.v4l2"><a href="#input.v4l2"
class="anchor"><code>input.v4l2</code></a></h3>
<p>Stream from a video4linux2 input device, such as a webcam.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?max_buffer : float, ?device : string) -&gt;
source(audio=none, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>max_buffer</code> (of type <code>float</code>, which defaults
to <code>0.5</code>): Maximum data buffer in seconds</li>
<li><code>device</code> (of type <code>string</code>, which defaults to
<code>"/dev/video0"</code>): V4L2 device to use.</li>
</ul>
<h3 id="native.request.dynamic"><a href="#native.request.dynamic"
class="anchor"><code>native.request.dynamic</code></a></h3>
<p>Play request dynamically created by a given function.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?available : {bool}, ?prefetch : int,
 ?retry_delay : {float}, ?timeout : float,
 (() -&gt; request?)) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>available</code> (of type <code>{bool}</code>, which defaults
to <code>true</code>): Whether some new requests are available (when set
to false, it stops after current playing request).</li>
<li><code>prefetch</code> (of type <code>int</code>, which defaults to
<code>1</code>): How many requests should be queued in advance.</li>
<li><code>retry_delay</code> (of type <code>{float}</code>, which
defaults to <code>0.1</code>): Retry after a given time (in seconds)
when callback returns <code>null</code>.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Timeout (in sec.) for a single download.</li>
<li><code>(unlabeled)</code> (of type
<code>() -&gt; request?</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(request) -&gt; bool</code>)</li>
<li><code>current</code> (of type <code>() -&gt; request?</code>)</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>fetch</code> (of type <code>() -&gt; bool</code>)</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>queue</code> (of type <code>() -&gt; [request]</code>)</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set</code> (of type
<code>(source(audio='A, video='B, midi='C)) -&gt; unit</code>): Set the
source.</li>
<li><code>set_queue</code> (of type
<code>([request]) -&gt; unit</code>)</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="noise"><a href="#noise"
class="anchor"><code>noise</code></a></h3>
<p>Generate audio white noise.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float?) -&gt;
source(audio=internal(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>): Duration in seconds (<code>null</code> means
infinite).</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="playlist"><a href="#playlist"
class="anchor"><code>playlist</code></a></h3>
<p>Read a playlist or a directory and play all files.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?check_next : ((request) -&gt; bool)?,
 ?prefetch : int, ?loop : bool, ?mime_type : string?,
 ?mode : string, ?native : bool,
 ?on_reload : ((string) -&gt; unit), ?prefix : string,
 ?reload : int, ?reload_mode : string, ?timeout : float,
 string) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>check_next</code> (of type
<code>((request) -&gt; bool)?</code>, which defaults to
<code>null</code>): Function used to filter next tracks. A candidate
track is only validated if the function returns true on it. The function
is called before resolution, hence metadata will only be available for
requests corresponding to local files. This is typically used to avoid
repetitions, but be careful: if the function rejects all attempts, the
playlist will enter into a consuming loop and stop playing
anything.</li>
<li><code>prefetch</code> (of type <code>int</code>, which defaults to
<code>1</code>): How many requests should be queued in advance.</li>
<li><code>loop</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Loop on the playlist.</li>
<li><code>mime_type</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Default MIME type for the playlist.
<code>null</code> means automatic detection.</li>
<li><code>mode</code> (of type <code>string</code>, which defaults to
<code>"randomize"</code>): Play the files in the playlist either in the
order (“normal” mode), or shuffle the playlist each time it is loaded,
and play it in this order for a whole round (“randomize” mode), or pick
a random file in the playlist each time (“random” mode).</li>
<li><code>native</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Use native implementation.</li>
<li><code>on_reload</code> (of type <code>(string) -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Callback called after
playlist has reloaded.</li>
<li><code>prefix</code> (of type <code>string</code>, which defaults to
<code>""</code>): Add a constant prefix to all requests. Useful for
passing extra information using annotate, or for resolution through a
particular protocol, such as replaygain.</li>
<li><code>reload</code> (of type <code>int</code>, which defaults to
<code>0</code>): Amount of time (in seconds or rounds), when applicable,
before which the playlist is reloaded; 0 means never.</li>
<li><code>reload_mode</code> (of type <code>string</code>, which
defaults to <code>"seconds"</code>): Unit of the reload parameter,
either “never” (never reload the playlist), “rounds”, “seconds” or
“watch” (reload the file whenever it is changed).</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Timeout (in sec.) for a single download.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Playlist
URI.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(request) -&gt; bool</code>): Add a
request to the queue. Requests are resolved before being added. Returns
<code>true</code> if the request was successfully added.</li>
<li><code>current</code> (of type <code>() -&gt; request?</code>): Get
the request currently being played.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>fetch</code> (of type <code>() -&gt; bool</code>): Try feeding
the queue with a new request. Returns <code>true</code> if successful.
This method can take long to return and should usually be run in a
separate thread.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>length</code> (of type <code>() -&gt; int</code>): Length of
the of the playlist (the number of songs it contains).</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>queue</code> (of type <code>() -&gt; [request]</code>): Get
the requests currently in the queue.</li>
<li><code>reload</code> (of type
<code>(?empty_queue : bool, ?uri : string?) -&gt; unit</code>): Reload
the playlist.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>remaining_files</code> (of type
<code>() -&gt; [string]</code>): Songs remaining to be played.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set_queue</code> (of type
<code>([request]) -&gt; unit</code>): Set the queue of requests.
Requests are resolved before being added to the queue. You are
responsible for destroying the requests currently in the queue.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="playlist.list"><a href="#playlist.list"
class="anchor"><code>playlist.list</code></a></h3>
<p>Play a list of files.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?check_next : ((request) -&gt; bool)?,
 ?prefetch : int, ?loop : bool, ?mode : string,
 ?native : bool, ?on_loop : (() -&gt; unit),
 ?on_done : (() -&gt; unit), ?max_fail : int,
 ?on_fail : (() -&gt; [string])?, ?timeout : float,
 [string]) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>check_next</code> (of type
<code>((request) -&gt; bool)?</code>, which defaults to
<code>null</code>): Function used to filter next tracks. A candidate
track is only validated if the function returns true on it. The function
is called before resolution, hence metadata will only be available for
requests corresponding to local files. This is typically used to avoid
repetitions, but be careful: if the function rejects all attempts, the
playlist will enter into a consuming loop and stop playing
anything.</li>
<li><code>prefetch</code> (of type <code>int</code>, which defaults to
<code>1</code>): How many requests should be queued in advance.</li>
<li><code>loop</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Loop on the playlist.</li>
<li><code>mode</code> (of type <code>string</code>, which defaults to
<code>"normal"</code>): Play the files in the playlist either in the
order (“normal” mode), or shuffle the playlist each time it is loaded,
and play it in this order for a whole round (“randomize” mode), or pick
a random file in the playlist each time (“random” mode).</li>
<li><code>native</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Use native implementation.</li>
<li><code>on_loop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Function executed when the
playlist is about to loop.</li>
<li><code>on_done</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Function executed when the
playlist is finished.</li>
<li><code>max_fail</code> (of type <code>int</code>, which defaults to
<code>10</code>): When this number of requests fail to resolve, the
whole playlists is considered as failed and <code>on_fail</code> is
called.</li>
<li><code>on_fail</code> (of type <code>(() -&gt; [string])?</code>,
which defaults to <code>null</code>): Function executed when too many
requests failed and returning the contents of a fixed playlist.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Timeout (in sec.) for a single download.</li>
<li><code>(unlabeled)</code> (of type <code>[string]</code>):
Playlist.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(request) -&gt; bool</code>): Add a
request to the queue. Requests are resolved before being added. Returns
<code>true</code> if the request was successfully added.</li>
<li><code>current</code> (of type <code>() -&gt; request?</code>): Get
the request currently being played.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>fetch</code> (of type <code>() -&gt; bool</code>): Try feeding
the queue with a new request. Returns <code>true</code> if successful.
This method can take long to return and should usually be run in a
separate thread.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>queue</code> (of type <code>() -&gt; [request]</code>): Get
the requests currently in the queue.</li>
<li><code>reload</code> (of type
<code>(?empty_queue : bool, [string]) -&gt; unit</code>): Reload the
playlist with given list of songs.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>remaining_files</code> (of type
<code>() -&gt; [string]</code>): Songs remaining to be played.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set_queue</code> (of type
<code>([request]) -&gt; unit</code>): Set the queue of requests.
Requests are resolved before being added to the queue. You are
responsible for destroying the requests currently in the queue.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="request.dynamic"><a href="#request.dynamic"
class="anchor"><code>request.dynamic</code></a></h3>
<p>Play request dynamically created by a given function.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?available : {bool}, ?prefetch : int,
 ?retry_delay : {float}, ?timeout : float,
 (() -&gt; request?)) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>available</code> (of type <code>{bool}</code>, which defaults
to <code>true</code>): Whether some new requests are available (when set
to false, it stops after current playing request).</li>
<li><code>prefetch</code> (of type <code>int</code>, which defaults to
<code>1</code>): How many requests should be queued in advance.</li>
<li><code>retry_delay</code> (of type <code>{float}</code>, which
defaults to <code>0.1</code>): Retry after a given time (in seconds)
when callback returns <code>null</code>.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Timeout (in sec.) for a single download.</li>
<li><code>(unlabeled)</code> (of type
<code>() -&gt; request?</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(request) -&gt; bool</code>): Add a
request to the queue. Requests are resolved before being added. Returns
<code>true</code> if the request was successfully added.</li>
<li><code>current</code> (of type <code>() -&gt; request?</code>): Get
the request currently being played.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>fetch</code> (of type <code>() -&gt; bool</code>): Try feeding
the queue with a new request. Returns <code>true</code> if successful.
This method can take long to return and should usually be run in a
separate thread.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>queue</code> (of type <code>() -&gt; [request]</code>): Get
the requests currently in the queue.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set_queue</code> (of type
<code>([request]) -&gt; unit</code>): Set the queue of requests.
Requests are resolved before being added to the queue. You are
responsible for destroying the requests currently in the queue.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="request.once"><a href="#request.once"
class="anchor"><code>request.once</code></a></h3>
<p>Play a request once and become unavailable.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?timeout : float, request) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Timeout in seconds for resolving the request.</li>
<li><code>(unlabeled)</code> (of type <code>request</code>): Request to
play.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>request</code> (of type <code>request</code>): Get the request
played by this source</li>
<li><code>resolve</code> (of type <code>() -&gt; bool</code>): Resolve
the request (this is useful to make sure that the source will be
available in advance). This function returns <code>true</code> if we
were able to successfully perform resolution. You should use this method
instead of <code>request.resolve</code> to make sure that the proper
content type is decoded from the request.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="saw"><a href="#saw" class="anchor"><code>saw</code></a></h3>
<p>Generate a saw wave.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?amplitude : {float}, ?duration : float?,
 ?{float}) -&gt; source(audio=internal(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>amplitude</code> (of type <code>{float}</code>, which defaults
to <code>1.</code>): Maximal value of the waveform.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>): Duration in seconds (<code>null</code> means
infinite).</li>
<li><code>(unlabeled)</code> (of type <code>{float}</code>, which
defaults to <code>440.</code>): Frequency of the saw.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="sine"><a href="#sine" class="anchor"><code>sine</code></a></h3>
<p>Generate a sine wave.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?amplitude : {float}, ?duration : float?,
 ?{float}) -&gt; source(audio=internal(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>amplitude</code> (of type <code>{float}</code>, which defaults
to <code>1.</code>): Maximal value of the waveform.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>): Duration in seconds (<code>null</code> means
infinite).</li>
<li><code>(unlabeled)</code> (of type <code>{float}</code>, which
defaults to <code>440.</code>): Frequency of the sine.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="single"><a href="#single"
class="anchor"><code>single</code></a></h3>
<p>Loop on a request. It never fails if the request is static, meaning
that it can be fetched once. Typically, http, ftp, say requests are
static, and time is not.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool, ?prefetch : int,
 ?timeout : float, string) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Enforce fallibility of the request.</li>
<li><code>prefetch</code> (of type <code>int</code>, which defaults to
<code>1</code>): How many requests should be queued in advance.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Timeout (in sec.) for a single download.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): URI where to
find the file</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.fail"><a href="#source.fail"
class="anchor"><code>source.fail</code></a></h3>
<p>A source that does not produce anything. No silence, no track at
all.</p>
<p>Type:</p>
<pre><code>(?id : string?) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.fail.init"><a href="#source.fail.init"
class="anchor"><code>source.fail.init</code></a></h3>
<p>A source that errors during its initialization phase, used for
testing and debugging.</p>
<p>Type:</p>
<pre><code>(?id : string?) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>This function is experimental.</p>
<h3 id="square"><a href="#square"
class="anchor"><code>square</code></a></h3>
<p>Generate a square wave.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?amplitude : {float}, ?duration : float?,
 ?{float}) -&gt; source(audio=internal(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>amplitude</code> (of type <code>{float}</code>, which defaults
to <code>1.</code>): Maximal value of the waveform.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>): Duration in seconds (<code>null</code> means
infinite).</li>
<li><code>(unlabeled)</code> (of type <code>{float}</code>, which
defaults to <code>440.</code>): Frequency of the square.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.testsrc"><a href="#video.testsrc"
class="anchor"><code>video.testsrc</code></a></h3>
<p>Generate a test video.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?height : int, ?width : int) -&gt;
source(audio=internal(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>height</code> (of type <code>int</code>, which defaults to
<code>-1</code>)</li>
<li><code>width</code> (of type <code>int</code>, which defaults to
<code>-1</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-liquidsoap"><a href="#source-liquidsoap"
class="anchor">Source / Liquidsoap</a></h2>
<h3 id="buffer"><a href="#buffer"
class="anchor"><code>buffer</code></a></h3>
<p>Create a buffer between two different clocks.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer : float, ?fallible : bool,
 ?max : float, ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?start : bool, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>1.</code>): Amount of data to pre-buffer, in seconds.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Allow the child source to fail.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum amount of buffered data, in seconds.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>buffer_length</code> (of type <code>() -&gt; int</code>):
Buffer length, in main ticks</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="buffer.adaptative"><a href="#buffer.adaptative"
class="anchor"><code>buffer.adaptative</code></a></h3>
<p>Create a buffer between two different clocks. The speed of the output
is adapted so that no buffer underrun or overrun occurs. This wonderful
behavior has a cost: the pitch of the sound might be changed a
little.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?averaging : float, ?buffer : float,
 ?fallible : bool, ?limit : float, ?max : float,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?reset : bool, ?start : bool, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>averaging</code> (of type <code>float</code>, which defaults
to <code>30.</code>): Half-life for the averaging of the buffer size, in
seconds.</li>
<li><code>buffer</code> (of type <code>float</code>, which defaults to
<code>1.</code>): Amount of data to pre-buffer, in seconds.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>limit</code> (of type <code>float</code>, which defaults to
<code>1.25</code>): Maximum acceleration or deceleration factor.</li>
<li><code>max</code> (of type <code>float</code>, which defaults to
<code>10.</code>): Maximum amount of buffered data, in seconds.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>reset</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Reset speed estimation to 1. when the source
becomes available again.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>ratio</code> (of type <code>() -&gt; float</code>): Get the
current scaling ratio.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>This function is experimental.</p>
<h2 id="source-midi-processing"><a href="#source-midi-processing"
class="anchor">Source / MIDI Processing</a></h2>
<h3 id="midi.chord"><a href="#midi.chord"
class="anchor"><code>midi.chord</code></a></h3>
<p>Generate a chord.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?metadata : string, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;d, video=&#39;e,
midi=midi(channels=1))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>metadata</code> (of type <code>string</code>, which defaults
to <code>"chord"</code>): Name of the metadata containing the
chords.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="midi.merge_all"><a href="#midi.merge_all"
class="anchor"><code>midi.merge_all</code></a></h3>
<p>Merge all MIDI tracks in one.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?track_out : int, source(audio=&#39;a,
 video=&#39;b, midi=midi(&#39;c))) -&gt; source(audio=&#39;a, video=&#39;b,
midi=midi(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>track_out</code> (of type <code>int</code>, which defaults to
<code>0</code>): Destination track.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi=midi('c))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="midi.remove"><a href="#midi.remove"
class="anchor"><code>midi.remove</code></a></h3>
<p>Remove MIDI tracks.</p>
<p>Type:</p>
<pre><code>(?id : string?, [int], source(audio=&#39;a, video=&#39;b,
 midi=midi(&#39;c))) -&gt; source(audio=&#39;a, video=&#39;b,
midi=midi(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type <code>[int]</code>): Tracks to
remove.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi=midi('c))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-output"><a href="#source-output" class="anchor">Source /
Output</a></h2>
<h3 id="ffmpeg.filter.audio_video.output"><a
href="#ffmpeg.filter.audio_video.output"
class="anchor"><code>ffmpeg.filter.audio_video.output</code></a></h3>
<p>Return a source with audio and video from a filter’s output.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fps : int?, ffmpeg.filter.graph,
 ffmpeg.filter.audio, ffmpeg.filter.video) -&gt;
source(audio=ffmpeg.audio.raw(&#39;a),
video=ffmpeg.video.raw(&#39;b), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>fps</code> (of type <code>int?</code>, which defaults to
<code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>ffmpeg.filter.graph</code>):
Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type <code>ffmpeg.filter.audio</code>):
Output frame per seconds. Defaults to global value.</li>
<li><code>(unlabeled)</code> (of type
<code>ffmpeg.filter.video</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.alsa"><a href="#output.alsa"
class="anchor"><code>output.alsa</code></a></h3>
<p>Output the source’s stream to an ALSA output device.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?bufferize : bool, ?clock_safe : bool,
 ?device : string, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>bufferize</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Bufferize output</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of the dedicated ALSA clock</li>
<li><code>device</code> (of type <code>string</code>, which defaults to
<code>"default"</code>): Alsa device to use</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.ao"><a href="#output.ao"
class="anchor"><code>output.ao</code></a></h3>
<p>Output stream to local sound card using libao.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer_size : int,
 ?channels_matrix : string, ?clock_safe : bool,
 ?driver : string, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?options : [string * string], ?start : bool,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buffer_size</code> (of type <code>int</code>, which defaults
to <code>2</code>): Set buffer size, in frames.</li>
<li><code>channels_matrix</code> (of type <code>string</code>, which
defaults to <code>""</code>): Output channels matrix, “” for AO’s
default.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Use the dedicated AO clock.</li>
<li><code>driver</code> (of type <code>string</code>, which defaults to
<code>""</code>): Driver to be used, “” for AO’s default.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>options</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): List of parameters, depends on the
driver.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.dummy"><a href="#output.dummy"
class="anchor"><code>output.dummy</code></a></h3>
<p>Dummy output for debugging purposes.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.external"><a href="#output.external"
class="anchor"><code>output.external</code></a></h3>
<p>Send the stream to a process’ standard input.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool, ?flush : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?reopen_delay : float, ?reopen_on_error : bool,
 ?reopen_on_metadata : bool, ?reopen_when : (() -&gt; bool),
 ?self_sync : bool, ?start : bool, format(&#39;a), {string},
 source(&#39;a)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>flush</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Perform a flush after each write.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>reopen_delay</code> (of type <code>float</code>, which
defaults to <code>120.</code>): Prevent re-opening within that delay, in
seconds.</li>
<li><code>reopen_on_error</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Re-open if some error occurs.</li>
<li><code>reopen_on_metadata</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Re-open on every new metadata
information.</li>
<li><code>reopen_when</code> (of type <code>() -&gt; bool</code>, which
defaults to <code>{false}</code>): When should the output be
re-opened.</li>
<li><code>self_sync</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Set to <code>true</code> if the process is expected
to control the output’s latency. Typical example: <code>ffmpeg</code>
with the <code>-re</code> command-line option.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type <code>format('a)</code>)</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Process to
pipe data to. Some strftime conversion specifiers are available:
<code>%SMHdmY</code>. You can also use <code>$(..)</code> interpolation
notation for metadata.</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>): Encoding
format.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>reopen</code> (of type <code>() -&gt; unit</code>): Reopen the
pipe.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.file"><a href="#output.file"
class="anchor"><code>output.file</code></a></h3>
<p>Output the source stream to a file.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?append : bool, ?dir_perm : int,
 ?fallible : bool, ?flush : bool,
 ?on_close : ((string) -&gt; unit),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?perm : int, ?reopen_delay : float,
 ?reopen_on_error : bool, ?reopen_on_metadata : bool,
 ?reopen_when : (() -&gt; bool), ?start : bool, format(&#39;a),
 {string}, source(&#39;a)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>append</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Do not truncate but append in the file if it
exists.</li>
<li><code>dir_perm</code> (of type <code>int</code>, which defaults to
<code>511</code>): Permission of the directories if some have to be
created, up to umask. Although you can enter values in octal notation
(0oXXX) they will be displayed in decimal (for instance, 0o777 =
7<em>8^2 + 7</em>8 + 7 = 511).</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>flush</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Perform a flush after each write.</li>
<li><code>on_close</code> (of type <code>(string) -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): This function will be
called for each file, after that it is finished and closed. The filename
will be passed as argument.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>perm</code> (of type <code>int</code>, which defaults to
<code>438</code>): Permission of the file if it has to be created, up to
umask. You can and should write this number in octal notation: 0oXXX.
The default value is however displayed in decimal (0o666 = 6<em>8^2 +
6</em>8 + 6 = 438).</li>
<li><code>reopen_delay</code> (of type <code>float</code>, which
defaults to <code>120.</code>): Prevent re-opening within that delay, in
seconds.</li>
<li><code>reopen_on_error</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Re-open if some error occurs.</li>
<li><code>reopen_on_metadata</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Re-open on every new metadata
information.</li>
<li><code>reopen_when</code> (of type <code>() -&gt; bool</code>, which
defaults to <code>{false}</code>): When should the output be
re-opened.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type <code>format('a)</code>): Encoding
format.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Filename
where to output the stream. Some strftime conversion specifiers are
available: <code>%SMHdmY</code>. You can also use <code>$(..)</code>
interpolation notation for metadata.</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.file.hls"><a href="#output.file.hls"
class="anchor"><code>output.file.hls</code></a></h3>
<p>Output the source stream to an HTTP live stream served from a local
directory.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?dir_perm : int, ?fallible : bool,
 ?on_file_change : ((state : string, string) -&gt; unit),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?perm : int, ?persist_at : string?, ?playlist : string,
 ?prefix : string, ?segment_duration : float,
 ?segment_name : ((position : int, extname : string,
                   string) -&gt; string),
 ?segments : int, ?segments_overhead : int,
 ?start : bool,
 ?streams_info : [string * 
                  {
                    bandwidth : int,
                    codecs : string,
                    extname : string,
                    video_size : (int * int)?
                  }],
 ?strict_persist : bool, string, [string * format(&#39;a)],
 source(&#39;a)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>dir_perm</code> (of type <code>int</code>, which defaults to
<code>511</code>): Permission of the directories if some have to be
created, up to umask. Although you can enter values in octal notation
(0oXXX) they will be displayed in decimal (for instance, 0o777 = 7×8^2 +
7×8 + 7 = 511).</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_file_change</code> (of type
<code>(state : string, string) -&gt; unit</code>, which defaults to
<code>&lt;fun&gt;</code>): Callback executed when a file changes.
<code>state</code> is one of: <code>"opened"</code>,
<code>"closed"</code> or <code>"deleted"</code>, second argument is file
path. Typical use: upload files to a CDN when done writing
(<code>"close"</code> state and remove when <code>"deleted"</code>.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>perm</code> (of type <code>int</code>, which defaults to
<code>438</code>): Permission of the created files, up to umask. You can
and should write this number in octal notation: 0oXXX. The default value
is however displayed in decimal (0o666 = 6<em>8^2 + 4</em>8 + 4 =
412).</li>
<li><code>persist_at</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Location of the configuration file used
to restart the output. Relative paths are assumed to be with regard to
the directory for generated file.</li>
<li><code>playlist</code> (of type <code>string</code>, which defaults
to <code>"stream.m3u8"</code>): Playlist name (m3u8 extension is
recommended).</li>
<li><code>prefix</code> (of type <code>string</code>, which defaults to
<code>""</code>): Prefix for each files in playlists.</li>
<li><code>segment_duration</code> (of type <code>float</code>, which
defaults to <code>10.</code>): Segment duration (in seconds).</li>
<li><code>segment_name</code> (of type
<code>(position : int, extname : string, string) -&gt; string</code>,
which defaults to <code>&lt;fun&gt;</code>): Segment name. Default:
<code>fun (~position,~extname,stream_name) -&gt; "#{stream_name}_#{position}.#{extname}"</code></li>
<li><code>segments</code> (of type <code>int</code>, which defaults to
<code>10</code>): Number of segments per playlist.</li>
<li><code>segments_overhead</code> (of type <code>int</code>, which
defaults to <code>5</code>): Number of segments to keep after they have
been featured in the live playlist.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>streams_info</code> (of type
<code>[string *   {    bandwidth : int,    codecs : string,    extname : string,    video_size : (int * int)?  }]</code>,
which defaults to <code>[]</code>): Additional information about the
streams. Should be a list of the form:
<code>[(stream_name, (bandwidth, codecs, extname, (width, height)?)]</code>.
See RFC 6381 for info about codecs. Stream info are required when they
cannot be inferred from the encoder.</li>
<li><code>strict_persist</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Fail if an invalid saved state
exists.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Directory
for generated files.</li>
<li><code>(unlabeled)</code> (of type
<code>[string * format('a)]</code>): List of specifications for each
stream: (name, format).</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.gstreamer.audio"><a href="#output.gstreamer.audio"
class="anchor"><code>output.gstreamer.audio</code></a></h3>
<p>Output stream to a GStreamer pipeline.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?clock_safe : bool, ?fallible : bool,
 ?on_error : ((string) -&gt; float),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?pipeline : string, ?start : bool, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Use the dedicated GStreamer clock.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_error</code> (of type <code>(string) -&gt; float</code>,
which defaults to <code>fun (_) -&gt; 3.</code>): Callback executed when
an error happens. The callback receives a string representation of the
error that occurred and returns a float. If returned value is positive,
connection will be tried again after this amount of time (in
seconds).</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>pipeline</code> (of type <code>string</code>, which defaults
to <code>"autoaudiosink"</code>): GStreamer pipeline for sink.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.gstreamer.audio_video"><a
href="#output.gstreamer.audio_video"
class="anchor"><code>output.gstreamer.audio_video</code></a></h3>
<p>Output stream to a GStreamer pipeline.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?audio_pipeline : string,
 ?blocking : bool, ?clock_safe : bool, ?fallible : bool,
 ?on_error : ((string) -&gt; float),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?pipeline : string, ?start : bool,
 ?video_pipeline : string, source(audio=pcm(&#39;a),
 video=canvas(&#39;b), midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>audio_pipeline</code> (of type <code>string</code>, which
defaults to <code>"autoaudiosink"</code>): GStreamer pipeline for audio
sink.</li>
<li><code>blocking</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Pushing buffers is blocking.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Use the dedicated GStreamer clock.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_error</code> (of type <code>(string) -&gt; float</code>,
which defaults to <code>fun (_) -&gt; 3.</code>): Callback executed when
an error happens. The callback receives a string representation of the
error that occurred and returns a float. If returned value is positive,
connection will be tried again after this amount of time (in
seconds).</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>pipeline</code> (of type <code>string</code>, which defaults
to <code>""</code>): GStreamer pipeline for sink.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>video_pipeline</code> (of type <code>string</code>, which
defaults to <code>"videoconvert ! autovideosink"</code>): GStreamer
pipeline for video sink.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=canvas('b), midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.gstreamer.video"><a href="#output.gstreamer.video"
class="anchor"><code>output.gstreamer.video</code></a></h3>
<p>Output stream to a GStreamer pipeline.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?clock_safe : bool, ?fallible : bool,
 ?on_error : ((string) -&gt; float),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?pipeline : string, ?start : bool, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Use the dedicated GStreamer clock.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_error</code> (of type <code>(string) -&gt; float</code>,
which defaults to <code>fun (_) -&gt; 3.</code>): Callback executed when
an error happens. The callback receives a string representation of the
error that occurred and returns a float. If returned value is positive,
connection will be tried again after this amount of time (in
seconds).</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>pipeline</code> (of type <code>string</code>, which defaults
to <code>"videoconvert ! autovideosink"</code>): GStreamer pipeline for
sink.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.harbor"><a href="#output.harbor"
class="anchor"><code>output.harbor</code></a></h3>
<p>Encode and output the stream using the harbor server.</p>
<p>Type:</p>
<pre><code>(?id : string?,
 ?auth : ((address : string, string, string) -&gt; bool)?,
 ?buffer : int, ?burst : int, ?chunk : int,
 ?dumpfile : string?, ?encoding : string,
 ?fallible : bool, ?format : string,
 ?headers : [string * string], ?metaint : int,
 mount : string,
 ?on_connect : ((headers : [string * string],
                 uri : string, protocol : string, string) -&gt;
                unit),
 ?on_disconnect : ((string) -&gt; unit),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?password : string?, ?port : int, ?start : bool,
 ?timeout : float, ?url : string?, ?user : string?,
 format(audio=&#39;a, video=&#39;b, midi=&#39;c), source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>auth</code> (of type
<code>((address : string, string, string) -&gt; bool)?</code>, which
defaults to <code>null</code>): Authentication function.
<code>f(~address,login,password)</code> returns <code>true</code> if the
user should be granted access for this login. When defined,
<code>user</code> and <code>password</code> arguments are not taken in
account.</li>
<li><code>buffer</code> (of type <code>int</code>, which defaults to
<code>327675</code>): Maximum buffer per-client.</li>
<li><code>burst</code> (of type <code>int</code>, which defaults to
<code>65534</code>): Initial burst of data sent to the client.</li>
<li><code>chunk</code> (of type <code>int</code>, which defaults to
<code>4096</code>): Send data to clients using chunks of at least this
length.</li>
<li><code>dumpfile</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Dump stream to file, for debugging purpose.
Disabled if null.</li>
<li><code>encoding</code> (of type <code>string</code>, which defaults
to <code>""</code>): Encoding used to send metadata. If empty, defaults
to “ISO-8859-1” for non-ogg formats and “UTF-8” otherwise.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>format</code> (of type <code>string</code>, which defaults to
<code>""</code>): Format, e.g. “audio/ogg”. When empty, the encoder is
used to guess.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>metaint</code> (of type <code>int</code>, which defaults to
<code>8192</code>): Interval used to send ICY metadata</li>
<li><code>mount</code> (of type <code>string</code>)</li>
<li><code>on_connect</code> (of type
<code>(headers : [string * string], uri : string,  protocol : string, string) -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Callback executed when
connection is established (takes headers, connection uri, protocol and
client’s IP as arguments).</li>
<li><code>on_disconnect</code> (of type
<code>(string) -&gt; unit</code>, which defaults to
<code>&lt;fun&gt;</code>): Callback executed when connection stops
(takes client’s IP as argument).</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>password</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Password for client connection. A
<code>user</code> must also be set. We check for this password is
checked unless an <code>auth</code> function is defined, which is used
in this case.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>)</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>30.</code>): Timeout for network operations (in seconds).</li>
<li><code>url</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>user</code> (of type <code>string?</code>, which defaults to
<code>null</code>): User for client connection. You also need to setup a
<code>password</code>.</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio='a, video='b, midi='c)</code>): Encoding format.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.harbor.hls"><a href="#output.harbor.hls"
class="anchor"><code>output.harbor.hls</code></a></h3>
<p>Output the source stream to an HTTP live stream served from the
harbor HTTP server.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?dir_perm : int, ?fallible : bool,
 ?on_file_change : ((state : string, string) -&gt; unit),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?perm : int, ?persist_at : string?, ?playlist : string,
 ?prefix : string, ?segment_duration : float,
 ?segments : int, ?segments_overhead : int,
 ?start : bool,
 ?streams_info : [string * 
                  {
                    bandwidth : int,
                    codecs : string,
                    extname : string,
                    video_size : (int * int)?
                  }],
 ?strict_persist : bool,
 ?segment_name : ((position : int, extname : string,
                   string) -&gt; string),
 ?headers : [string * string], ?port : int,
 ?path : string, ?tmpdir : string?,
 [string * format(&#39;a)], source(&#39;a)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>dir_perm</code> (of type <code>int</code>, which defaults to
<code>511</code>): Permission of the directories if some have to be
created, up to umask. Although you can enter values in octal notation
(0oXXX) they will be displayed in decimal (for instance, 0o777 = 7×8^2 +
7×8 + 7 = 511).</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_file_change</code> (of type
<code>(state : string, string) -&gt; unit</code>, which defaults to
<code>&lt;fun&gt;</code>): Callback executed when a file changes.
<code>state</code> is one of: <code>"opened"</code>,
<code>"closed"</code> or <code>"deleted"</code>, second argument is file
path. Typical use: upload files to a CDN when done writing
(<code>"close"</code> state and remove when <code>"deleted"</code>.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>perm</code> (of type <code>int</code>, which defaults to
<code>438</code>): Permission of the created files, up to umask. You can
and should write this number in octal notation: 0oXXX. The default value
is however displayed in decimal (0o666 = 6<em>8^2 + 4</em>8 + 4 =
412).</li>
<li><code>persist_at</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Location of the configuration file used
to restart the output. Relative paths are assumed to be with regard to
the directory for generated file.</li>
<li><code>playlist</code> (of type <code>string</code>, which defaults
to <code>"stream.m3u8"</code>): Playlist name (m3u8 extension is
recommended).</li>
<li><code>prefix</code> (of type <code>string</code>, which defaults to
<code>""</code>): Prefix for each files in playlists.</li>
<li><code>segment_duration</code> (of type <code>float</code>, which
defaults to <code>10.</code>): Segment duration (in seconds).</li>
<li><code>segments</code> (of type <code>int</code>, which defaults to
<code>10</code>): Number of segments per playlist.</li>
<li><code>segments_overhead</code> (of type <code>int</code>, which
defaults to <code>5</code>): Number of segments to keep after they have
been featured in the live playlist.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>streams_info</code> (of type
<code>[string *   {    bandwidth : int,    codecs : string,    extname : string,    video_size : (int * int)?  }]</code>,
which defaults to <code>[]</code>): Additional information about the
streams. Should be a list of the form:
<code>[(stream_name, (bandwidth, codecs, extname, (width, height)?)]</code>.
See RFC 6381 for info about codecs. Stream info are required when they
cannot be inferred from the encoder.</li>
<li><code>strict_persist</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Fail if an invalid saved state
exists.</li>
<li><code>segment_name</code> (of type
<code>(position : int, extname : string, string) -&gt; string</code>,
which defaults to <code>&lt;fun&gt;</code>): Segment name. Default:
<code>fun (~position,~extname,stream_name) -&gt; "#{stream_name}_#{position}.#{extname}"</code></li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[("Access-Control-Allow-Origin", "*")]</code>):
Default response headers.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port for incoming harbor (http) connections.</li>
<li><code>path</code> (of type <code>string</code>, which defaults to
<code>"/"</code>): Base path for hls URIs.</li>
<li><code>tmpdir</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Directory for generated files.</li>
<li><code>(unlabeled)</code> (of type
<code>[string * format('a)]</code>): List of specifications for each
stream: (name, format).</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.harbor.ssl"><a href="#output.harbor.ssl"
class="anchor"><code>output.harbor.ssl</code></a></h3>
<p>Encode and output the stream using the SSL harbor server.</p>
<p>Type:</p>
<pre><code>(?id : string?,
 ?auth : ((address : string, string, string) -&gt; bool)?,
 ?buffer : int, ?burst : int, ?chunk : int,
 ?dumpfile : string?, ?encoding : string,
 ?fallible : bool, ?format : string,
 ?headers : [string * string], ?metaint : int,
 mount : string,
 ?on_connect : ((headers : [string * string],
                 uri : string, protocol : string, string) -&gt;
                unit),
 ?on_disconnect : ((string) -&gt; unit),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?password : string?, ?port : int, ?start : bool,
 ?timeout : float, ?url : string?, ?user : string?,
 format(audio=&#39;a, video=&#39;b, midi=&#39;c), source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>auth</code> (of type
<code>((address : string, string, string) -&gt; bool)?</code>, which
defaults to <code>null</code>): Authentication function.
<code>f(~address,login,password)</code> returns <code>true</code> if the
user should be granted access for this login. When defined,
<code>user</code> and <code>password</code> arguments are not taken in
account.</li>
<li><code>buffer</code> (of type <code>int</code>, which defaults to
<code>327675</code>): Maximum buffer per-client.</li>
<li><code>burst</code> (of type <code>int</code>, which defaults to
<code>65534</code>): Initial burst of data sent to the client.</li>
<li><code>chunk</code> (of type <code>int</code>, which defaults to
<code>4096</code>): Send data to clients using chunks of at least this
length.</li>
<li><code>dumpfile</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Dump stream to file, for debugging purpose.
Disabled if null.</li>
<li><code>encoding</code> (of type <code>string</code>, which defaults
to <code>""</code>): Encoding used to send metadata. If empty, defaults
to “ISO-8859-1” for non-ogg formats and “UTF-8” otherwise.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>format</code> (of type <code>string</code>, which defaults to
<code>""</code>): Format, e.g. “audio/ogg”. When empty, the encoder is
used to guess.</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Additional headers.</li>
<li><code>metaint</code> (of type <code>int</code>, which defaults to
<code>8192</code>): Interval used to send ICY metadata</li>
<li><code>mount</code> (of type <code>string</code>)</li>
<li><code>on_connect</code> (of type
<code>(headers : [string * string], uri : string,  protocol : string, string) -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Callback executed when
connection is established (takes headers, connection uri, protocol and
client’s IP as arguments).</li>
<li><code>on_disconnect</code> (of type
<code>(string) -&gt; unit</code>, which defaults to
<code>&lt;fun&gt;</code>): Callback executed when connection stops
(takes client’s IP as argument).</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>password</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Password for client connection. A
<code>user</code> must also be set. We check for this password is
checked unless an <code>auth</code> function is defined, which is used
in this case.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>)</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>30.</code>): Timeout for network operations (in seconds).</li>
<li><code>url</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>user</code> (of type <code>string?</code>, which defaults to
<code>null</code>): User for client connection. You also need to setup a
<code>password</code>.</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio='a, video='b, midi='c)</code>): Encoding format.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.icecast"><a href="#output.icecast"
class="anchor"><code>output.icecast</code></a></h3>
<p>Encode and output the stream to an icecast2 or shoutcast server.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?chunked : bool,
 ?connection_timeout : float, ?description : string?,
 ?dumpfile : string?, ?encoding : string?,
 ?fallible : bool, ?format : string, ?genre : string?,
 ?headers : [string * string], ?host : string,
 ?icy_id : int, ?icy_metadata : string, ?method : string,
 ?mount : string, ?name : string,
 ?on_connect : (() -&gt; unit),
 ?on_disconnect : (() -&gt; unit),
 ?on_error : ((string) -&gt; float),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?password : string, ?port : int, ?protocol : string,
 ?public : bool, ?start : bool, ?timeout : float,
 ?url : string?, ?user : string?, format(&#39;a), source(&#39;a)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>chunked</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Used chunked transfer with the ‘http(s)’
protocol.</li>
<li><code>connection_timeout</code> (of type <code>float</code>, which
defaults to <code>5.</code>): Timeout for establishing network
connections (disabled is negative).</li>
<li><code>description</code> (of type <code>string?</code>, which
defaults to <code>null</code>)</li>
<li><code>dumpfile</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Dump stream to file, for debugging purpose.
Disabled if null.</li>
<li><code>encoding</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Encoding used to send metadata and stream info
(name, genre and description). If null, defaults to “UTF-8” for
“http(s)” protocol and “ISO-8859-1” for “icy” protocol.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>format</code> (of type <code>string</code>, which defaults to
<code>""</code>): Format, e.g. “audio/ogg”. When empty, the encoder is
used to guess.</li>
<li><code>genre</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>headers</code> (of type <code>[string * string]</code>, which
defaults to
<code>[("User-Agent", "Liquidsoap/2.1.4 (Unix; OCaml 4.14.0)")]</code>):
Additional headers.</li>
<li><code>host</code> (of type <code>string</code>, which defaults to
<code>"localhost"</code>)</li>
<li><code>icy_id</code> (of type <code>int</code>, which defaults to
<code>1</code>): Shoutcast source ID. Only supported by Shoutcast
v2.</li>
<li><code>icy_metadata</code> (of type <code>string</code>, which
defaults to <code>"guess"</code>): Send new metadata using the ICY
protocol. One of: “guess”, “true”, “false”</li>
<li><code>method</code> (of type <code>string</code>, which defaults to
<code>"source"</code>): method to use with the ‘http(s)’ protocol. One
of: ‘source’, ‘put’ or ‘post’.</li>
<li><code>mount</code> (of type <code>string</code>, which defaults to
<code>"Use [name]"</code>): Source mount point. Mandatory when streaming
to icecast.</li>
<li><code>name</code> (of type <code>string</code>, which defaults to
<code>"Use [mount]"</code>)</li>
<li><code>on_connect</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when connection
is established.</li>
<li><code>on_disconnect</code> (of type <code>() -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Callback executed when
connection stops.</li>
<li><code>on_error</code> (of type <code>(string) -&gt; float</code>,
which defaults to <code>fun (_) -&gt; 3.</code>): Callback executed when
an error happens. The callback receives a string representation of the
error that occurred and returns a float. If returned value is positive,
connection will be tried again after this amount of time (in
seconds).</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>password</code> (of type <code>string</code>, which defaults
to <code>"hackme"</code>)</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>)</li>
<li><code>protocol</code> (of type <code>string</code>, which defaults
to <code>"http"</code>): Protocol of the streaming server: ‘http’ or
‘https’ for Icecast, ‘icy’ for shoutcast.</li>
<li><code>public</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>30.</code>): Timeout for network read and write.</li>
<li><code>url</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>user</code> (of type <code>string?</code>, which defaults to
<code>null</code>): User for shout source connection. Defaults to
“source” for icecast connections. Useful only in special cases, like
with per-mountpoint users.</li>
<li><code>(unlabeled)</code> (of type <code>format('a)</code>): Encoding
format.</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.jack"><a href="#output.jack"
class="anchor"><code>output.jack</code></a></h3>
<p>Output stream to jack.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buffer_size : int, ?clock_safe : bool,
 ?fallible : bool, ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?server : string,
 ?start : bool, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buffer_size</code> (of type <code>int</code>, which defaults
to <code>2</code>): Set buffer size, in frames.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of the dedicated bjack clock.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>server</code> (of type <code>string</code>, which defaults to
<code>""</code>): Jack server to connect to.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.oss"><a href="#output.oss"
class="anchor"><code>output.oss</code></a></h3>
<p>Output the source’s stream to an OSS output device.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?clock_safe : bool, ?device : string,
 ?fallible : bool, ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?start : bool,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of the dedicated OSS clock.</li>
<li><code>device</code> (of type <code>string</code>, which defaults to
<code>"/dev/dsp"</code>): OSS device to use.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.portaudio"><a href="#output.portaudio"
class="anchor"><code>output.portaudio</code></a></h3>
<p>Output the source’s stream to a portaudio output device.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?buflen : int, ?clock_safe : bool,
 ?device_id : int?, ?fallible : bool, ?latency : float?,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>buflen</code> (of type <code>int</code>, which defaults to
<code>256</code>): Length of a buffer in samples.</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of the dedicated Portaudio
clock.</li>
<li><code>device_id</code> (of type <code>int?</code>, which defaults to
<code>null</code>): Device ID. Uses default device if
<code>null</code>.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>latency</code> (of type <code>float?</code>, which defaults to
<code>null</code>): Device latency. Only used when specifying device
ID.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.pulseaudio"><a href="#output.pulseaudio"
class="anchor"><code>output.pulseaudio</code></a></h3>
<p>Output the source’s stream to a pulseaudio output device.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?client : string, ?clock_safe : bool,
 ?device : string, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>client</code> (of type <code>string</code>, which defaults to
<code>"liquidsoap"</code>)</li>
<li><code>clock_safe</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Force the use of the dedicated Pulseaudio
clock.</li>
<li><code>device</code> (of type <code>string</code>, which defaults to
<code>""</code>): Device to use. Uses default if set to ““.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.sdl"><a href="#output.sdl"
class="anchor"><code>output.sdl</code></a></h3>
<p>Display a video using SDL.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool,
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?start : bool, source(audio=&#39;a, video=canvas(&#39;b),
 midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video=canvas('b), midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.sdl.has_video"><a href="#output.sdl.has_video"
class="anchor"><code>output.sdl.has_video</code></a></h3>
<p>Check whether video output is available with SDL.</p>
<p>Type:</p>
<pre><code>() -&gt; bool</code></pre>
<p>Arguments:</p>
<h3 id="output.shoutcast"><a href="#output.shoutcast"
class="anchor"><code>output.shoutcast</code></a></h3>
<p>Output to shoutcast.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?chunked : bool,
 ?connection_timeout : float, ?dumpfile : string?,
 ?encoding : string?, ?fallible : bool, ?format : string,
 ?genre : string?, ?host : string, ?icy_id : int,
 ?icy_metadata : string, ?method : string,
 ?mount : string, ?name : string,
 ?on_connect : (() -&gt; unit),
 ?on_disconnect : (() -&gt; unit),
 ?on_error : ((string) -&gt; float),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?password : string, ?port : int, ?public : bool,
 ?start : bool, ?timeout : float, ?url : string?,
 ?user : string?, ?icy_reset : bool,
 ?dj : (() -&gt; string), ?aim : string, ?icq : string,
 ?irc : string, format(audio=&#39;a, video=&#39;b, midi=&#39;c),
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>chunked</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Used chunked transfer with the ‘http(s)’
protocol.</li>
<li><code>connection_timeout</code> (of type <code>float</code>, which
defaults to <code>5.</code>): Timeout for establishing network
connections (disabled is negative).</li>
<li><code>dumpfile</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Dump stream to file, for debugging purpose.
Disabled if null.</li>
<li><code>encoding</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Encoding used to send metadata and stream info
(name, genre and description). If null, defaults to “UTF-8” for
“http(s)” protocol and “ISO-8859-1” for “icy” protocol.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>format</code> (of type <code>string</code>, which defaults to
<code>""</code>): Format, e.g. “audio/ogg”. When empty, the encoder is
used to guess.</li>
<li><code>genre</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>host</code> (of type <code>string</code>, which defaults to
<code>"localhost"</code>)</li>
<li><code>icy_id</code> (of type <code>int</code>, which defaults to
<code>1</code>): Shoutcast source ID. Only supported by Shoutcast
v2.</li>
<li><code>icy_metadata</code> (of type <code>string</code>, which
defaults to <code>"guess"</code>): Send new metadata using the ICY
protocol. One of: “guess”, “true”, “false”</li>
<li><code>method</code> (of type <code>string</code>, which defaults to
<code>"source"</code>): method to use with the ‘http(s)’ protocol. One
of: ‘source’, ‘put’ or ‘post’.</li>
<li><code>mount</code> (of type <code>string</code>, which defaults to
<code>"Use [name]"</code>): Source mount point. Mandatory when streaming
to icecast.</li>
<li><code>name</code> (of type <code>string</code>, which defaults to
<code>"Use [mount]"</code>)</li>
<li><code>on_connect</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when connection
is established.</li>
<li><code>on_disconnect</code> (of type <code>() -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Callback executed when
connection stops.</li>
<li><code>on_error</code> (of type <code>(string) -&gt; float</code>,
which defaults to <code>fun (_) -&gt; 3.</code>): Callback executed when
an error happens. The callback receives a string representation of the
error that occurred and returns a float. If returned value is positive,
connection will be tried again after this amount of time (in
seconds).</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>password</code> (of type <code>string</code>, which defaults
to <code>"hackme"</code>)</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>)</li>
<li><code>public</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>30.</code>): Timeout for network read and write.</li>
<li><code>url</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>user</code> (of type <code>string?</code>, which defaults to
<code>null</code>): User for shout source connection. Defaults to
“source” for icecast connections. Useful only in special cases, like
with per-mountpoint users.</li>
<li><code>icy_reset</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Reset shoutcast source buffer upon connecting
(necessary for NSV).</li>
<li><code>dj</code> (of type <code>() -&gt; string</code>, which
defaults to <code>{""}</code>): Callback to set dj name.</li>
<li><code>aim</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>icq</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>irc</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio='a, video='b, midi='c)</code>): Encoding format. For
shoutcast, should be mp3 or AAC(+).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>): The source to
output</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.srt"><a href="#output.srt"
class="anchor"><code>output.srt</code></a></h3>
<p>Send a SRT stream to a distant agent.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?bind_address : string,
 ?connection_timeout : int?, ?fallible : bool,
 ?host : string, ?messageapi : bool, ?mode : string,
 ?on_connect : (() -&gt; unit),
 ?on_disconnect : (() -&gt; unit), ?on_start : (() -&gt; unit),
 ?on_stop : (() -&gt; unit), ?payload_size : int,
 ?port : int, ?read_timeout : int?, ?start : bool,
 ?stats_interval : int?, ?write_timeout : int?,
 format(audio=&#39;a, video=&#39;b, midi=&#39;c), source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>bind_address</code> (of type <code>string</code>, which
defaults to <code>"0.0.0.0"</code>): Address to bind on the local
machine. Used only in listener mode</li>
<li><code>connection_timeout</code> (of type <code>int?</code>, which
defaults to <code>3000</code>): Timeout, in milliseconds, after which
initial connection operations are aborted if no data was received,
indefinite if <code>null</code>. Only used in caller mode.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>host</code> (of type <code>string</code>, which defaults to
<code>"localhost"</code>): Address to connect to. Used only in caller
mode.</li>
<li><code>messageapi</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Use message api</li>
<li><code>mode</code> (of type <code>string</code>, which defaults to
<code>"caller"</code>): Mode to operate on. One of:
<code>"listener"</code> (waits for connection to come in) or
<code>"caller"</code> (initiate connection to a remote server)</li>
<li><code>on_connect</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Function to execute when
connected.</li>
<li><code>on_disconnect</code> (of type <code>() -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Function to execute when
disconnected</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>payload_size</code> (of type <code>int</code>, which defaults
to <code>1316</code>): Payload size.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>8000</code>): Port to bind on the local machine (listener mode) or
to connect to (caller mode). The term <code>port</code> as used in SRT
is occasionally identical to the term <code>UDP port</code>. However SRT
offers more flexibility than UDP because it manages ports as its own
resources. For example, one port may be shared between various
services.</li>
<li><code>read_timeout</code> (of type <code>int?</code>, which defaults
to <code>3000</code>): Timeout, in milliseconds, after which read
operations are aborted if no data was received, indefinite if
<code>null</code>.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>stats_interval</code> (of type <code>int?</code>, which
defaults to <code>null</code>): Interval used to collect internal stats
in milliseconds</li>
<li><code>write_timeout</code> (of type <code>int?</code>, which
defaults to <code>3000</code>): Timeout, in milliseconds, after which
write operations are aborted if no data was received, indefinite if
<code>null</code>.</li>
<li><code>(unlabeled)</code> (of type
<code>format(audio='a, video='b, midi='c)</code>): Encoding format.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stats</code> (of type
<code>() -&gt;  {   byteAvailRcvBuf : int,   byteAvailSndBuf : int,   byteMSS : int,   byteRcvBuf : int,   byteRcvDrop : int,   byteRcvDropTotal : int,   byteRcvUndecrypt : int,   byteRcvUndecryptTotal : int,   byteRecv : int,   byteRecvTotal : int,   byteRetrans : int,   byteRetransTotal : int,   byteSent : int,   byteSentTotal : int,   byteSndBuf : int,   byteSndDrop : int,   byteSndDropTotal : int,   mbpsBandwidth : float,   mbpsMaxBW : float,   mbpsRecvRate : float,   mbpsSendRate : float,   msRTT : float,   msRcvBuf : int,   msRcvTsbPdDelay : int,   msSndBuf : int,   msSndTsbPdDelay : int,   msTimeStamp : int,   pktCongestionWindow : int,   pktFlightSize : int,   pktFlowWindow : int,   pktRcvAvgBelatedTime : float,   pktRcvBelated : int,   pktRcvBuf : int,   pktRcvDrop : int,   pktRcvDropTotal : int,   pktRcvFilterExtra : int,   pktRcvFilterExtraTotal : int,   pktRcvFilterLoss : int,   pktRcvFilterLossTotal : int,   pktRcvFilterSupply : int,   pktRcvFilterSupplyTotal : int,   pktRcvLoss : int,   pktRcvLossTotal : int,   pktRcvRetrans : int,   pktRcvUndecrypt : int,   pktRcvUndecryptTotal : int,   pktRecv : int,   pktRecvACK : int,   pktRecvACKTotal : int,   pktRecvNAK : int,   pktRecvNAKTotal : int,   pktRecvTotal : int,   pktReorderDistance : int,   pktRetrans : int,   pktRetransTotal : int,   pktSent : int,   pktSentACK : int,   pktSentACKTotal : int,   pktSentNAK : int,   pktSentNAKTotal : int,   pktSentTotal : int,   pktSndBuf : int,   pktSndDrop : int,   pktSndDropTotal : int,   pktSndFilterExtra : int,   pktSndFilterExtraTotal : int,   pktSndLoss : int,   pktSndLossTotal : int,   usPktSndPeriod : float,   usSndDuration : int,   usSndDurationTotal : int}</code>):
Statistics.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="output.url"><a href="#output.url"
class="anchor"><code>output.url</code></a></h3>
<p>Encode and let encoder handle data output. Useful with encoder with
no expected output or to encode to files that need full control from the
encoder, e.g. <code>%ffmpeg</code> with <code>rtmp</code> output.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool,
 ?on_error : ((error
               .{
                 kind : string,
                 message : string,
                 positions : [string]
               }) -&gt; unit),
 ?on_start : (() -&gt; unit), ?on_stop : (() -&gt; unit),
 ?restart_delay : float?, ?self_sync : bool,
 ?start : bool, url : string, format(&#39;a), source(&#39;a)) -&gt;
unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Allow the child source to fail, in which case the
output will be stopped until the source is available again.</li>
<li><code>on_error</code> (of type
<code>(error  .{kind : string, message : string, positions : [string]  }) -&gt; unit</code>,
which defaults to <code>&lt;fun&gt;</code>): Callback executed when an
error occurs.</li>
<li><code>on_start</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
starts.</li>
<li><code>on_stop</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback executed when output
stops.</li>
<li><code>restart_delay</code> (of type <code>float?</code>, which
defaults to <code>2.</code>): If not <code>null</code>, restart output
on errors after the given delay.</li>
<li><code>self_sync</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Should the source control its own synchronization?
Set to <code>true</code> for output to e.g. <code>rtmp</code> output
using <code>%ffmpeg</code> and etc.</li>
<li><code>start</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Start output as soon as it is available.</li>
<li><code>url</code> (of type <code>string</code>): Url to output
to.</li>
<li><code>(unlabeled)</code> (of type <code>format('a)</code>): Encoding
format.</li>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_started</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the output or source is started.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>shutdown</code> (of type <code>() -&gt; unit</code>): Shutdown
the output or source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>start</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to start.</li>
<li><code>stop</code> (of type <code>() -&gt; unit</code>): Ask the
source or output to stop.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-sound-processing"><a href="#source-sound-processing"
class="anchor">Source / Sound Processing</a></h2>
<h3 id="bass_boost"><a href="#bass_boost"
class="anchor"><code>bass_boost</code></a></h3>
<p>Add some bass to the sound.</p>
<p>Type:</p>
<pre><code>(?frequency : {float}, ?gain : {float},
 source(audio=pcm(&#39;a), video=internal(&#39;b),
 midi=internal(&#39;c))) -&gt; source(audio=pcm(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>frequency</code> (of type <code>{float}</code>, which defaults
to <code>200.</code>): Frequency below which sound is considered as
bass.</li>
<li><code>gain</code> (of type <code>{float}</code>, which defaults to
<code>10.</code>): Amount of boosting (dB).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=internal('b), midi=internal('c))</code>):
Source whose bass should be boosted</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="compress.multiband"><a href="#compress.multiband"
class="anchor"><code>compress.multiband</code></a></h3>
<p>Multiband compression. The list in argument specifies - the
<code>frequency</code> below which we should apply compression (it is
above previous band) - the <code>attack</code> time (ms) - the
<code>release</code> time (ms) - the compression <code>ratio</code> -
the <code>threshold</code> for compression - the <code>gain</code> for
the band</p>
<p>Type:</p>
<pre><code>(?limit : bool, ?wet : {float}, source(audio=pcm(&#39;a),
 video=internal(&#39;b), midi=internal(&#39;c)),
 [&#39;d
  .{
    attack : {float},
    frequency : {float},
    gain : {float},
    ratio : {float},
    release : {float},
    threshold : {float}
  }]) -&gt; source(audio=pcm(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>limit</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Also apply limiting to bands.</li>
<li><code>wet</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=internal('b), midi=internal('c))</code>):
Parameters for compression bands.</li>
<li><code>(unlabeled)</code> (of type
<code>['d  .{    attack : {float},    frequency : {float},    gain : {float},    ratio : {float},    release : {float},    threshold : {float}  }]</code>):
Source on which multiband compression should be applied.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>gain</code> (of type <code>() -&gt; float</code>): Gain
(dB).</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>): RMS or peak
power (linear).</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="dry_wet"><a href="#dry_wet"
class="anchor"><code>dry_wet</code></a></h3>
<p>Mix between dry and wet sources. Useful for testing effects.
Typically:</p>
<pre><code>c = interactive.float(&quot;wetness&quot;, min=0., max=1., 1.)
s = dry_wet(c, s, effect(s))</code></pre>
<p>and vary <code>c</code> to hear the difference between the source
without and with the effect.</p>
<p>Type:</p>
<pre><code>(?power : bool, {float}, source(audio=internal(&#39;a),
 video=internal(&#39;b), midi=internal(&#39;c)),
 source(audio=internal(&#39;a), video=internal(&#39;b),
 midi=internal(&#39;c))) -&gt; source(audio=internal(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>power</code> (of type <code>bool</code>, which defaults to
<code>false</code>): If <code>true</code> use constant power
mixing.</li>
<li><code>(unlabeled)</code> (of type <code>{float}</code>): Wetness
coefficient, from 0 (fully dry) to 1 (fully wet).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=internal('a), video=internal('b), midi=internal('c))</code>):
Dry source.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=internal('a), video=internal('b), midi=internal('c))</code>):
Wet source.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="fade.in"><a href="#fade.in"
class="anchor"><code>fade.in</code></a></h3>
<p>Fade the beginning of tracks.</p>
<p>Type:</p>
<pre><code>(?id : string, ?duration : float,
 ?override_duration : string, ?override_type : string,
 ?track_sensitive : bool, ?type : string,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string</code>, which defaults to
<code>"fade.in"</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Duration of the fading. This value can be set on a
per-file basis using the metadata field passed as override.</li>
<li><code>override_duration</code> (of type <code>string</code>, which
defaults to <code>"liq_fade_in"</code>): Metadata field which, if
present and containing a float, overrides the ‘duration’ parameter for
current track.</li>
<li><code>override_type</code> (of type <code>string</code>, which
defaults to <code>"liq_fade_type"</code>): Metadata field which, if
present and correct, overrides the ‘type’ parameter for current
track.</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Be track sensitive (if
<code>false</code> we only fade in once at the beginning of the
track).</li>
<li><code>type</code> (of type <code>string</code>, which defaults to
<code>"lin"</code>): Fader shape (lin|sin|log|exp): linear, sinusoidal,
logarithmic or exponential.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="fade.out"><a href="#fade.out"
class="anchor"><code>fade.out</code></a></h3>
<p>Fade the end of tracks.</p>
<p>Type:</p>
<pre><code>(?id : string, ?duration : float,
 ?override_duration : string, ?override_type : string,
 ?track_sensitive : bool, ?type : string,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string</code>, which defaults to
<code>"fade.out"</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Duration of the fading. This value can be set on a
per-file basis using the metadata field passed as override.</li>
<li><code>override_duration</code> (of type <code>string</code>, which
defaults to <code>"liq_fade_out"</code>): Metadata field which, if
present and containing a float, overrides the ‘duration’ parameter for
current track.</li>
<li><code>override_type</code> (of type <code>string</code>, which
defaults to <code>"liq_fade_type"</code>): Metadata field which, if
present and correct, overrides the ‘type’ parameter for current
track.</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Be track sensitive (if
<code>false</code> we only fade ou once at the beginning of the
track).</li>
<li><code>type</code> (of type <code>string</code>, which defaults to
<code>"lin"</code>): Fader shape (lin|sin|log|exp): linear, sinusoidal,
logarithmic or exponential.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="fade.skip"><a href="#fade.skip"
class="anchor"><code>fade.skip</code></a></h3>
<p>Fade when the metadata trigger is received and then skip.</p>
<p>Type:</p>
<pre><code>(?id : string, ?duration : float,
 ?override_duration : string, ?override_type : string,
 ?override_skip : string, ?type : string,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string</code>, which defaults to
<code>"fade.skip"</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>5.</code>): Duration of the fading. This value can be set on a
per-file basis using the metadata field passed as override.</li>
<li><code>override_duration</code> (of type <code>string</code>, which
defaults to <code>"liq_fade_skip"</code>): Metadata field which, if
present and containing a float, overrides the ‘duration’ parameter for
current track.</li>
<li><code>override_type</code> (of type <code>string</code>, which
defaults to <code>"liq_fade_skip"</code>): Metadata field which, if
present and correct, overrides the ‘type’ parameter for current
track.</li>
<li><code>override_skip</code> (of type <code>string</code>, which
defaults to <code>"liq_skip_meta"</code>): Metadata field which, when
present and set to “true”, will trigger the fade</li>
<li><code>type</code> (of type <code>string</code>, which defaults to
<code>"lin"</code>): Fader shape (lin|sin|log|exp): linear, sinusoidal,
logarithmic or exponential.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="filter.iir.eq.low_high"><a href="#filter.iir.eq.low_high"
class="anchor"><code>filter.iir.eq.low_high</code></a></h3>
<p>A bandpass filter obtained by chaining a low-pass and a high-pass
filter.</p>
<p>Type:</p>
<pre><code>(?id : string?, low : {float}, high : {float},
 ?q : float, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>low</code> (of type <code>{float}</code>): Lower frequency of
the bandpass filter.</li>
<li><code>high</code> (of type <code>{float}</code>): Higher frequency
of the bandpass filter.</li>
<li><code>q</code> (of type <code>float</code>, which defaults to
<code>1.</code>): Q factor.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>): Force the value of
the source ID.</li>
</ul>
<h3 id="limit"><a href="#limit"
class="anchor"><code>limit</code></a></h3>
<p>A limiter. This is a <code>compress</code> with tweaked
parameters.</p>
<p>Type:</p>
<pre><code>(?attack : {float}, ?release : {float}, ?ratio : {float},
 ?threshold : {float}, ?pre_gain : {float},
 ?gain : {float}, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>attack</code> (of type <code>{float}</code>, which defaults to
<code>50.</code>)</li>
<li><code>release</code> (of type <code>{float}</code>, which defaults
to <code>200.</code>)</li>
<li><code>ratio</code> (of type <code>{float}</code>, which defaults to
<code>20.</code>)</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>-2.</code>)</li>
<li><code>pre_gain</code> (of type <code>{float}</code>, which defaults
to <code>0.</code>)</li>
<li><code>gain</code> (of type <code>{float}</code>, which defaults to
<code>0.</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>gain</code> (of type <code>() -&gt; float</code>): Gain
(dB).</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>): RMS or peak
power (linear).</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="mic_filter"><a href="#mic_filter"
class="anchor"><code>mic_filter</code></a></h3>
<p>Remove low frequencies often produced by microphones.</p>
<p>Type:</p>
<pre><code>(?frequency : float, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>frequency</code> (of type <code>float</code>, which defaults
to <code>200.</code>): Frequency under which sound should be
lowered.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>): The input
source.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="normalize"><a href="#normalize"
class="anchor"><code>normalize</code></a></h3>
<p>Normalization the volume of a stream (this is also called
<em>automatic gain control</em>). Dynamic normalization of the signal is
sometimes the only option (for instance, for live sources), and can make
a listening experience much nicer. However, its dynamic aspect implies
some limitations which can go as far as creating saturation in some
extreme cases. If possible, consider using some track-based
normalization techniques such as those based on ReplayGain. The
implementation of Liquidsoap &lt; 2.0 was renamed to
<code>normalize.old</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?target : {float}, ?up : {float},
 ?down : {float}, ?gain_min : float, ?gain_max : float,
 ?lufs : bool, ?lookahead : {float}, ?window : {float},
 ?threshold : {float}, ?track_sensitive : bool,
 ?debug : float??, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>target</code> (of type <code>{float}</code>, which defaults to
<code>-13.</code>): Desired RMS (dB).</li>
<li><code>up</code> (of type <code>{float}</code>, which defaults to
<code>10.</code>): Characteristic time to go up.</li>
<li><code>down</code> (of type <code>{float}</code>, which defaults to
<code>0.1</code>): Characteristic time to go down.</li>
<li><code>gain_min</code> (of type <code>float</code>, which defaults to
<code>-12.</code>): Minimal gain value (dB).</li>
<li><code>gain_max</code> (of type <code>float</code>, which defaults to
<code>12.</code>): Maximal gain value (dB).</li>
<li><code>lufs</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Use LUFS instead of RMS to compute intensity.</li>
<li><code>lookahead</code> (of type <code>{float}</code>, which defaults
to <code>0.</code>): How much time to look ahead of the signal (second).
Setting a positive value delays the output by the corresponding amount
of time.</li>
<li><code>window</code> (of type <code>{float}</code>, which defaults to
<code>0.5</code>): Duration of the window used to compute the current
RMS power (second).</li>
<li><code>threshold</code> (of type <code>{float}</code>, which defaults
to <code>-40.</code>): Minimal RMS for activaing gain control (dB).</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>)</li>
<li><code>debug</code> (of type <code>float??</code>, which defaults to
<code>null</code>): How often to print debug messages, in seconds,
useful to finetune the parameters. You should set
<code>set("log.level", 5)</code> to see them.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>): Source to
normalize.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>gain</code> (of type <code>() -&gt; float</code>): Current
amplification coefficient (in linear scale).</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>): Current rms
(in linear scale).</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>target_gain</code> (of type <code>() -&gt; float</code>):
Current target amplification coefficient (in linear scale).</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="replaygain"><a href="#replaygain"
class="anchor"><code>replaygain</code></a></h3>
<p>Amplify source tracks according to replaygain metadata. This operator
does not compute itself the replaygain: you can use either
<code>enable_replaygain_metadata</code> or the <code>replaygain:</code>
protocol for this.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?ebu_r128 : bool, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>ebu_r128</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Also amplify according to EBU R128 tags.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>): Source to be
amplified.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-sound-synthesis"><a href="#source-sound-synthesis"
class="anchor">Source / Sound Synthesis</a></h2>
<h3 id="dssi.register"><a href="#dssi.register"
class="anchor"><code>dssi.register</code></a></h3>
<p>Register a DSSI plugin.</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Path of the
DSSI plugin file.</li>
</ul>
<h3 id="dtmf"><a href="#dtmf" class="anchor"><code>dtmf</code></a></h3>
<p>Generate DTMF tones.</p>
<p>Type:</p>
<pre><code>(?duration : float, ?delay : float, string) -&gt;
source(audio=internal(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>0.1</code>): Duration of a tone (in seconds).</li>
<li><code>delay</code> (of type <code>float</code>, which defaults to
<code>0.05</code>): Dealy between two successive tones (in
seconds).</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): String
describing DTMF tones to generates: it should contains characters 0 to
9, A to D, or * or #.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="synth.all.saw"><a href="#synth.all.saw"
class="anchor"><code>synth.all.saw</code></a></h3>
<p>Saw synthesizer. It creates one synthesizer for each channel.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?attack : float, ?decay : float,
 ?envelope : bool, ?release : float, ?sustain : float,
 source(audio=pcm(mono), video=&#39;a,
 midi=midi(channels=16))) -&gt; source(audio=pcm(mono),
video=&#39;a, midi=midi(channels=16))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>attack</code> (of type <code>float</code>, which defaults to
<code>0.02</code>): Envelope attack (in seconds).</li>
<li><code>decay</code> (of type <code>float</code>, which defaults to
<code>0.01</code>): Envelope decay (in seconds).</li>
<li><code>envelope</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Use envelope.</li>
<li><code>release</code> (of type <code>float</code>, which defaults to
<code>0.01</code>): Envelope release (in seconds).</li>
<li><code>sustain</code> (of type <code>float</code>, which defaults to
<code>0.9</code>): Envelope sustain level.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(mono), video='a, midi=midi(channels=16))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="synth.all.sine"><a href="#synth.all.sine"
class="anchor"><code>synth.all.sine</code></a></h3>
<p>Sine synthesizer. It creates one synthesizer for each channel.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?attack : float, ?decay : float,
 ?envelope : bool, ?release : float, ?sustain : float,
 source(audio=pcm(mono), video=&#39;a,
 midi=midi(channels=16))) -&gt; source(audio=pcm(mono),
video=&#39;a, midi=midi(channels=16))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>attack</code> (of type <code>float</code>, which defaults to
<code>0.02</code>): Envelope attack (in seconds).</li>
<li><code>decay</code> (of type <code>float</code>, which defaults to
<code>0.01</code>): Envelope decay (in seconds).</li>
<li><code>envelope</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Use envelope.</li>
<li><code>release</code> (of type <code>float</code>, which defaults to
<code>0.01</code>): Envelope release (in seconds).</li>
<li><code>sustain</code> (of type <code>float</code>, which defaults to
<code>0.9</code>): Envelope sustain level.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(mono), video='a, midi=midi(channels=16))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="synth.all.square"><a href="#synth.all.square"
class="anchor"><code>synth.all.square</code></a></h3>
<p>Square synthesizer. It creates one synthesizer for each channel.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?attack : float, ?decay : float,
 ?envelope : bool, ?release : float, ?sustain : float,
 source(audio=pcm(mono), video=&#39;a,
 midi=midi(channels=16))) -&gt; source(audio=pcm(mono),
video=&#39;a, midi=midi(channels=16))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>attack</code> (of type <code>float</code>, which defaults to
<code>0.02</code>): Envelope attack (in seconds).</li>
<li><code>decay</code> (of type <code>float</code>, which defaults to
<code>0.01</code>): Envelope decay (in seconds).</li>
<li><code>envelope</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Use envelope.</li>
<li><code>release</code> (of type <code>float</code>, which defaults to
<code>0.01</code>): Envelope release (in seconds).</li>
<li><code>sustain</code> (of type <code>float</code>, which defaults to
<code>0.9</code>): Envelope sustain level.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(mono), video='a, midi=midi(channels=16))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="synth.saw"><a href="#synth.saw"
class="anchor"><code>synth.saw</code></a></h3>
<p>Saw synthesizer.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?attack : float, ?channel : int,
 ?decay : float, ?envelope : bool, ?release : float,
 ?sustain : float, ?volume : float,
 source(audio=pcm(mono), video=&#39;a,
 midi=midi(channels=1))) -&gt; source(audio=pcm(mono),
video=&#39;a, midi=midi(channels=1))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>attack</code> (of type <code>float</code>, which defaults to
<code>0.02</code>): Envelope attack (in seconds).</li>
<li><code>channel</code> (of type <code>int</code>, which defaults to
<code>0</code>): MIDI channel to handle.</li>
<li><code>decay</code> (of type <code>float</code>, which defaults to
<code>0.01</code>): Envelope decay (in seconds).</li>
<li><code>envelope</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Use envelope.</li>
<li><code>release</code> (of type <code>float</code>, which defaults to
<code>0.05</code>): Envelope release (in seconds).</li>
<li><code>sustain</code> (of type <code>float</code>, which defaults to
<code>0.9</code>): Envelope sustain level.</li>
<li><code>volume</code> (of type <code>float</code>, which defaults to
<code>0.3</code>): Initial volume.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(mono), video='a, midi=midi(channels=1))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="synth.sine"><a href="#synth.sine"
class="anchor"><code>synth.sine</code></a></h3>
<p>Sine synthesizer.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?attack : float, ?channel : int,
 ?decay : float, ?envelope : bool, ?release : float,
 ?sustain : float, ?volume : float,
 source(audio=pcm(mono), video=&#39;a,
 midi=midi(channels=1))) -&gt; source(audio=pcm(mono),
video=&#39;a, midi=midi(channels=1))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>attack</code> (of type <code>float</code>, which defaults to
<code>0.02</code>): Envelope attack (in seconds).</li>
<li><code>channel</code> (of type <code>int</code>, which defaults to
<code>0</code>): MIDI channel to handle.</li>
<li><code>decay</code> (of type <code>float</code>, which defaults to
<code>0.01</code>): Envelope decay (in seconds).</li>
<li><code>envelope</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Use envelope.</li>
<li><code>release</code> (of type <code>float</code>, which defaults to
<code>0.05</code>): Envelope release (in seconds).</li>
<li><code>sustain</code> (of type <code>float</code>, which defaults to
<code>0.9</code>): Envelope sustain level.</li>
<li><code>volume</code> (of type <code>float</code>, which defaults to
<code>0.3</code>): Initial volume.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(mono), video='a, midi=midi(channels=1))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="synth.square"><a href="#synth.square"
class="anchor"><code>synth.square</code></a></h3>
<p>Square synthesizer.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?attack : float, ?channel : int,
 ?decay : float, ?envelope : bool, ?release : float,
 ?sustain : float, ?volume : float,
 source(audio=pcm(mono), video=&#39;a,
 midi=midi(channels=1))) -&gt; source(audio=pcm(mono),
video=&#39;a, midi=midi(channels=1))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>attack</code> (of type <code>float</code>, which defaults to
<code>0.02</code>): Envelope attack (in seconds).</li>
<li><code>channel</code> (of type <code>int</code>, which defaults to
<code>0</code>): MIDI channel to handle.</li>
<li><code>decay</code> (of type <code>float</code>, which defaults to
<code>0.01</code>): Envelope decay (in seconds).</li>
<li><code>envelope</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Use envelope.</li>
<li><code>release</code> (of type <code>float</code>, which defaults to
<code>0.05</code>): Envelope release (in seconds).</li>
<li><code>sustain</code> (of type <code>float</code>, which defaults to
<code>0.9</code>): Envelope sustain level.</li>
<li><code>volume</code> (of type <code>float</code>, which defaults to
<code>0.3</code>): Initial volume.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm(mono), video='a, midi=midi(channels=1))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-track-processing"><a href="#source-track-processing"
class="anchor">Source / Track Processing</a></h2>
<h3 id="append"><a href="#append"
class="anchor"><code>append</code></a></h3>
<p>Append an extra track to every track. Set the metadata ‘liq_append’
to ‘false’ to inhibit appending on one track.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?insert_missing : bool, ?merge : bool,
 source(audio=&#39;a, video=&#39;b, midi=&#39;c),
 (([string * string]) -&gt; source(audio=&#39;a, video=&#39;b,
  midi=&#39;c))) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>insert_missing</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Treat track beginnings without metadata
as having empty one.</li>
<li><code>merge</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Merge the track with its appended track.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>([string * string]) -&gt; source(audio='a, video='b, midi='c)</code>):
Given the metadata, build the source producing the track to append. This
source is allowed to fail (produce nothing) if no relevant track is to
be appended.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="blank.detect"><a href="#blank.detect"
class="anchor"><code>blank.detect</code></a></h3>
<p>Calls a given handler when detecting a blank.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?max_blank : float, ?min_noise : float,
 ?on_noise : (() -&gt; unit), ?start_blank : bool,
 ?threshold : float, ?track_sensitive : bool,
 (() -&gt; unit), source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>max_blank</code> (of type <code>float</code>, which defaults
to <code>20.</code>): Maximum duration of silence allowed, in
seconds.</li>
<li><code>min_noise</code> (of type <code>float</code>, which defaults
to <code>0.</code>): Minimum duration of noise required to end silence,
in seconds.</li>
<li><code>on_noise</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Handler called when noise is
detected.</li>
<li><code>start_blank</code> (of type <code>bool</code>, which defaults
to <code>false</code>): Start assuming we have blank.</li>
<li><code>threshold</code> (of type <code>float</code>, which defaults
to <code>-40.</code>): Power in decibels under which the stream is
considered silent.</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Reset blank counter at each track.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>):
Handler called when blank is detected.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_blank</code> (of type <code>() -&gt; bool</code>): Indicate
whether blank was detected.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="blank.eat"><a href="#blank.eat"
class="anchor"><code>blank.eat</code></a></h3>
<p>Eat blanks, i.e., drop the contents of the stream until it is not
blank anymore.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?at_beginning : bool, ?max_blank : float,
 ?min_noise : float, ?start_blank : bool,
 ?threshold : float, ?track_sensitive : bool,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>at_beginning</code> (of type <code>bool</code>, which defaults
to <code>false</code>): Only eat at the beginning of a track.</li>
<li><code>max_blank</code> (of type <code>float</code>, which defaults
to <code>20.</code>): Maximum duration of silence allowed, in
seconds.</li>
<li><code>min_noise</code> (of type <code>float</code>, which defaults
to <code>0.</code>): Minimum duration of noise required to end silence,
in seconds.</li>
<li><code>start_blank</code> (of type <code>bool</code>, which defaults
to <code>false</code>): Start assuming we have blank.</li>
<li><code>threshold</code> (of type <code>float</code>, which defaults
to <code>-40.</code>): Power in decibels under which the stream is
considered silent.</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Reset blank counter at each track.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_blank</code> (of type <code>() -&gt; bool</code>): Indicate
whether blank was detected.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="blank.skip"><a href="#blank.skip"
class="anchor"><code>blank.skip</code></a></h3>
<p>Skip track when detecting a blank.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?threshold : float, ?max_blank : float,
 ?min_noise : float, ?track_sensitive : bool,
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)
 .{skip : () -&gt; unit}) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>threshold</code> (of type <code>float</code>, which defaults
to <code>-40.</code>): Power in decibels under which the stream is
considered silent.</li>
<li><code>max_blank</code> (of type <code>float</code>, which defaults
to <code>20.</code>): Maximum silence length allowed, in seconds.</li>
<li><code>min_noise</code> (of type <code>float</code>, which defaults
to <code>0.</code>): Minimum duration of noise required to end silence,
in seconds.</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Reset blank counter at each track.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c) .{skip : () -&gt; unit}</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_blank</code> (of type <code>() -&gt; bool</code>): Indicate
whether blank was detected.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="blank.strip"><a href="#blank.strip"
class="anchor"><code>blank.strip</code></a></h3>
<p>Make the source unavailable when it is streaming blank.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?max_blank : float, ?min_noise : float,
 ?start_blank : bool, ?threshold : float,
 ?track_sensitive : bool, source(audio=pcm(&#39;a), video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>max_blank</code> (of type <code>float</code>, which defaults
to <code>20.</code>): Maximum duration of silence allowed, in
seconds.</li>
<li><code>min_noise</code> (of type <code>float</code>, which defaults
to <code>0.</code>): Minimum duration of noise required to end silence,
in seconds.</li>
<li><code>start_blank</code> (of type <code>bool</code>, which defaults
to <code>false</code>): Start assuming we have blank.</li>
<li><code>threshold</code> (of type <code>float</code>, which defaults
to <code>-40.</code>): Power in decibels under which the stream is
considered silent.</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Reset blank counter at each track.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_blank</code> (of type <code>() -&gt; bool</code>): Indicate
whether blank was detected.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="chop"><a href="#chop" class="anchor"><code>chop</code></a></h3>
<p>Regularly insert track boundaries in a stream (useful for testing
tracks).</p>
<p>Type:</p>
<pre><code>(?every : {float}, ?metadata : {[string * string]},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>every</code> (of type <code>{float}</code>, which defaults to
<code>3.</code>): Duration of a track (in seconds).</li>
<li><code>metadata</code> (of type <code>{[string * string]}</code>,
which defaults to <code>[]</code>): Metadata for tracks.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>): The stream.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="cross.simple"><a href="#cross.simple"
class="anchor"><code>cross.simple</code></a></h3>
<p>Simple transition for crossfade</p>
<p>Type:</p>
<pre><code>(?fade_in : float, ?fade_out : float,
 source(audio=pcm(&#39;a), video=internal(&#39;b),
 midi=internal(&#39;c)), source(audio=pcm(&#39;a),
 video=internal(&#39;b), midi=internal(&#39;c))) -&gt;
source(audio=pcm(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>fade_in</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Fade-in duration, if any.</li>
<li><code>fade_out</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Fade-out duration, if any.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=internal('b), midi=internal('c))</code>):
Ending track</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=internal('b), midi=internal('c))</code>):
Starting track</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="cross.smart"><a href="#cross.smart"
class="anchor"><code>cross.smart</code></a></h3>
<p>Smart transition for crossfade</p>
<p>Type:</p>
<pre><code>(?log : ((string) -&gt; unit), ?fade_in : float,
 ?fade_out : float,
 ?default : ((source(audio=pcm(&#39;a), video=internal(&#39;b),
              midi=internal(&#39;c)), source(audio=pcm(&#39;a),
              video=internal(&#39;b), midi=internal(&#39;c))) -&gt;
             source(audio=pcm(&#39;a), video=internal(&#39;b),
             midi=internal(&#39;c))),
 ?high : float, ?medium : float, ?margin : float, &#39;d
 .{
   db_level : float,
   metadata : [string * string],
   source : source(audio=pcm(&#39;a),
   video=internal(&#39;b),
   midi=internal(&#39;c))
 }, &#39;e
 .{
   db_level : float,
   metadata : [string * string],
   source : source(audio=pcm(&#39;a),
   video=internal(&#39;b),
   midi=internal(&#39;c))
 }) -&gt; source(audio=pcm(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>log</code> (of type <code>(string) -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Default logger</li>
<li><code>fade_in</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Fade-in duration, if any.</li>
<li><code>fade_out</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Fade-out duration, if any.</li>
<li><code>default</code> (of type
<code>(source(audio=pcm('a), video=internal('b),  midi=internal('c)), source(audio=pcm('a),  video=internal('b), midi=internal('c))) -&gt; source(audio=pcm('a), video=internal('b), midi=internal('c))</code>,
which defaults to <code>&lt;fun&gt;</code>): Smart crossfade: transition
used when no rule applies (default: sequence).</li>
<li><code>high</code> (of type <code>float</code>, which defaults to
<code>-15.</code>): Value, in dB, for loud sound level.</li>
<li><code>medium</code> (of type <code>float</code>, which defaults to
<code>-32.</code>): Value, in dB, for medium sound level.</li>
<li><code>margin</code> (of type <code>float</code>, which defaults to
<code>4.</code>): Margin to detect sources that have too different sound
level for crossing.</li>
<li><code>(unlabeled)</code> (of type
<code>'d .{   db_level : float,   metadata : [string * string],   source : source(audio=pcm('a),   video=internal('b),   midi=internal('c)) }</code>):
Ending track</li>
<li><code>(unlabeled)</code> (of type
<code>'e .{   db_level : float,   metadata : [string * string],   source : source(audio=pcm('a),   video=internal('b),   midi=internal('c)) }</code>):
Starting track</li>
</ul>
<h3 id="crossfade"><a href="#crossfade"
class="anchor"><code>crossfade</code></a></h3>
<p>Crossfade between tracks, taking the respective volume levels into
account in the choice of the transition.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float,
 ?override_duration : string, ?fade_in : float,
 ?fade_out : float, ?smart : bool,
 ?default : ((source(audio=pcm(&#39;a), video=internal(&#39;b),
              midi=internal(&#39;c)), source(audio=pcm(&#39;a),
              video=internal(&#39;b), midi=internal(&#39;c))) -&gt;
             source(audio=pcm(&#39;a), video=internal(&#39;b),
             midi=internal(&#39;c))),
 ?high : float, ?medium : float, ?margin : float,
 ?deduplicate : bool, ?minimum : float, ?width : float,
 ?conservative : bool, source(audio=pcm(&#39;a),
 video=internal(&#39;b), midi=internal(&#39;c))) -&gt;
source(audio=pcm(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>5.</code>): Duration (in seconds) of buffered data from each track
that is used to compute the transition between tracks.</li>
<li><code>override_duration</code> (of type <code>string</code>, which
defaults to <code>"liq_cross_duration"</code>): Metadata field which, if
present and containing a float, overrides the ‘duration’ parameter for
current track.</li>
<li><code>fade_in</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Fade-in duration, if any.</li>
<li><code>fade_out</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Fade-out duration, if any.</li>
<li><code>smart</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Enable smart crossfading</li>
<li><code>default</code> (of type
<code>(source(audio=pcm('a), video=internal('b),  midi=internal('c)), source(audio=pcm('a),  video=internal('b), midi=internal('c))) -&gt; source(audio=pcm('a), video=internal('b), midi=internal('c))</code>,
which defaults to <code>&lt;fun&gt;</code>): Smart crossfade: transition
used when no rule applies (default: sequence).</li>
<li><code>high</code> (of type <code>float</code>, which defaults to
<code>-15.</code>): Smart crossfade: value, in dB, for loud sound
level.</li>
<li><code>medium</code> (of type <code>float</code>, which defaults to
<code>-32.</code>): Smart crossfade: value, in dB, for medium sound
level.</li>
<li><code>margin</code> (of type <code>float</code>, which defaults to
<code>4.</code>): Smart crossfade: margin to detect sources that have
too different sound level for crossing.</li>
<li><code>deduplicate</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Crossfade transitions can generate duplicate
metadata. When <code>true</code>, the operator removes duplicate
metadata from the returned source.</li>
<li><code>minimum</code> (of type <code>float</code>, which defaults to
<code>-1.</code>): Minimum duration (in sec.) for a cross: If the track
ends without any warning (e.g. in case of skip) there may not be enough
data for a decent composition. Set to 0. to avoid having transitions
after skips, or more to avoid transitions on short tracks. With a
negative default, transitions always occur.</li>
<li><code>width</code> (of type <code>float</code>, which defaults to
<code>2.</code>): Width of the volume analysis window.</li>
<li><code>conservative</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Always prepare for a premature end-of-track.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=internal('b), midi=internal('c))</code>):
The input source.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="cue_cut"><a href="#cue_cut"
class="anchor"><code>cue_cut</code></a></h3>
<p>Start track after a cue in point and stop it at cue out point. The
cue points are given as metadata, in seconds from the beginning of
tracks.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?cue_in_metadata : string,
 ?cue_out_metadata : string, ?on_cue_in : (() -&gt; unit),
 ?on_cue_out : (() -&gt; unit), source(audio=&#39;a, video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>cue_in_metadata</code> (of type <code>string</code>, which
defaults to <code>"liq_cue_in"</code>): Metadata for cue in points.</li>
<li><code>cue_out_metadata</code> (of type <code>string</code>, which
defaults to <code>"liq_cue_out"</code>): Metadata for cue out
points.</li>
<li><code>on_cue_in</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback to execute on cue
in</li>
<li><code>on_cue_out</code> (of type <code>() -&gt; unit</code>, which
defaults to <code>&lt;fun&gt;</code>): Callback to execute on cue
out</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="delay"><a href="#delay"
class="anchor"><code>delay</code></a></h3>
<p>Make the source unavailable for a given time between tracks.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?initial : bool, {float},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>initial</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Start in unavailable state, as if a track had just
finished.</li>
<li><code>(unlabeled)</code> (of type <code>{float}</code>): The source
won’t be ready less than this amount of seconds after any end of
track</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="drop_metadata"><a href="#drop_metadata"
class="anchor"><code>drop_metadata</code></a></h3>
<p>Removes all metadata coming from a source.</p>
<p>Type:</p>
<pre><code>(source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="fallback"><a href="#fallback"
class="anchor"><code>fallback</code></a></h3>
<p>At the beginning of each track, select the first ready child.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?override : string,
 ?replay_metadata : bool, ?track_sensitive : bool,
 ?transition_length : float,
 ?transitions : [(source(audio=&#39;a, video=&#39;b, midi=&#39;c),
                  source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
                 source(audio=&#39;a, video=&#39;b, midi=&#39;c)],
 [source(audio=&#39;a, video=&#39;b, midi=&#39;c)]) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>override</code> (of type <code>string</code>, which defaults
to <code>"liq_transition_length"</code>): Metadata field which, if
present and containing a float, overrides the
<code>transition_length</code> parameter.</li>
<li><code>replay_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Replay the last metadata of a child when
switching to it in the middle of a track.</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Re-select only on end of tracks.</li>
<li><code>transition_length</code> (of type <code>float</code>, which
defaults to <code>5.</code>): Maximum transition duration.</li>
<li><code>transitions</code> (of type
<code>[(source(audio='a, video='b, midi='c), source(audio='a,   video='b, midi='c)) -&gt; source(audio='a, video='b,  midi='c)]</code>,
which defaults to <code>[]</code>): Transition functions, padded with
<code>fun (x,y) -&gt; y</code> functions.</li>
<li><code>(unlabeled)</code> (of type
<code>[source(audio='a, video='b, midi='c)]</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source(audio='A, video='B, midi='C)?</code>): Currently
selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="insert_metadata"><a href="#insert_metadata"
class="anchor"><code>insert_metadata</code></a></h3>
<p>Dynamically insert metadata in a stream. Returns the source decorated
with a method <code>insert_metadata</code> which is a function of type
<code>(?new_track,metadata)-&gt;unit</code>, used to insert metadata in
the source. This function also inserts a new track with the given
metadata if passed <code>new_track=true</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>): Insert
metadata in the source. The <code>new_track</code> parameter indicates
whether a track boundary should also be inserted (by default, no track
is inserted).</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="map_first_track"><a href="#map_first_track"
class="anchor"><code>map_first_track</code></a></h3>
<p>Apply a function to the first track of a source</p>
<p>Type:</p>
<pre><code>(?id : string?,
 ((source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
  source(audio=&#39;a, video=&#39;b, midi=&#39;c)),
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>(source(audio='a, video='b, midi='c)) -&gt; source(audio='a, video='b, midi='c)</code>):
The applied function.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>): The input
source.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source(audio='A, video='B, midi='C)?</code>): Currently
selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="max_duration"><a href="#max_duration"
class="anchor"><code>max_duration</code></a></h3>
<p>Limit source duration</p>
<p>Type:</p>
<pre><code>(?id : string?, ?override : string, float,
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>override</code> (of type <code>string</code>, which defaults
to <code>"liq_remaining"</code>): Metadata field which, if present and
containing a float, overrides the remaining play time.</li>
<li><code>(unlabeled)</code> (of type <code>float</code>): Maximum
duration</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="merge_tracks"><a href="#merge_tracks"
class="anchor"><code>merge_tracks</code></a></h3>
<p>Merge consecutive tracks from the input source. They will be
considered as one big track, so <code>on_track()</code> will not trigger
for example.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="metadata.artist"><a href="#metadata.artist"
class="anchor"><code>metadata.artist</code></a></h3>
<p>Extract artist from metadata.</p>
<p>Type:</p>
<pre><code>([string * string]) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="metadata.comment"><a href="#metadata.comment"
class="anchor"><code>metadata.comment</code></a></h3>
<p>Extract comment from metadata.</p>
<p>Type:</p>
<pre><code>([string * string]) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="metadata.cover"><a href="#metadata.cover"
class="anchor"><code>metadata.cover</code></a></h3>
<p>Extract cover from metadata. This function implements cover
extraction for the following formats: coverart (ogg) and apic (flac,
mp3).</p>
<p>Type:</p>
<pre><code>(?coverart_mime : string?, [string * string]) -&gt; string
.{mime : string}?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>coverart_mime</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Mime type to use for
<code>"coverart"</code> metadata. Support disasbled if
<code>null</code>.</li>
<li><code>(unlabeled)</code> (of type <code>[string * string]</code>):
Metadata from which the cover should be extracted.</li>
</ul>
<h3 id="metadata.cover.remove"><a href="#metadata.cover.remove"
class="anchor"><code>metadata.cover.remove</code></a></h3>
<p>Remove cover metadata. This is mostly useful in order not to flood
logs with coverart when logging metadata.</p>
<p>Type:</p>
<pre><code>([string * &#39;a]) -&gt; [string * &#39;a]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>[string * 'a]</code>)</li>
</ul>
<h3 id="metadata.deduplicate"><a href="#metadata.deduplicate"
class="anchor"><code>metadata.deduplicate</code></a></h3>
<p>Remove duplicate metadata in source</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>"metadata.deduplicate"</code>): Source id</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>): source</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="metadata.export"><a href="#metadata.export"
class="anchor"><code>metadata.export</code></a></h3>
<p>Cleanup metadata for export. This is used to remove Liquidsoap’s
internal metadata entries before sending them. List of exported metadata
is set using <code>settings.encoder.metadata.export.set</code>.</p>
<p>Type:</p>
<pre><code>([string * string]) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="metadata.filename"><a href="#metadata.filename"
class="anchor"><code>metadata.filename</code></a></h3>
<p>Extract filename from metadata.</p>
<p>Type:</p>
<pre><code>([string * string]) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="metadata.map"><a href="#metadata.map"
class="anchor"><code>metadata.map</code></a></h3>
<p>Rewrite metadata on the fly using a function.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?insert_missing : bool, ?strip : bool,
 ?update : bool,
 (([string * string]) -&gt; [string * string]),
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>insert_missing</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Treat track beginnings without metadata
as having empty ones. The operational order is: create empty if needed,
map and strip if enabled.</li>
<li><code>strip</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Completely remove empty metadata. Operates on both
empty values and empty metadata chunk.</li>
<li><code>update</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Update metadata. If false, existing metadata are
cleared and only returned values are set as new metadata.</li>
<li><code>(unlabeled)</code> (of type
<code>([string * string]) -&gt; [string * string]</code>): A function
that returns new metadata.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="metadata.title"><a href="#metadata.title"
class="anchor"><code>metadata.title</code></a></h3>
<p>Extract title from metadata.</p>
<p>Type:</p>
<pre><code>([string * string]) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="mksafe"><a href="#mksafe"
class="anchor"><code>mksafe</code></a></h3>
<p>Turn a source into an infaillible source by adding blank when the
source is not available.</p>
<p>Type:</p>
<pre><code>(?id : string, source(audio=internal(&#39;a),
 video=internal(&#39;b), midi=internal(&#39;c))) -&gt;
source(audio=internal(&#39;a), video=internal(&#39;b),
midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string</code>, which defaults to
<code>"mksafe"</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=internal('a), video=internal('b), midi=internal('c))</code>):
the source to turn infaillible</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source(audio='A, video='B, midi='C)?</code>): Currently
selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="on_offset"><a href="#on_offset"
class="anchor"><code>on_offset</code></a></h3>
<p>Call a given handler when position in track is equal or more than a
given amount of time.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?force : bool, ?offset : float,
 ?override : string,
 ((float, [string * string]) -&gt; unit), source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>force</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Force execution of callback if track ends before
‘offset’ position has been reached.</li>
<li><code>offset</code> (of type <code>float</code>, which defaults to
<code>-1.</code>): Execute handler when position in track is equal or
more than to this value.</li>
<li><code>override</code> (of type <code>string</code>, which defaults
to <code>"liq_on_offset"</code>): Metadata field which, if present and
containing a float, overrides the ‘offset’ parameter.</li>
<li><code>(unlabeled)</code> (of type
<code>(float, [string * string]) -&gt; unit</code>): Function to
execute. First argument is the actual position within the current track,
second is the latest metadata. That function should be fast because it
is executed in the main streaming thread.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="once"><a href="#once" class="anchor"><code>once</code></a></h3>
<p>Creates a source that plays only one track of the input source.</p>
<p>Type:</p>
<pre><code>(source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>): The input
source.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="overlap_sources"><a href="#overlap_sources"
class="anchor"><code>overlap_sources</code></a></h3>
<p>Rotate between overlapping sources. Next track starts according to
‘liq_start_next’ offset metadata.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?normalize : bool, ?start_next : string,
 ?weights : [{float}],
 [source(audio=internal(&#39;a), video=internal(&#39;b),
  midi=internal(&#39;c))]) -&gt; source(audio=internal(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>normalize</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>start_next</code> (of type <code>string</code>, which defaults
to <code>"liq_start_next"</code>): Metadata field indicating when the
next track should start, relative to current track’s time.</li>
<li><code>weights</code> (of type <code>[{float}]</code>, which defaults
to <code>[]</code>): Relative weight of the sources in the sum. The
empty list stands for the homogeneous distribution.</li>
<li><code>(unlabeled)</code> (of type
<code>[source(audio=internal('a), video=internal('b),  midi=internal('c))]</code>):
Sources to toggle from</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>): Insert
metadata in the source. The <code>new_track</code> parameter indicates
whether a track boundary should also be inserted (by default, no track
is inserted).</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="playlog"><a href="#playlog"
class="anchor"><code>playlog</code></a></h3>
<p>Keep a record of played files. This is primarily useful to know when
a song was last played and avoid repetitions.</p>
<p>Type:</p>
<pre><code>(?duration : float, ?persistency : string?,
 ?hash : (([string * string]) -&gt; string)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>inf</code>): Duration (in seconds) after which songs are
forgotten. By default, songs are not forgotten which means that the
playlog will contain all the songs ever played.</li>
<li><code>persistency</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Set a file name where the values are
stored and loaded in case the script is restarted.</li>
<li><code>hash</code> (of type
<code>([string * string]) -&gt; string</code>, which defaults to
<code>&lt;fun&gt;</code>): Function to extract an identifier from the
metadata. By default, the filename is used but we could return the
artist to know when a song from a given artist was last played for
instance.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type
<code>([string * string]) -&gt; unit</code>): Record that file with
given metadata has been played.</li>
<li><code>last</code> (of type
<code>([string * string]) -&gt; float</code>): How long ago a file was
played (in seconds), <code>infinity</code> is returned if the song has
never been played.</li>
</ul>
<h3 id="prepend"><a href="#prepend"
class="anchor"><code>prepend</code></a></h3>
<p>Prepend an extra track before every track. Set the metadata
‘liq_prepend’ to ‘false’ to inhibit prepending on one track.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?merge : bool, source(audio=&#39;a, video=&#39;b,
 midi=&#39;c),
 (([string * string]) -&gt; source(audio=&#39;a, video=&#39;b,
  midi=&#39;c))) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>merge</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Merge the track with its appended track.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>([string * string]) -&gt; source(audio='a, video='b, midi='c)</code>):
Given the metadata, build the source producing the track to prepend.
This source is allowed to fail (produce nothing) if no relevant track is
to be appended. However, success must be immediate or it will not be
taken into account.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="random"><a href="#random"
class="anchor"><code>random</code></a></h3>
<p>At the beginning of every track, select a random ready child.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?override : string,
 ?replay_metadata : bool, ?transition_length : float,
 ?transitions : [(source(audio=&#39;a, video=&#39;b, midi=&#39;c),
                  source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
                 source(audio=&#39;a, video=&#39;b, midi=&#39;c)],
 ?weights : [{int}],
 [source(audio=&#39;a, video=&#39;b, midi=&#39;c)]) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>override</code> (of type <code>string</code>, which defaults
to <code>"liq_transition_length"</code>): Metadata field which, if
present and containing a float, overrides the
<code>transition_length</code> parameter.</li>
<li><code>replay_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Replay the last metadata of a child when
switching to it in the middle of a track.</li>
<li><code>transition_length</code> (of type <code>float</code>, which
defaults to <code>5.</code>): Maximum transition duration.</li>
<li><code>transitions</code> (of type
<code>[(source(audio='a, video='b, midi='c), source(audio='a,   video='b, midi='c)) -&gt; source(audio='a, video='b,  midi='c)]</code>,
which defaults to <code>[]</code>): Transition functions, padded with
<code>fun (x,y) -&gt; y</code> functions.</li>
<li><code>weights</code> (of type <code>[{int}]</code>, which defaults
to <code>[]</code>): Weights of the children (padded with 1), defining
for each child the probability that it is selected.</li>
<li><code>(unlabeled)</code> (of type
<code>[source(audio='a, video='b, midi='c)]</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source(audio='A, video='B, midi='C)?</code>): Currently
selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="request.player"><a href="#request.player"
class="anchor"><code>request.player</code></a></h3>
<p>Create a source on which plays immediately requests given with the
<code>play</code> method.</p>
<p>Type:</p>
<pre><code>(?simultaneous : bool) -&gt; source(audio=internal(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>simultaneous</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Allow multiple requests to play simultaneously.
If <code>false</code> a new request replaces the previous one.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>length</code> (of type <code>() -&gt; int</code>): Number of
currently playing requests.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>play</code> (of type <code>(request) -&gt; unit</code>): Play
a request.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set</code> (of type
<code>(source(audio=?internal('A), video=?internal('B),  midi=?internal('C))) -&gt; unit</code>):
Set the source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="request.queue"><a href="#request.queue"
class="anchor"><code>request.queue</code></a></h3>
<p>Play a queue of requests (the first added request gets played
first).</p>
<p>Type:</p>
<pre><code>(?id : string?, ?interactive : bool, ?prefetch : int,
 ?native : bool, ?queue : [request], ?timeout : float) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>interactive</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Should the queue be controllable via telnet?</li>
<li><code>prefetch</code> (of type <code>int</code>, which defaults to
<code>1</code>): How many requests should be queued in advance.</li>
<li><code>native</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Use native implementation.</li>
<li><code>queue</code> (of type <code>[request]</code>, which defaults
to <code>[]</code>): Initial queue of requests.</li>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>20.</code>): Timeout (in sec.) for a single download.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(request) -&gt; bool</code>): This
method is internal and should not be used. Consider using
<code>push</code> instead.</li>
<li><code>current</code> (of type <code>() -&gt; request?</code>): Get
the request currently being played.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>fetch</code> (of type <code>() -&gt; bool</code>): Try feeding
the queue with a new request. Returns <code>true</code> if successful.
This method can take long to return and should usually be run in a
separate thread.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>length</code> (of type <code>() -&gt; int</code>): Length of
the queue.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>push</code> (of type
<code>((request) -&gt; unit).{uri : (string) -&gt; unit}</code>): Push a
request on the request queue.</li>
<li><code>queue</code> (of type <code>() -&gt; [request]</code>): Get
the requests currently in the queue.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set_queue</code> (of type
<code>([request]) -&gt; unit</code>)</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="rotate"><a href="#rotate"
class="anchor"><code>rotate</code></a></h3>
<p>Rotate between sources.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?override : string,
 ?replay_metadata : bool, ?transition_length : float,
 ?transitions : [(source(audio=&#39;a, video=&#39;b, midi=&#39;c),
                  source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
                 source(audio=&#39;a, video=&#39;b, midi=&#39;c)],
 ?weights : [{int}],
 [source(audio=&#39;a, video=&#39;b, midi=&#39;c)]) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>override</code> (of type <code>string</code>, which defaults
to <code>"liq_transition_length"</code>): Metadata field which, if
present and containing a float, overrides the
<code>transition_length</code> parameter.</li>
<li><code>replay_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Replay the last metadata of a child when
switching to it in the middle of a track.</li>
<li><code>transition_length</code> (of type <code>float</code>, which
defaults to <code>5.</code>): Maximum transition duration.</li>
<li><code>transitions</code> (of type
<code>[(source(audio='a, video='b, midi='c), source(audio='a,   video='b, midi='c)) -&gt; source(audio='a, video='b,  midi='c)]</code>,
which defaults to <code>[]</code>): Transition functions, padded with
<code>fun (x,y) -&gt; y</code> functions.</li>
<li><code>weights</code> (of type <code>[{int}]</code>, which defaults
to <code>[]</code>): Weights of the children (padded with 1), defining
for each child how many tracks are played from it per round, if that
many are actually available.</li>
<li><code>(unlabeled)</code> (of type
<code>[source(audio='a, video='b, midi='c)]</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source(audio='A, video='B, midi='C)?</code>): Currently
selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="rotate.merge"><a href="#rotate.merge"
class="anchor"><code>rotate.merge</code></a></h3>
<p>Same operator as rotate but merges tracks from each sources. For
instance, <code>rotate.merge([intro,main,outro])</code> creates a source
that plays a sequence <code>[intro,main,outro]</code> as single track
and loops back.</p>
<p>Type:</p>
<pre><code>(?id : string?,
 ?transitions : [(source(audio=internal(&#39;a),
                  video=internal(&#39;b), midi=internal(&#39;c)),
                  source(audio=internal(&#39;a),
                  video=internal(&#39;b), midi=internal(&#39;c))) -&gt;
                 source(audio=internal(&#39;a),
                 video=internal(&#39;b), midi=internal(&#39;c))],
 ?weights : [{int}],
 [source(audio=internal(&#39;a), video=internal(&#39;b),
  midi=internal(&#39;c))]) -&gt; source(audio=internal(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>transitions</code> (of type
<code>[(source(audio=internal('a), video=internal('b),   midi=internal('c)), source(audio=internal('a),   video=internal('b), midi=internal('c))) -&gt;  source(audio=internal('a), video=internal('b),  midi=internal('c))]</code>,
which defaults to <code>[]</code>): Transition functions, padded with
<code>fun (x,y) -&gt; y</code> functions.</li>
<li><code>weights</code> (of type <code>[{int}]</code>, which defaults
to <code>[]</code>): Weights of the children (padded with 1), defining
for each child how many tracks are played from it per round, if that
many are actually available.</li>
<li><code>(unlabeled)</code> (of type
<code>[source(audio=internal('a), video=internal('b),  midi=internal('c))]</code>):
Sequence of sources to be merged</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source(audio='A, video='B, midi='C)?</code>): Currently
selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="sequence"><a href="#sequence"
class="anchor"><code>sequence</code></a></h3>
<p>Play only one track of every successive source, except for the last
one which is played as much as available.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?merge : bool,
 [source(audio=&#39;a, video=&#39;b, midi=&#39;c)]) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>merge</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Merge tracks when advancing from one source to the
next one. This will NOT merge consecutive tracks from the last source;
see merge_tracks() if you need that too.</li>
<li><code>(unlabeled)</code> (of type
<code>[source(audio='a, video='b, midi='c)]</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="server.insert_metadata"><a href="#server.insert_metadata"
class="anchor"><code>server.insert_metadata</code></a></h3>
<p>Register a server/telnet command to update a source’s metadata.
Returns a new source, which will receive the updated metadata. The
command has the following format: insert key1=“val1”,key2=“val2”,…</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>insert_metadata</code> (of type
<code>(?new_track : bool, [string * string]) -&gt; unit</code>): Insert
metadata in the source. The <code>new_track</code> parameter indicates
whether a track boundary should also be inserted (by default, no track
is inserted).</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.available"><a href="#source.available"
class="anchor"><code>source.available</code></a></h3>
<p>Change the availability of a source depending on a predicate.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?override : bool,
 ?track_sensitive : {bool}, source(audio=&#39;a, video=&#39;b,
 midi=&#39;c), {bool}) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>override</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Don’t take availability of original source in
account (this can be dangerous and should be avoided).</li>
<li><code>track_sensitive</code> (of type <code>{bool}</code>, which
defaults to <code>false</code>): Change availability only on end of
tracks.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>): Source of which the
availability should be changed.</li>
<li><code>(unlabeled)</code> (of type <code>{bool}</code>): Predicate
indicating whether the source should be available or not.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.dynamic"><a href="#source.dynamic"
class="anchor"><code>source.dynamic</code></a></h3>
<p>Dynamically change the underlying source: it can either be changed by
the function given as argument, which returns the source to be played,
or by calling the <code>set</code> method.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?infallible : bool,
 ?init : source(audio=&#39;a, video=&#39;b, midi=&#39;c)?,
 ?resurection_time : float?, ?track_sensitive : bool,
 ?(() -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)?)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>infallible</code> (of type <code>bool</code>, which defaults
to <code>false</code>): Whether the source is infallible or not (be
careful when setting this, it will not be checked by the typing
system).</li>
<li><code>init</code> (of type
<code>source(audio='a, video='b, midi='c)?</code>, which defaults to
<code>null</code>): Initial value for the source</li>
<li><code>resurection_time</code> (of type <code>float?</code>, which
defaults to <code>1.</code>): When track sensitive and the source is
unavailable, how long we should wait before trying to update source
again (<code>null</code> means never).</li>
<li><code>track_sensitive</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Whether the source should only be
updated on track change.</li>
<li><code>(unlabeled)</code> (of type
<code>() -&gt; source(audio='a, video='b, midi='c)?</code>, which
defaults to <code>&lt;fun&gt;</code>): Function returning the source to
be used, <code>null</code> means keep current source.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set</code> (of type
<code>(source(audio='A, video='B, midi='C)) -&gt; unit</code>): Set the
source.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<p>This function is experimental.</p>
<h3 id="source.frame.duration"><a href="#source.frame.duration"
class="anchor"><code>source.frame.duration</code></a></h3>
<p>Compute the duration of the last frame.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c
.{frame_duration : float})</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>frame_duration</code> (of type <code>float</code>): Compute
the duration of the last frame.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.frame.rms"><a href="#source.frame.rms"
class="anchor"><code>source.frame.rms</code></a></h3>
<p>Compute the rms of the last frame.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c.{frame_rms : float})</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>frame_rms</code> (of type <code>float</code>): Compute the rms
of the last frame.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.on_end"><a href="#source.on_end"
class="anchor"><code>source.on_end</code></a></h3>
<p>Call a given handler when there is less than a given amount of time
remaining before then end of track.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?delay : {float}, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c),
 ((float, [string * string]) -&gt; unit)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>delay</code> (of type <code>{float}</code>, which defaults to
<code>5.</code>): Execute handler when remaining time is less or equal
to this value.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>(float, [string * string]) -&gt; unit</code>): Function to
execute. First argument is the remaining time, second is the latest
metadata. That function should be fast because it is executed in the
main streaming thread.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.on_frame"><a href="#source.on_frame"
class="anchor"><code>source.on_frame</code></a></h3>
<p>Call a given handler on every frame.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c),
 (() -&gt; unit)) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>):
Function called on every frame. It should be fast because it is executed
in the main streaming thread.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.on_metadata"><a href="#source.on_metadata"
class="anchor"><code>source.on_metadata</code></a></h3>
<p>Call a given handler on metadata packets.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c),
 (([string * string]) -&gt; unit)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>([string * string]) -&gt; unit</code>): Function called on every
metadata packet in the stream. It should be fast because it is executed
in the main streaming thread.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.on_track"><a href="#source.on_track"
class="anchor"><code>source.on_track</code></a></h3>
<p>Call a given handler on new tracks.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c),
 (([string * string]) -&gt; unit)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>([string * string]) -&gt; unit</code>): Function called on every
beginning of track in the stream, with the corresponding metadata as
argument. If there is no metadata at the beginning of track, the empty
list is passed. That function should be fast because it is executed in
the main streaming thread.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.run"><a href="#source.run"
class="anchor"><code>source.run</code></a></h3>
<p>Run a function regularly. This is similar to <code>thread.run</code>
but based on a source internal time instead of the world’s time.</p>
<p>Type:</p>
<pre><code>(source(audio=&#39;a, video=&#39;b, midi=&#39;c), ?delay : float,
 ?every : float?, (() -&gt; unit)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>): Source whose time is
taken as reference.</li>
<li><code>delay</code> (of type <code>float</code>, which defaults to
<code>0.</code>): Time to wait before the first run (in seconds).</li>
<li><code>every</code> (of type <code>float?</code>, which defaults to
<code>null</code>): How often to run the function (in seconds). The
function is run once if <code>null</code>.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>):
Function to run.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="source.say_metadata"><a href="#source.say_metadata"
class="anchor"><code>source.say_metadata</code></a></h3>
<p>Append speech-synthesized tracks reading the metadata.</p>
<p>Type:</p>
<pre><code>(?id : string?,
 ?pattern : (([string * string]) -&gt; string),
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>pattern</code> (of type
<code>([string * string]) -&gt; string</code>, which defaults to
<code>&lt;fun&gt;</code>): Pattern to use</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>): The source to
use</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="switch"><a href="#switch"
class="anchor"><code>switch</code></a></h3>
<p>At the beginning of a track, select the first source whose predicate
is true.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?all_predicates : bool,
 ?override : string, ?replay_metadata : bool,
 ?single : [bool], ?track_sensitive : {bool},
 ?transition_length : float,
 ?transitions : [(source(audio=&#39;a, video=&#39;b, midi=&#39;c),
                  source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
                 source(audio=&#39;a, video=&#39;b, midi=&#39;c)],
 [(() -&gt; bool) * source(audio=&#39;a, video=&#39;b, midi=&#39;c)]) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>all_predicates</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Always evaluate all predicates when
re-selecting.</li>
<li><code>override</code> (of type <code>string</code>, which defaults
to <code>"liq_transition_length"</code>): Metadata field which, if
present and containing a float, overrides the
<code>transition_length</code> parameter.</li>
<li><code>replay_metadata</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Replay the last metadata of a child when
switching to it in the middle of a track.</li>
<li><code>single</code> (of type <code>[bool]</code>, which defaults to
<code>[]</code>): Forbid the selection of a branch for two tracks in a
row. The empty list stands for <code>[false,...,false]</code>.</li>
<li><code>track_sensitive</code> (of type <code>{bool}</code>, which
defaults to <code>true</code>): Re-select only on end of tracks.</li>
<li><code>transition_length</code> (of type <code>float</code>, which
defaults to <code>5.</code>): Maximum transition duration.</li>
<li><code>transitions</code> (of type
<code>[(source(audio='a, video='b, midi='c), source(audio='a,   video='b, midi='c)) -&gt; source(audio='a, video='b,  midi='c)]</code>,
which defaults to <code>[]</code>): Transition functions, padded with
<code>fun (x,y) -&gt; y</code> functions.</li>
<li><code>(unlabeled)</code> (of type
<code>[(() -&gt; bool) * source(audio='a, video='b, midi='c)]</code>):
Sources with the predicate telling when they can be played.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>selected</code> (of type
<code>() -&gt; source(audio='A, video='B, midi='C)?</code>): Currently
selected source.</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-video-processing"><a href="#source-video-processing"
class="anchor">Source / Video Processing</a></h2>
<h3 id="ffmpeg.filter.video.output"><a
href="#ffmpeg.filter.video.output"
class="anchor"><code>ffmpeg.filter.video.output</code></a></h3>
<p>Return a video source from a filter’s output</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fps : int?, ?pass_metadata : bool,
 ffmpeg.filter.graph, ffmpeg.filter.video) -&gt;
source(audio=none, video=ffmpeg.video.raw(&#39;a), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fps</code> (of type <code>int?</code>, which defaults to
<code>null</code>): Output frame per seconds. Defaults to global
value</li>
<li><code>pass_metadata</code> (of type <code>bool</code>, which
defaults to <code>false</code>): Pass ffmpeg stream metadata to
liquidsoap</li>
<li><code>(unlabeled)</code> (of type
<code>ffmpeg.filter.graph</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>ffmpeg.filter.video</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="image"><a href="#image"
class="anchor"><code>image</code></a></h3>
<p>Generate a source from a static image.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?fallible : bool, ?string) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>fallible</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Whether we are allowed to fail (in case the file is
non-existent or invalid).</li>
<li><code>(unlabeled)</code> (of type <code>string</code>, which
defaults to <code>""</code>): Path to the image.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>set</code> (of type <code>(string) -&gt; unit</code>): Change
the image.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.add_image"><a href="#video.add_image"
class="anchor"><code>video.add_image</code></a></h3>
<p>Add a static image on the first video channel.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?width : int?, ?height : int?,
 ?x : {int}, ?y : {int}, file : string,
 source(audio=internal(&#39;a), video=internal(&#39;b),
 midi=internal(&#39;c))) -&gt; source(audio=internal(&#39;a),
video=internal(&#39;b), midi=internal(&#39;c))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>width</code> (of type <code>int?</code>, which defaults to
<code>null</code>): Scale to width</li>
<li><code>height</code> (of type <code>int?</code>, which defaults to
<code>null</code>): Scale to height</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): x position.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): y position.</li>
<li><code>file</code> (of type <code>string</code>): Path to the image
file.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=internal('a), video=internal('b), midi=internal('c))</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.add_subtitle"><a href="#video.add_subtitle"
class="anchor"><code>video.add_subtitle</code></a></h3>
<p>Add subtitle from metadata.</p>
<p>Type:</p>
<pre><code>(?override : string, ?size : int, ?color : int,
 ?offset : int, source(audio=?internal(&#39;A),
 video=canvas(&#39;B), midi=?internal(&#39;C))) -&gt;
source(audio=?internal(&#39;A), video=canvas(&#39;B),
midi=?internal(&#39;C))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>override</code> (of type <code>string</code>, which defaults
to <code>"subtitle"</code>): Metadata where subtitle to display are
located.</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>)</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>)</li>
<li><code>offset</code> (of type <code>int</code>, which defaults to
<code>20</code>): Offset in pixels.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=?internal('A), video=canvas('B), midi=?internal('C))</code>):
Source.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.add_text"><a href="#video.add_text"
class="anchor"><code>video.add_text</code></a></h3>
<p>Add a text to a stream. Uses the first available operator in:
camlimages, SDL, FFmpeg, GStreamer, gd or native. Display a text using
the first available operator in: SDL, GStreamer, gd or native. def
video.add_text.native = add_text_builder(video.text.native) end</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float?, ?color : int,
 ?cycle : bool, ?font : string?, ?metadata : string?,
 ?size : int, ?speed : int, ?x : {int}, ?y : {int},
 {string}, source(audio=?internal(&#39;A), video=canvas(&#39;B),
 midi=?internal(&#39;C)).{is_ready : () -&gt; bool}) -&gt;
source(audio=?internal(&#39;A), video=canvas(&#39;B),
midi=?internal(&#39;C))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>)</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>cycle</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Cycle text when it reaches left boundary.</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>metadata</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Change text on a particular metadata (empty
string means disabled).</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>speed</code> (of type <code>int</code>, which defaults to
<code>0</code>): Horizontal speed in pixels per second (0 means no
scrolling and update according to x and y in case they are
variable).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): d Text to
display.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=?internal('A), video=canvas('B), midi=?internal('C)).{is_ready : () -&gt; bool}</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.add_text.camlimages"><a href="#video.add_text.camlimages"
class="anchor"><code>video.add_text.camlimages</code></a></h3>
<p>Add a text to a stream (camlimages implementation). def
video.add_text.native = add_text_builder(video.text.native) end</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float?, ?color : int,
 ?cycle : bool, ?font : string?, ?metadata : string?,
 ?size : int, ?speed : int, ?x : {int}, ?y : {int},
 {string}, source(audio=?internal(&#39;A), video=canvas(&#39;B),
 midi=?internal(&#39;C)).{is_ready : () -&gt; bool}) -&gt;
source(audio=?internal(&#39;A), video=canvas(&#39;B),
midi=?internal(&#39;C))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>)</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>cycle</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Cycle text when it reaches left boundary.</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>metadata</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Change text on a particular metadata (empty
string means disabled).</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>speed</code> (of type <code>int</code>, which defaults to
<code>0</code>): Horizontal speed in pixels per second (0 means no
scrolling and update according to x and y in case they are
variable).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): d Text to
display.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=?internal('A), video=canvas('B), midi=?internal('C)).{is_ready : () -&gt; bool}</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.add_text.ffmpeg.internal"><a
href="#video.add_text.ffmpeg.internal"
class="anchor"><code>video.add_text.ffmpeg.internal</code></a></h3>
<p>Display a text.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : int, ?cycle : bool,
 ?font : string?, ?duration : float?,
 ?metadata : string?, ?size : int, ?speed : int,
 ?x : {int}, ?y : {int}, {string}, source(audio=pcm(&#39;a),
 video=canvas(&#39;b), midi=none)) -&gt; source(audio=pcm(&#39;c),
video=canvas(&#39;d), midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>cycle</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Cycle text when it reaches left boundary.</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>)</li>
<li><code>metadata</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Change text on a particular metadata (empty
string means disabled).</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>speed</code> (of type <code>int</code>, which defaults to
<code>70</code>): Horizontal speed in pixels per second (0 means no
scrolling and update according to x and y in case they are
variable).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): d Text to
display.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=canvas('b), midi=none)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.add_text.ffmpeg.raw"><a href="#video.add_text.ffmpeg.raw"
class="anchor"><code>video.add_text.ffmpeg.raw</code></a></h3>
<p>Display a text. Use this operator inside ffmpeg filters with a input
source</p>
<p>Type:</p>
<pre><code>(?color : int, ?cycle : bool, ?font : string?,
 ?metadata : string?, ?size : int, ?speed : int,
 ?x : {int}, ?y : {int}, graph : ffmpeg.filter.graph,
 ?{string}, source(audio=none,
 video=ffmpeg.video.raw(&#39;a), midi=none)) -&gt;
ffmpeg.filter.video</code></pre>
<p>Arguments:</p>
<ul>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>cycle</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Cycle text when it reaches left boundary.</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>metadata</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Change text on a particular metadata (empty
string means disabled).</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>speed</code> (of type <code>int</code>, which defaults to
<code>70</code>): Horizontal speed in pixels per second (0 means no
scrolling and update according to x and y in case they are
variable).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): y offset.</li>
<li><code>graph</code> (of type <code>ffmpeg.filter.graph</code>): a
ffmpeg filter graph to attach this filter to.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>, which
defaults to <code>""</code>): d Text to display.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=none, video=ffmpeg.video.raw('a), midi=none)</code>)</li>
</ul>
<h3 id="video.add_text.ffmpeg.raw.filter"><a
href="#video.add_text.ffmpeg.raw.filter"
class="anchor"><code>video.add_text.ffmpeg.raw.filter</code></a></h3>
<p>Display a text. Use this operator inside ffmpeg filters with a ffmpeg
video input Returns a ffmpeg video output with <code>on_change</code>
and <code>on_metadata</code> methods to be used to update the output
text.</p>
<p>Type:</p>
<pre><code>(?color : int, ?cycle : bool, ?font : string?,
 ?metadata : string?, ?size : int, ?speed : int,
 ?x : {int}, ?y : {int}, graph : ffmpeg.filter.graph,
 ?{string}, ffmpeg.filter.video) -&gt; ffmpeg.filter.video</code></pre>
<p>Arguments:</p>
<ul>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>cycle</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Cycle text when it reaches left boundary.</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>metadata</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Change text on a particular metadata (empty
string means disabled).</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>speed</code> (of type <code>int</code>, which defaults to
<code>70</code>): Horizontal speed in pixels per second (0 means no
scrolling and update according to x and y in case they are
variable).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): y offset.</li>
<li><code>graph</code> (of type <code>ffmpeg.filter.graph</code>): a
ffmpeg filter graph to attach this filter to.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>, which
defaults to <code>""</code>): d Text to display.</li>
<li><code>(unlabeled)</code> (of type
<code>ffmpeg.filter.video</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>on_change</code> (of type <code>() -&gt; unit</code>)</li>
<li><code>on_metadata</code> (of type
<code>([string * string]) -&gt; unit</code>)</li>
</ul>
<h3 id="video.add_text.gstreamer"><a href="#video.add_text.gstreamer"
class="anchor"><code>video.add_text.gstreamer</code></a></h3>
<p>Add a text to a stream (GStreamer implementation). def
video.add_text.native = add_text_builder(video.text.native) end</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float?, ?color : int,
 ?cycle : bool, ?font : string?, ?metadata : string?,
 ?size : int, ?speed : int, ?x : {int}, ?y : {int},
 {string}, source(audio=?internal(&#39;A), video=canvas(&#39;B),
 midi=?internal(&#39;C)).{is_ready : () -&gt; bool}) -&gt;
source(audio=?internal(&#39;A), video=canvas(&#39;B),
midi=?internal(&#39;C))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>)</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>cycle</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Cycle text when it reaches left boundary.</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>metadata</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Change text on a particular metadata (empty
string means disabled).</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>speed</code> (of type <code>int</code>, which defaults to
<code>0</code>): Horizontal speed in pixels per second (0 means no
scrolling and update according to x and y in case they are
variable).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): d Text to
display.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=?internal('A), video=canvas('B), midi=?internal('C)).{is_ready : () -&gt; bool}</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.add_text.native"><a href="#video.add_text.native"
class="anchor"><code>video.add_text.native</code></a></h3>
<p>Add a text to a stream (native implementation). def
video.add_text.native = add_text_builder(video.text.native) end</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float?, ?color : int,
 ?cycle : bool, ?font : string?, ?metadata : string?,
 ?size : int, ?speed : int, ?x : {int}, ?y : {int},
 {string}, source(audio=?internal(&#39;A), video=canvas(&#39;B),
 midi=?internal(&#39;C)).{is_ready : () -&gt; bool}) -&gt;
source(audio=?internal(&#39;A), video=canvas(&#39;B),
midi=?internal(&#39;C))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>)</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>cycle</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Cycle text when it reaches left boundary.</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>metadata</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Change text on a particular metadata (empty
string means disabled).</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>speed</code> (of type <code>int</code>, which defaults to
<code>0</code>): Horizontal speed in pixels per second (0 means no
scrolling and update according to x and y in case they are
variable).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): d Text to
display.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=?internal('A), video=canvas('B), midi=?internal('C)).{is_ready : () -&gt; bool}</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.add_text.sdl"><a href="#video.add_text.sdl"
class="anchor"><code>video.add_text.sdl</code></a></h3>
<p>Add a text to a stream (SDL implementation). def
video.add_text.native = add_text_builder(video.text.native) end</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float?, ?color : int,
 ?cycle : bool, ?font : string?, ?metadata : string?,
 ?size : int, ?speed : int, ?x : {int}, ?y : {int},
 {string}, source(audio=?internal(&#39;A), video=canvas(&#39;B),
 midi=?internal(&#39;C)).{is_ready : () -&gt; bool}) -&gt;
source(audio=?internal(&#39;A), video=canvas(&#39;B),
midi=?internal(&#39;C))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>)</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>cycle</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Cycle text when it reaches left boundary.</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>metadata</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Change text on a particular metadata (empty
string means disabled).</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>speed</code> (of type <code>int</code>, which defaults to
<code>0</code>): Horizontal speed in pixels per second (0 means no
scrolling and update according to x and y in case they are
variable).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): d Text to
display.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=?internal('A), video=canvas('B), midi=?internal('C)).{is_ready : () -&gt; bool}</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.alpha.movement"><a href="#video.alpha.movement"
class="anchor"><code>video.alpha.movement</code></a></h3>
<p>Make moving parts visible and non-moving parts transparent. A cheap
way to have a bluescreen.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?precision : float, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>precision</code> (of type <code>float</code>, which defaults
to <code>0.2</code>): Precision when comparing pixels to those of
previous image (between 0 and 1).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.alpha.of_color"><a href="#video.alpha.of_color"
class="anchor"><code>video.alpha.of_color</code></a></h3>
<p>Set a color to be transparent.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : int, ?precision : float,
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>0</code>): Color which should be transparent (in 0xRRGGBB
format).</li>
<li><code>precision</code> (of type <code>float</code>, which defaults
to <code>0.2</code>): Precision in color matching (0. means match
precisely the color and 1. means match every color).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.alpha.remove"><a href="#video.alpha.remove"
class="anchor"><code>video.alpha.remove</code></a></h3>
<p>Remove α channel.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.alpha.to_y"><a href="#video.alpha.to_y"
class="anchor"><code>video.alpha.to_y</code></a></h3>
<p>Convert the α channel to Y channel, thus converting opaque
(resp. transparent) pixels to bright (resp. dark) ones. This is useful
to observe the α channel.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.bounding_box"><a href="#video.bounding_box"
class="anchor"><code>video.bounding_box</code></a></h3>
<p>Retrieve the origin (methods <code>x</code> / <code>y</code>) and the
dimensions (methods <code>width</code> / <code>height</code>) of the
bounding box of the video.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>height</code> (of type <code>() -&gt; int</code>): Height of
video.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
<li><code>width</code> (of type <code>() -&gt; int</code>): Width of
video.</li>
<li><code>x</code> (of type <code>() -&gt; int</code>): x offset of
video.</li>
<li><code>y</code> (of type <code>() -&gt; int</code>): y offset of
video.</li>
</ul>
<h3 id="video.cover"><a href="#video.cover"
class="anchor"><code>video.cover</code></a></h3>
<p>Generate a video source containing cover-art for current track of
input audio source.</p>
<p>Type:</p>
<pre><code>(&#39;b.{on_track : ((([string * string]) -&gt; unit)) -&gt; &#39;a}) -&gt;
source(audio=none, video=&#39;d, midi=&#39;e)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type
<code>'b.{on_track : ((([string * string]) -&gt; unit)) -&gt; 'a}</code>):
Audio source whose metadata contain cover-art.</li>
</ul>
<h3 id="video.crop"><a href="#video.crop"
class="anchor"><code>video.crop</code></a></h3>
<p>Make the bounding box of the current video start at upper left
corner. This is useful to place centered videos for instance.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.dimensions"><a href="#video.dimensions"
class="anchor"><code>video.dimensions</code></a></h3>
<p>Retrieve the dimensions of the video through the <code>width</code>
and <code>height</code> methods.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>height</code> (of type <code>() -&gt; int</code>): Height of
video.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
<li><code>width</code> (of type <code>() -&gt; int</code>): Width of
video.</li>
</ul>
<h3 id="video.fade.in"><a href="#video.fade.in"
class="anchor"><code>video.fade.in</code></a></h3>
<p>Fade the beginning of tracks. Metadata ‘liq_video_fade_in’ can be
used to set the duration for a specific track (float in seconds).</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float, ?override : string,
 ?transition : string, ?type : string, source(audio=&#39;a,
 video=canvas(&#39;b), midi=&#39;c)) -&gt; source(audio=&#39;a,
video=canvas(&#39;b), midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Duration of the fading. This value can be set on a
per-file basis using the metadata field passed as override.</li>
<li><code>override</code> (of type <code>string</code>, which defaults
to <code>"liq_video_fade_in"</code>): Metadata field which, if present
and containing a float, overrides the ‘duration’ parameter for current
track.</li>
<li><code>transition</code> (of type <code>string</code>, which defaults
to <code>"fade"</code>): Kind of transition
(fade|slide_left|slide_right|slide_up|slide_down|grow|disc|random).</li>
<li><code>type</code> (of type <code>string</code>, which defaults to
<code>"lin"</code>): Fader shape (lin|sin|log|exp): linear, sinusoidal,
logarithmic or exponential.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video=canvas('b), midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.fade.out"><a href="#video.fade.out"
class="anchor"><code>video.fade.out</code></a></h3>
<p>Fade the end of tracks. Metadata ‘liq_video_fade_out’ can be used to
set the duration for a specific track (float in seconds).</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float, ?override : string,
 ?transition : string, ?type : string, source(audio=&#39;a,
 video=canvas(&#39;b), midi=&#39;c)) -&gt; source(audio=&#39;a,
video=canvas(&#39;b), midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float</code>, which defaults to
<code>3.</code>): Duration of the fading. This value can be set on a
per-file basis using the metadata field passed as override.</li>
<li><code>override</code> (of type <code>string</code>, which defaults
to <code>"liq_video_fade_out"</code>): Metadata field which, if present
and containing a float, overrides the ‘duration’ parameter for current
track.</li>
<li><code>transition</code> (of type <code>string</code>, which defaults
to <code>"fade"</code>): Kind of transition
(fade|slide_left|slide_right|slide_up|slide_down|grow|disc|random).</li>
<li><code>type</code> (of type <code>string</code>, which defaults to
<code>"lin"</code>): Fader shape (lin|sin|log|exp): linear, sinusoidal,
logarithmic or exponential.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video=canvas('b), midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.fill"><a href="#video.fill"
class="anchor"><code>video.fill</code></a></h3>
<p>Fill frame with a color.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : {int}, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): Color to fill the image with (0xRRGGBB).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.frame.height"><a href="#video.frame.height"
class="anchor"><code>video.frame.height</code></a></h3>
<p>Height for all video frames.</p>
<p>Type:</p>
<pre><code>() -&gt; int</code></pre>
<p>Arguments:</p>
<h3 id="video.frame.rate"><a href="#video.frame.rate"
class="anchor"><code>video.frame.rate</code></a></h3>
<p>Framerate for all video frames.</p>
<p>Type:</p>
<pre><code>() -&gt; int</code></pre>
<p>Arguments:</p>
<h3 id="video.frame.width"><a href="#video.frame.width"
class="anchor"><code>video.frame.width</code></a></h3>
<p>Width for all video frames.</p>
<p>Type:</p>
<pre><code>() -&gt; int</code></pre>
<p>Arguments:</p>
<h3 id="video.greyscale"><a href="#video.greyscale"
class="anchor"><code>video.greyscale</code></a></h3>
<p>Convert video to greyscale.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.hmirror"><a href="#video.hmirror"
class="anchor"><code>video.hmirror</code></a></h3>
<p>Flip image horizontally.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.invert"><a href="#video.invert"
class="anchor"><code>video.invert</code></a></h3>
<p>Invert video.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.line"><a href="#video.line"
class="anchor"><code>video.line</code></a></h3>
<p>Draw a line on the video.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : {int}, {int * int}, {int * int},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>{int}</code>, which defaults to
<code>16777215</code>): Color to fill the image with (0xRRGGBB).</li>
<li><code>(unlabeled)</code> (of type <code>{int * int}</code>): Start
point.</li>
<li><code>(unlabeled)</code> (of type <code>{int * int}</code>): End
point.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.lomo"><a href="#video.lomo"
class="anchor"><code>video.lomo</code></a></h3>
<p>Emulate the “Lomo effect”.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.opacity"><a href="#video.opacity"
class="anchor"><code>video.opacity</code></a></h3>
<p>Scale opacity of video.</p>
<p>Type:</p>
<pre><code>(?id : string?, {float}, source(audio=&#39;a, video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type <code>{float}</code>): Coefficient
to scale opacity with.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.opacity.box"><a href="#video.opacity.box"
class="anchor"><code>video.opacity.box</code></a></h3>
<p>Set alpha value on a given box inside the image.</p>
<p>Type:</p>
<pre><code>(?id : string?, alpha : {float}, height : {int},
 width : {int}, ?x : {int}, ?y : {int}, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>alpha</code> (of type <code>{float}</code>): alpha value.</li>
<li><code>height</code> (of type <code>{int}</code>): Box height.</li>
<li><code>width</code> (of type <code>{int}</code>): Box width.</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.persistence"><a href="#video.persistence"
class="anchor"><code>video.persistence</code></a></h3>
<p>Make images of the video persistent.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : {float}, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>{float}</code>, which defaults
to <code>1.</code>): Persistence duration in seconds.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.rectangle"><a href="#video.rectangle"
class="anchor"><code>video.rectangle</code></a></h3>
<p>Draw a rectangle.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : {int}, height : {int},
 width : {int}, ?x : {int}, ?y : {int}, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): Color to fill the image with (0xAARRGGBB).</li>
<li><code>height</code> (of type <code>{int}</code>): Height.</li>
<li><code>width</code> (of type <code>{int}</code>): Width.</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): Horizontal offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): Vertical offset.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.render"><a href="#video.render"
class="anchor"><code>video.render</code></a></h3>
<p>Render the video by computing the result of its canvas images.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?transparent : bool, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>transparent</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Make uncovered portions of the image transparent
(they are black by default).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.resize"><a href="#video.resize"
class="anchor"><code>video.resize</code></a></h3>
<p>Resize and translate video.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?height : {int}?, ?width : {int}?,
 ?x : {int}, ?y : {int}, source(audio=&#39;a, video=&#39;b,
 midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>height</code> (of type <code>{int}?</code>, which defaults to
<code>null</code>): Target height (<code>null</code> means original
height).</li>
<li><code>width</code> (of type <code>{int}?</code>, which defaults to
<code>null</code>): Target width (<code>null</code> means original
width).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.rotate"><a href="#video.rotate"
class="anchor"><code>video.rotate</code></a></h3>
<p>Rotate video.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?angle : {float}, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>angle</code> (of type <code>{float}</code>, which defaults to
<code>0.</code>): Angle in radians.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.scale"><a href="#video.scale"
class="anchor"><code>video.scale</code></a></h3>
<p>Scale and translate video.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?scale : {float}, ?x : {int},
 ?xscale : {float}, ?y : {int}, ?yscale : {float},
 source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a,
video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>scale</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): Scaling coefficient in both directions.</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): x offset.</li>
<li><code>xscale</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): x scaling.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): y offset.</li>
<li><code>yscale</code> (of type <code>{float}</code>, which defaults to
<code>1.</code>): y scaling.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.sepia"><a href="#video.sepia"
class="anchor"><code>video.sepia</code></a></h3>
<p>Convert video to sepia.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.still_frame"><a href="#video.still_frame"
class="anchor"><code>video.still_frame</code></a></h3>
<p>Take still frames from a video source by calling the
<code>save</code> method. For now only bitmap output is supported.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=canvas(&#39;b),
 midi=&#39;c)) -&gt; source(audio=&#39;a, video=canvas(&#39;b), midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video=canvas('b), midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>save</code> (of type <code>(string) -&gt; unit</code>): Save
current image, argument is the file name to save to.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.testsrc.ffmpeg"><a href="#video.testsrc.ffmpeg"
class="anchor"><code>video.testsrc.ffmpeg</code></a></h3>
<p>A test video source, which generates various patterns.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?pattern : string, ?max_buffer : float,
 ?duration : &#39;a?) -&gt; source(audio=none, video=canvas(&#39;c),
midi=none)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>)</li>
<li><code>pattern</code> (of type <code>string</code>, which defaults to
<code>"testsrc"</code>): Pattern drawn in the video:
<code>"testsrc"</code>, <code>"testsrc2"</code>,
<code>"smptebars"</code> or <code>"rgbtestsrc"</code>.</li>
<li><code>max_buffer</code> (of type <code>float</code>, which defaults
to <code>0.5</code>): Maximum data buffer in seconds</li>
<li><code>duration</code> (of type <code>'a?</code>, which defaults to
<code>null</code>): Duration of the source.</li>
</ul>
<h3 id="video.text"><a href="#video.text"
class="anchor"><code>video.text</code></a></h3>
<p>Display a text.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : int, ?duration : float?,
 ?font : string?, ?size : int, {string}) -&gt;
source(audio=?internal(&#39;A), video=canvas(&#39;B),
midi=?internal(&#39;C))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>): Duration in seconds (<code>null</code> means
infinite).</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Text to
display.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.text.camlimages"><a href="#video.text.camlimages"
class="anchor"><code>video.text.camlimages</code></a></h3>
<p>Display a text.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : int, ?duration : float?,
 ?font : string?, ?size : int, {string}) -&gt;
source(audio=&#39;a, video=canvas(&#39;b), midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>): Duration in seconds (<code>null</code> means
infinite).</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Text to
display.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.text.gd"><a href="#video.text.gd"
class="anchor"><code>video.text.gd</code></a></h3>
<p>Add a text to a stream (GD implementation). def video.add_text.native
= add_text_builder(video.text.native) end</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : float?, ?color : int,
 ?cycle : bool, ?font : string?, ?metadata : string?,
 ?size : int, ?speed : int, ?x : {int}, ?y : {int},
 {string}, source(audio=?internal(&#39;A), video=canvas(&#39;B),
 midi=?internal(&#39;C)).{is_ready : () -&gt; bool}) -&gt;
source(audio=?internal(&#39;A), video=canvas(&#39;B),
midi=?internal(&#39;C))</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>)</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>cycle</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Cycle text when it reaches left boundary.</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>metadata</code> (of type <code>string?</code>, which defaults
to <code>null</code>): Change text on a particular metadata (empty
string means disabled).</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>speed</code> (of type <code>int</code>, which defaults to
<code>0</code>): Horizontal speed in pixels per second (0 means no
scrolling and update according to x and y in case they are
variable).</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>10</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): d Text to
display.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=?internal('A), video=canvas('B), midi=?internal('C)).{is_ready : () -&gt; bool}</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.text.gstreamer"><a href="#video.text.gstreamer"
class="anchor"><code>video.text.gstreamer</code></a></h3>
<p>Display a text.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : int, ?duration : float?,
 ?font : string?, ?size : int, {string}) -&gt;
source(audio=&#39;a, video=canvas(&#39;b), midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>): Duration in seconds (<code>null</code> means
infinite).</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Text to
display.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.text.native"><a href="#video.text.native"
class="anchor"><code>video.text.native</code></a></h3>
<p>Display a text.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : int, ?duration : float?,
 ?font : string?, ?size : int, {string}) -&gt;
source(audio=&#39;a, video=canvas(&#39;b), midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>): Duration in seconds (<code>null</code> means
infinite).</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Text to
display.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.text.sdl"><a href="#video.text.sdl"
class="anchor"><code>video.text.sdl</code></a></h3>
<p>Display a text.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?color : int, ?duration : float?,
 ?font : string?, ?size : int, {string}) -&gt;
source(audio=&#39;a, video=canvas(&#39;b), midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16777215</code>): Text color (in 0xRRGGBB format).</li>
<li><code>duration</code> (of type <code>float?</code>, which defaults
to <code>null</code>): Duration in seconds (<code>null</code> means
infinite).</li>
<li><code>font</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Path to ttf font file.</li>
<li><code>size</code> (of type <code>int</code>, which defaults to
<code>18</code>): Font size.</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>): Text to
display.</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.tile"><a href="#video.tile"
class="anchor"><code>video.tile</code></a></h3>
<p>Tile sources (same as add but produces tiles of videos).</p>
<p>Type:</p>
<pre><code>(?id : string?, ?normalize : {bool}, ?power : {bool},
 ?proportional : bool, ?weights : [{float}],
 [source(audio=&#39;a, video=canvas(&#39;b), midi=&#39;c)]) -&gt;
source(audio=&#39;a, video=canvas(&#39;b), midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>normalize</code> (of type <code>{bool}</code>, which defaults
to <code>true</code>)</li>
<li><code>power</code> (of type <code>{bool}</code>, which defaults to
<code>false</code>): Perform constant-power normalization.</li>
<li><code>proportional</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Scale preserving the proportions.</li>
<li><code>weights</code> (of type <code>[{float}]</code>, which defaults
to <code>[]</code>): Relative weight of the sources in the sum. The
empty list stands for the homogeneous distribution.</li>
<li><code>(unlabeled)</code> (of type
<code>[source(audio='a, video=canvas('b), midi='c)]</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.translate"><a href="#video.translate"
class="anchor"><code>video.translate</code></a></h3>
<p>Translate video.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?x : {int}, ?y : {int}, source(audio=&#39;a,
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=&#39;a, video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>x</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): x offset.</li>
<li><code>y</code> (of type <code>{int}</code>, which defaults to
<code>0</code>): y offset.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="source-visualization"><a href="#source-visualization"
class="anchor">Source / Visualization</a></h2>
<h3 id="bpm"><a href="#bpm" class="anchor"><code>bpm</code></a></h3>
<p>Detect the BPM (number of beats per minute). The returned source has
a method <code>bpm</code>, which can be called to compute it.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>bpm</code> (of type <code>() -&gt; float</code>): Compute the
current BPM.</li>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="lufs"><a href="#lufs" class="anchor"><code>lufs</code></a></h3>
<p>Compute current LUFS of the source according to the EBU R128
standard. It returns the source with a method to compute the current
value.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?window : {float}, source(audio=pcm(&#39;a),
 video=&#39;b, midi=&#39;c)) -&gt; source(audio=pcm(&#39;a), video=&#39;b,
midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>window</code> (of type <code>{float}</code>, which defaults to
<code>3.</code>): Duration of the window (in seconds) used to compute
the LUFS.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>lufs</code> (of type <code>() -&gt; float</code>): Current
value for the LUFS (short-term value computed over the duration
specified by the <code>window</code> parameter).</li>
<li><code>lufs_momentary</code> (of type <code>() -&gt; float</code>):
Momentary LUFS (over a 400ms window).</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="midi.inspect"><a href="#midi.inspect"
class="anchor"><code>midi.inspect</code></a></h3>
<p>Display midi events on standard output.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=&#39;a, video=&#39;b, midi=&#39;c)) -&gt;
source(audio=&#39;a, video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio='a, video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="rms.smooth"><a href="#rms.smooth"
class="anchor"><code>rms.smooth</code></a></h3>
<p>Compute the current RMS for the source, this varies more smoothly
that <code>rms</code> and is updated more frequently. Returns the source
with a method <code>rms</code>.</p>
<p>Type:</p>
<pre><code>(?id : string?, ?duration : {float},
 source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>duration</code> (of type <code>{float}</code>, which defaults
to <code>0.5</code>): Duration of the window in seconds (more precisely,
this is the time constant of the low-pass filter).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>): Current
value for the RMS.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="server.rms"><a href="#server.rms"
class="anchor"><code>server.rms</code></a></h3>
<p>Register a command that outputs the RMS of the returned source.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>rms</code> (of type <code>() -&gt; float</code>): Current
value for the RMS volume.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h3 id="video.volume"><a href="#video.volume"
class="anchor"><code>video.volume</code></a></h3>
<p>Graphical visualization of the sound.</p>
<p>Type:</p>
<pre><code>(?id : string?, source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)) -&gt;
source(audio=pcm(&#39;a), video=&#39;b, midi=&#39;c)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>id</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Force the value of the source ID.</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video='b, midi='c)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
<h2 id="string"><a href="#string" class="anchor">String</a></h2>
<h3 id="section-13"><a href="#section-13"
class="anchor"><code>%</code></a></h3>
<p><code>pattern % [...,(k,v),...]</code> changes in the pattern
occurrences of:</p>
<ul>
<li><code>$(k)</code> into <code>v</code></li>
<li>`$(if $(k2),“a”,“b”) into “a” if k2 is found in the list, “b”
otherwise.</li>
</ul>
<p>Type:</p>
<pre><code>(string, [string * string]) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="section-14"><a href="#section-14"
class="anchor"><code>^</code></a></h3>
<p>Concatenate strings.</p>
<p>Type:</p>
<pre><code>(string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="bool_of_string"><a href="#bool_of_string"
class="anchor"><code>bool_of_string</code></a></h3>
<p>Convert a string to a bool.</p>
<p>Type:</p>
<pre><code>(?default : bool, string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>bool</code>, which defaults to
<code>false</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.metadata.flac.cover.decode"><a
href="#file.metadata.flac.cover.decode"
class="anchor"><code>file.metadata.flac.cover.decode</code></a></h3>
<p>Decode a flac-encoded cover metadata string</p>
<p>Type:</p>
<pre><code>(string) -&gt; string
.{
  color_depth : int,
  description : string,
  height : int,
  mime : string,
  number_of_colors : int?,
  picture_type : int,
  width : int}?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="file.metadata.flac.cover.encode"><a
href="#file.metadata.flac.cover.encode"
class="anchor"><code>file.metadata.flac.cover.encode</code></a></h3>
<p>Encode cover metadata for embedding with flac files</p>
<p>Type:</p>
<pre><code>(picture_type : int, mime : string,
 ?description : string, width : int, height : int,
 color_depth : int, ?number_of_colors : int?, string) -&gt;
string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>picture_type</code> (of type <code>int</code>)</li>
<li><code>mime</code> (of type <code>string</code>)</li>
<li><code>description</code> (of type <code>string</code>, which
defaults to <code>""</code>)</li>
<li><code>width</code> (of type <code>int</code>)</li>
<li><code>height</code> (of type <code>int</code>)</li>
<li><code>color_depth</code> (of type <code>int</code>)</li>
<li><code>number_of_colors</code> (of type <code>int?</code>, which
defaults to <code>null</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="float_of_string"><a href="#float_of_string"
class="anchor"><code>float_of_string</code></a></h3>
<p>Convert a string to a float.</p>
<p>Type:</p>
<pre><code>(?default : float, string) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>float</code>, which defaults to
<code>0.</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="int_of_string"><a href="#int_of_string"
class="anchor"><code>int_of_string</code></a></h3>
<p>Convert a string to a int.</p>
<p>Type:</p>
<pre><code>(?default : int, string) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>int</code>, which defaults to
<code>0</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="irc.channel"><a href="#irc.channel"
class="anchor"><code>irc.channel</code></a></h3>
<p>Contents of an IRC channel.</p>
<p>Type:</p>
<pre><code>(?server : string, ?port : int, ?channel : string,
 ?nick : string, ?limit : int) -&gt; () -&gt; string</code></pre>
<p>Example:</p>
<div class="sourceCode" id="cb613"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb613-1"><a href="#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display messages in the #liquidsoap-test room over a video</span></span>
<span id="cb613-2"><a href="#cb613-2" aria-hidden="true" tabindex="-1"></a><span class="va">s</span> = <span class="dt">single</span>(<span class="st">&quot;test.mp4&quot;</span>)</span>
<span id="cb613-3"><a href="#cb613-3" aria-hidden="true" tabindex="-1"></a><span class="va">s</span> = <span class="dt">video.add_text.native</span>(<span class="dt">irc.channel</span>(<span class="va">channel</span>=<span class="st">&quot;#liquidsoap-test&quot;</span>), s)</span></code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>server</code> (of type <code>string</code>, which defaults to
<code>"irc.libera.chat"</code>): IRC server.</li>
<li><code>port</code> (of type <code>int</code>, which defaults to
<code>6667</code>): Port for IRC server.</li>
<li><code>channel</code> (of type <code>string</code>, which defaults to
<code>"#liquidsoap"</code>): IRC chan to join.</li>
<li><code>nick</code> (of type <code>string</code>, which defaults to
<code>"liquidbot"</code>): Nickname.</li>
<li><code>limit</code> (of type <code>int</code>, which defaults to
<code>10</code>): Limit to n last messages</li>
</ul>
<h3 id="json"><a href="#json" class="anchor"><code>json</code></a></h3>
<p>Create a generic json object</p>
<p>Type:</p>
<pre><code>() -&gt; json</code></pre>
<p>Arguments:</p>
<p>Methods:</p>
<ul>
<li><code>add</code> (of type <code>(string, 'a) -&gt; unit</code>): Add
or replace a new <code>key</code>/<code>value</code> pair to the
object.</li>
<li><code>remove</code> (of type <code>(string) -&gt; unit</code>):
Remove a key from the object. Does not nothing if the key does not
exist.</li>
<li><code>stringify</code> (of type
<code>(?compact : bool, ?json5 : bool) -&gt; string</code>): Render
object as json string.</li>
</ul>
<h3 id="json.stringify"><a href="#json.stringify"
class="anchor"><code>json.stringify</code></a></h3>
<p>Convert a value to a JSON string.</p>
<p>Type:</p>
<pre><code>(?compact : bool, ?json5 : bool, &#39;a) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>compact</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Output compact text.</li>
<li><code>json5</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Use JSON5 extended spec.</li>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
</ul>
<h3 id="metadata.json.parse"><a href="#metadata.json.parse"
class="anchor"><code>metadata.json.parse</code></a></h3>
<p>Parse metadata from JSON object</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string] as json.object</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="metadata.json.stringify"><a href="#metadata.json.stringify"
class="anchor"><code>metadata.json.stringify</code></a></h3>
<p>Export metadata as JSON object. Cover art, if found, is extracted
using <code>metadata.cover</code> and exported with key
<code>"cover"</code> and exported using
<code>string.data_uri.encode</code>.</p>
<p>Type:</p>
<pre><code>(?coverart_mime : string?, ?base64 : bool,
 ?compact : bool, ?json5 : bool, [string * string]) -&gt;
string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>coverart_mime</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Mime type to use for
<code>"coverart"</code> metadata. Support disasbled if
<code>null</code>.</li>
<li><code>base64</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>compact</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Output compact text.</li>
<li><code>json5</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Use json5 extended spec.</li>
<li><code>(unlabeled)</code> (of type
<code>[string * string]</code>)</li>
</ul>
<h3 id="regexp"><a href="#regexp"
class="anchor"><code>regexp</code></a></h3>
<p>Create a regular expression</p>
<p>Type:</p>
<pre><code>(?flags : [string], string) -&gt; regexp</code></pre>
<p>Arguments:</p>
<ul>
<li><code>flags</code> (of type <code>[string]</code>, which defaults to
<code>[]</code>): List of flags. Valid flags: <code>"i"</code>,
<code>"g"</code>, <code>"s"</code>, <code>"m"</code>.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>exec</code> (of type
<code>(string) -&gt; [int * string]</code>): Extract substrings from a
string. Returns a list of (index,value). If the list does not have a
pair associated to some index, it means that the corresponding pattern
was not found.</li>
<li><code>replace</code> (of type
<code>(((string) -&gt; string), string) -&gt; string</code>): Replace
all substrings matched by a pattern by another string returned by a
function.</li>
<li><code>split</code> (of type <code>(string) -&gt; [string]</code>):
Split a string on the given regular expression.</li>
<li><code>test</code> (of type <code>(string) -&gt; bool</code>): Match
a string with the expressionn.</li>
</ul>
<h3 id="string-1"><a href="#string-1"
class="anchor"><code>string</code></a></h3>
<p>Ensure that we have a string (useful for removing fields from
strings).</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.annotate.parse"><a href="#string.annotate.parse"
class="anchor"><code>string.annotate.parse</code></a></h3>
<p>Parse a string of the form
<code>&lt;key&gt;=&lt;value&gt;,...:&lt;uri&gt;</code> as given by the
<code>annotate:</code> protocol</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string] * string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.base64.decode"><a href="#string.base64.decode"
class="anchor"><code>string.base64.decode</code></a></h3>
<p>Decode a Base64 encoded string.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.base64.encode"><a href="#string.base64.encode"
class="anchor"><code>string.base64.encode</code></a></h3>
<p>Encode a string in Base64.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.binary.of_int"><a href="#string.binary.of_int"
class="anchor"><code>string.binary.of_int</code></a></h3>
<p>Encode a positive (unsigned) integer using native memory
representation.</p>
<p>Type:</p>
<pre><code>(?pad : int, ?little_endian : bool, int) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>pad</code> (of type <code>int</code>, which defaults to
<code>0</code>): Minimum length in digits (pad on the left with zeros in
order to reach it)</li>
<li><code>little_endian</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Whether the memory representation is
little endian.</li>
<li><code>(unlabeled)</code> (of type <code>int</code>): String
containing the binary representation.</li>
</ul>
<h3 id="string.binary.to_int"><a href="#string.binary.to_int"
class="anchor"><code>string.binary.to_int</code></a></h3>
<p>Value of a positive (unsigned) integer encoded using native memory
representation.</p>
<p>Type:</p>
<pre><code>(?little_endian : bool, string) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>little_endian</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Whether the memory representation is
little endian.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): String
containing the binary representation.</li>
</ul>
<h3 id="string.capitalize"><a href="#string.capitalize"
class="anchor"><code>string.capitalize</code></a></h3>
<p>Return a string with the first character set to upper case
(capitalize), or to lower case (uncapitalize).</p>
<p>Type:</p>
<pre><code>(?capitalize : bool, ?space_sensitive : bool, string) -&gt;
string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>capitalize</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Capitalize if true, uncapitalize otherwise</li>
<li><code>space_sensitive</code> (of type <code>bool</code>, which
defaults to <code>true</code>): Capitalize each space separated
sub-string.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.case"><a href="#string.case"
class="anchor"><code>string.case</code></a></h3>
<p>Convert a string to lower or upper case.</p>
<p>Type:</p>
<pre><code>(?lower : bool, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>lower</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Convert to lower case if true and uppercase
otherwise.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.char"><a href="#string.char"
class="anchor"><code>string.char</code></a></h3>
<p>Create a string with one character.</p>
<p>Type:</p>
<pre><code>(int) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>): Code of the
character.</li>
</ul>
<h3 id="string.char.ascii.random"><a href="#string.char.ascii.random"
class="anchor"><code>string.char.ascii.random</code></a></h3>
<p>Return a random ASCII character</p>
<p>Type:</p>
<pre><code>(?[int]) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>[int]</code>, which defaults
to
<code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127]</code>)</li>
</ul>
<h3 id="string.concat"><a href="#string.concat"
class="anchor"><code>string.concat</code></a></h3>
<p>Concatenate strings.</p>
<p>Type:</p>
<pre><code>(?separator : string, [string]) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>separator</code> (of type <code>string</code>, which defaults
to <code>""</code>)</li>
<li><code>(unlabeled)</code> (of type <code>[string]</code>)</li>
</ul>
<h3 id="string.contains"><a href="#string.contains"
class="anchor"><code>string.contains</code></a></h3>
<p>Test whether a string contains a given prefix, substring or
suffix.</p>
<p>Type:</p>
<pre><code>(?prefix : string, ?substring : string, ?suffix : string,
 string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>prefix</code> (of type <code>string</code>, which defaults to
<code>""</code>): Prefix to look for.</li>
<li><code>substring</code> (of type <code>string</code>, which defaults
to <code>""</code>): Substring to look for.</li>
<li><code>suffix</code> (of type <code>string</code>, which defaults to
<code>""</code>): Suffix to look for.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): The string
to look into.</li>
</ul>
<h3 id="string.data_uri.decode"><a href="#string.data_uri.decode"
class="anchor"><code>string.data_uri.decode</code></a></h3>
<p>Decode a string using the data uri format,
i.e. <code>"data:&lt;mime&gt;[;base64],&lt;data&gt;"</code>.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string.{mime : string}?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.data_uri.encode"><a href="#string.data_uri.encode"
class="anchor"><code>string.data_uri.encode</code></a></h3>
<p>Encode a string using the data uri format,
i.e. <code>"data:&lt;mime&gt;[;base64],&lt;data&gt;"</code>.</p>
<p>Type:</p>
<pre><code>(?base64 : bool, mime : string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>base64</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Encode data using the base64 format</li>
<li><code>mime</code> (of type <code>string</code>): Data mime type</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.escape"><a href="#string.escape"
class="anchor"><code>string.escape</code></a></h3>
<p>Escape special characters in an string. By default, the string is
assumed to be <code>"utf8"</code> encoded and is escaped following JSON
and javascript specification.</p>
<p>Type:</p>
<pre><code>(?special_char : ((encoding : string, string) -&gt; bool)?,
 ?escape_char : ((encoding : string, string) -&gt; string)?,
 ?encoding : string?, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>special_char</code> (of type
<code>((encoding : string, string) -&gt; bool)?</code>, which defaults
to <code>null</code>): Return <code>true</code> if the given character
(passed as a string) should be escaped. Defaults to control charaters
for <code>"utf8"</code> and control characters and any character above
<code>\x7E</code> (non-printable characters) for
<code>"ascii"</code>.</li>
<li><code>escape_char</code> (of type
<code>((encoding : string, string) -&gt; string)?</code>, which defaults
to <code>null</code>): Function used to escape a character. Defaults to
<code>\xxx</code> octal notation for <code>"ascii"</code> and
<code>\uxxxx</code> hexadecimal notation for <code>"utf8"</code>.</li>
<li><code>encoding</code> (of type <code>string?</code>, which defaults
to <code>null</code>): One of: <code>"ascii"</code> or
<code>"utf8"</code>. If <code>null</code>, <code>utf8</code> is tried
first and <code>ascii</code> is used as a fallback if this fails.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.escape.all"><a href="#string.escape.all"
class="anchor"><code>string.escape.all</code></a></h3>
<p>Escape each character in the given string using a specific escape
sequence</p>
<p>Type:</p>
<pre><code>(?format : string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>format</code> (of type <code>string</code>, which defaults to
<code>"utf8"</code>): Escape format. One of: <code>"octal"</code>,
<code>"hex"</code> or <code>"utf8"</code>.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.escape.special_char"><a
href="#string.escape.special_char"
class="anchor"><code>string.escape.special_char</code></a></h3>
<p>Default function to detect characters to escape. See
<code>string.escape</code> for more details.</p>
<p>Type:</p>
<pre><code>(?encoding : string, string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>encoding</code> (of type <code>string</code>, which defaults
to <code>"utf8"</code>): One of: <code>"ascii"</code> or
<code>"utf8"</code>.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.extract"><a href="#string.extract"
class="anchor"><code>string.extract</code></a></h3>
<p>Extract substrings from a string. Perl compatible regular expressions
are recognized. Hence, special characters should be escaped. Returns a
list of (index,value). If the list does not have a pair associated to
some index, it means that the corresponding pattern was not found. Alter
natively, one can use the <code>r/_/.exec(_)</code> syntax for regular
expressions.</p>
<p>Type:</p>
<pre><code>(pattern : string, string) -&gt; [int * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>pattern</code> (of type <code>string</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.getter.concat"><a href="#string.getter.concat"
class="anchor"><code>string.getter.concat</code></a></h3>
<p>Combine a list of string getters <code>[g1, ...]</code> and return a
single getter <code>g</code> such that:
<code>string.getter.flush(separator=s, g) = string.concat(separator=s, list.filter(fun (s) -&gt; s != "", [string.getter.flush(g1), ...]))</code></p>
<p>Type:</p>
<pre><code>([{string}]) -&gt; {string}</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>[{string}]</code>)</li>
</ul>
<h3 id="string.getter.flush"><a href="#string.getter.flush"
class="anchor"><code>string.getter.flush</code></a></h3>
<p>Flush all values from a string getter and return the concatenated
result. If the getter is constant, return the constant string.
Otherwise, call the getter repeatedly until it returns an empty string
and return the concatenated result</p>
<p>Type:</p>
<pre><code>(?separator : string, {string}) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>separator</code> (of type <code>string</code>, which defaults
to <code>""</code>)</li>
<li><code>(unlabeled)</code> (of type <code>{string}</code>)</li>
</ul>
<h3 id="string.hex_of_int"><a href="#string.hex_of_int"
class="anchor"><code>string.hex_of_int</code></a></h3>
<p>Hexadecimal representation of an integer.</p>
<p>Type:</p>
<pre><code>(?pad : int, int) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>pad</code> (of type <code>int</code>, which defaults to
<code>0</code>): Minimum length in digits (pad on the left with zeros in
order to reach it).</li>
<li><code>(unlabeled)</code> (of type <code>int</code>)</li>
</ul>
<h3 id="string.id"><a href="#string.id"
class="anchor"><code>string.id</code></a></h3>
<p>Generate an identifier with given operator name.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Operator
name.</li>
</ul>
<h3 id="string.id.default"><a href="#string.id.default"
class="anchor"><code>string.id.default</code></a></h3>
<p>Generate an identifier if no identifier was provided.</p>
<p>Type:</p>
<pre><code>(default : string, string?) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>string</code>): Name from which
identifier is generated if not present.</li>
<li><code>(unlabeled)</code> (of type <code>string?</code>): Proposed
identifier.</li>
</ul>
<h3 id="string.is_int"><a href="#string.is_int"
class="anchor"><code>string.is_int</code></a></h3>
<p>Test whether a string is a valid integer.</p>
<p>Type:</p>
<pre><code>(string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.length"><a href="#string.length"
class="anchor"><code>string.length</code></a></h3>
<p>Get the length of a string.</p>
<p>Type:</p>
<pre><code>(string) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.make"><a href="#string.make"
class="anchor"><code>string.make</code></a></h3>
<p>Create a string of a given length using the given character.</p>
<p>Type:</p>
<pre><code>(?char_code : int, int) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>char_code</code> (of type <code>int</code>, which defaults to
<code>32</code>): Character code.</li>
<li><code>(unlabeled)</code> (of type <code>int</code>): String
length.</li>
</ul>
<h3 id="string.match"><a href="#string.match"
class="anchor"><code>string.match</code></a></h3>
<p>Match a string with an expression. Perl compatible regular
expressions are recognized. Hence, special characters should be escaped.
Alternatively, one can use the the <code>r/_/.test(_)</code> syntax for
regular expressions.</p>
<p>Type:</p>
<pre><code>(pattern : string, string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>pattern</code> (of type <code>string</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.nth"><a href="#string.nth"
class="anchor"><code>string.nth</code></a></h3>
<p>Retrieve a character in a string. Raises <code>error.not_found</code>
if character does not exist.</p>
<p>Type:</p>
<pre><code>(string, int) -&gt; int</code></pre>
<p>Example:</p>
<div class="sourceCode" id="cb647"><pre
class="sourceCode liquidsoap"><code class="sourceCode liquidsoap"><span id="cb647-1"><a href="#cb647-1" aria-hidden="true" tabindex="-1"></a><span class="va">c</span> = <span class="dt">string.nth</span>(<span class="st">&quot;abcde&quot;</span>, <span class="dv">2</span>)</span>
<span id="cb647-2"><a href="#cb647-2" aria-hidden="true" tabindex="-1"></a><span class="dt">print</span>(c) <span class="co"># should print &quot;c&quot;</span></span></code></pre></div>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): String to
look into.</li>
<li><code>(unlabeled)</code> (of type <code>int</code>): Index of the
character.</li>
</ul>
<h3 id="string.null_terminated"><a href="#string.null_terminated"
class="anchor"><code>string.null_terminated</code></a></h3>
<p>Add a null character at the end of a string.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): String.</li>
</ul>
<h3 id="string.quote"><a href="#string.quote"
class="anchor"><code>string.quote</code></a></h3>
<p>Return a quoted copy of the given string. By default, the string is
assumed to be <code>"utf8"</code> encoded and is escaped following JSON
and javascript specification.</p>
<p>Type:</p>
<pre><code>(?encoding : string?, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>encoding</code> (of type <code>string?</code>, which defaults
to <code>null</code>): One of: <code>"ascii"</code> or
<code>"utf8"</code>. If <code>null</code>, <code>utf8</code> is tried
first and <code>ascii</code> is used as a fallback if this fails.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.recode"><a href="#string.recode"
class="anchor"><code>string.recode</code></a></h3>
<p>Convert a string. Effective only if Camomile is enabled.</p>
<p>Type:</p>
<pre><code>(?in_enc : string?, ?out_enc : string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>in_enc</code> (of type <code>string?</code>, which defaults to
<code>null</code>): Input encoding. Autodetected if null.</li>
<li><code>out_enc</code> (of type <code>string</code>, which defaults to
<code>"UTF-8"</code>): Output encoding.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.replace"><a href="#string.replace"
class="anchor"><code>string.replace</code></a></h3>
<p>Replace all substrings matched by a pattern by another string
returned by a function. Alternatively, one can use the
<code>r/_/g.replace(_)</code> syntax for regular expressions.</p>
<p>Type:</p>
<pre><code>(pattern : string, ((string) -&gt; string), string) -&gt;
string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>pattern</code> (of type <code>string</code>): Pattern (regular
expression) of substrings which should be replaced.</li>
<li><code>(unlabeled)</code> (of type
<code>(string) -&gt; string</code>): Function getting a matched
substring an returning the string to replace it with.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): String whose
substrings should be replaced.</li>
</ul>
<h3 id="string.split"><a href="#string.split"
class="anchor"><code>string.split</code></a></h3>
<p>Split a string at “separator”. Perl compatible regular expressions
are recognized. Hence, special characters should be escaped.
Alternatively, one can use the <code>r/_/.split(_)</code> syntax for
regular expressions.</p>
<p>Type:</p>
<pre><code>(separator : string, string) -&gt; [string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>separator</code> (of type <code>string</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.sub"><a href="#string.sub"
class="anchor"><code>string.sub</code></a></h3>
<p>Get a substring of a string. Returns “” if no such substring
exists.</p>
<p>Type:</p>
<pre><code>(string, start : int, length : int) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
<li><code>start</code> (of type <code>int</code>): Return a sub string
starting at this position. First position is 0.</li>
<li><code>length</code> (of type <code>int</code>): Return a sub string
of <code>length</code> characters.</li>
</ul>
<h3 id="string.to_float"><a href="#string.to_float"
class="anchor"><code>string.to_float</code></a></h3>
<p>Convert a string to a float.</p>
<p>Type:</p>
<pre><code>(?default : float, string) -&gt; float</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>float</code>, which defaults to
<code>0.</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.to_int"><a href="#string.to_int"
class="anchor"><code>string.to_int</code></a></h3>
<p>Convert a string to a int.</p>
<p>Type:</p>
<pre><code>(?default : int, string) -&gt; int</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>int</code>, which defaults to
<code>0</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.trim"><a href="#string.trim"
class="anchor"><code>string.trim</code></a></h3>
<p>Return a string without leading and trailing whitespace.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string.unescape"><a href="#string.unescape"
class="anchor"><code>string.unescape</code></a></h3>
<p>This function is the inverse of <code>string.escape</code>.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="string_of"><a href="#string_of"
class="anchor"><code>string_of</code></a></h3>
<p>Return the representation of a value.</p>
<p>Type:</p>
<pre><code>(?fields : bool, &#39;a) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>fields</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Show toplevel fields around the value.</li>
<li><code>(unlabeled)</code> (of type <code>'a</code>)</li>
</ul>
<h3 id="string_of_float"><a href="#string_of_float"
class="anchor"><code>string_of_float</code></a></h3>
<p>String representation of a float</p>
<p>Type:</p>
<pre><code>(?decimal_places : int?, float) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>decimal_places</code> (of type <code>int?</code>, which
defaults to <code>null</code>): Number of decimal places.</li>
<li><code>(unlabeled)</code> (of type <code>float</code>)</li>
</ul>
<h3 id="string_of_metadata"><a href="#string_of_metadata"
class="anchor"><code>string_of_metadata</code></a></h3>
<p>Standard function for displaying metadata. Shows artist and title,
using “Unknown” when a field is empty.</p>
<p>Type:</p>
<pre><code>([string * string]) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>[string * string]</code>):
Metadata packet to be displayed.</li>
</ul>
<h3 id="time.string"><a href="#time.string"
class="anchor"><code>time.string</code></a></h3>
<p>Obtain a string representation of the current time. It takes a string
as argument where special strings are replaced roughly following <a
href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">strftime</a>:
%H is replaced by the current hour, %M minute, %S second, %A week day
(%a week day abbreviated), %d month day, %B month name (%b month name
abbreviated), %z timezone.</p>
<p>Type:</p>
<pre><code>(?time : float?, ?string?) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>time</code> (of type <code>float?</code>, which defaults to
<code>null</code>): If specified convert the given time (in seconds
since 00:00:00 GMT, Jan. 1, 1970) instead of the current time.</li>
<li><code>(unlabeled)</code> (of type <code>string?</code>, which
defaults to <code>null</code>): Description of the string to produce,
e.g. <code>"Current time is %H:%M</code>“`.</li>
</ul>
<h3 id="url.decode"><a href="#url.decode"
class="anchor"><code>url.decode</code></a></h3>
<p>Decode an encoded url (e.g. “%20” becomes ” “).</p>
<p>Type:</p>
<pre><code>(?plus : bool, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>plus</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="url.encode"><a href="#url.encode"
class="anchor"><code>url.encode</code></a></h3>
<p>Encode an url (e.g. ” ” becomes “%20”).</p>
<p>Type:</p>
<pre><code>(?plus : bool, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>plus</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="url.split"><a href="#url.split"
class="anchor"><code>url.split</code></a></h3>
<p>Split an url of the form <code>foo?arg=bar&amp;arg2=bar2</code> into
<code>("foo",[("arg","bar"),("arg2","bar2")])</code>. The returned
strings are decoded (see <code>url.decode</code>).</p>
<p>Type:</p>
<pre><code>(string) -&gt; string * [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Url to
split.</li>
</ul>
<h3 id="url.split_args"><a href="#url.split_args"
class="anchor"><code>url.split_args</code></a></h3>
<p>Split the arguments of an url of the form
<code>arg=bar&amp;arg2=bar2</code> into
<code>[("arg","bar"),("arg2","bar2")]</code>. The returned strings are
decoded (see <code>url.decode</code>).</p>
<p>Type:</p>
<pre><code>(string) -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Argument
string to split.</li>
</ul>
<h2 id="system"><a href="#system" class="anchor">System</a></h2>
<h3 id="argv"><a href="#argv" class="anchor"><code>argv</code></a></h3>
<p>Get command-line parameters. The parameters are numbered starting
from 1, the zeroth parameter being the script name.</p>
<p>Type:</p>
<pre><code>(?default : string, int) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>(unlabeled)</code> (of type <code>int</code>)</li>
</ul>
<h3 id="environment"><a href="#environment"
class="anchor"><code>environment</code></a></h3>
<p>Return the process environment.</p>
<p>Type:</p>
<pre><code>() -&gt; [string * string]</code></pre>
<p>Arguments:</p>
<h3 id="exe_ext"><a href="#exe_ext"
class="anchor"><code>exe_ext</code></a></h3>
<p>Executable file extension.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="exit"><a href="#exit" class="anchor"><code>exit</code></a></h3>
<p>Immediately stop the application. This should only be used in extreme
cases or to specify an exit value. The recommended way of stopping
Liquidsoap is to use shutdown.</p>
<p>Type:</p>
<pre><code>(int) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>int</code>): Exit
value.</li>
</ul>
<h3 id="file.cover"><a href="#file.cover"
class="anchor"><code>file.cover</code></a></h3>
<p>Obtain cover-art for a file. An empty string is returned in case
there is no such information.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string.{mime : string}?</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): File from
which the cover should be obtained</li>
</ul>
<h3 id="getenv"><a href="#getenv"
class="anchor"><code>getenv</code></a></h3>
<p>Get the value associated to a variable in the process environment.
Returns “” if the variable is not set.</p>
<p>Type:</p>
<pre><code>(?default : string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="getopt"><a href="#getopt"
class="anchor"><code>getopt</code></a></h3>
<p>Parse command line options: <code>getopt("-o")</code> returns “1” if
“-o” was passed without any parameter, “0” otherwise.
<code>getopt(default="X","-o")</code> returns “Y” if “-o Y” was passed,
“X” otherwise. The result is removed from the list of arguments,
affecting subsequent calls to <code>argv()</code> and
<code>getopt()</code>.</p>
<p>Type:</p>
<pre><code>(?default : string, string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>default</code> (of type <code>string</code>, which defaults to
<code>""</code>)</li>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="getpid"><a href="#getpid"
class="anchor"><code>getpid</code></a></h3>
<p>Get the process’ pid.</p>
<p>Type:</p>
<pre><code>() -&gt; int</code></pre>
<p>Arguments:</p>
<h3 id="on_shutdown"><a href="#on_shutdown"
class="anchor"><code>on_shutdown</code></a></h3>
<p>Register a function to be called when Liquidsoap shuts down.</p>
<p>Type:</p>
<pre><code>((() -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>)</li>
</ul>
<h3 id="on_start"><a href="#on_start"
class="anchor"><code>on_start</code></a></h3>
<p>Register a function to be called when Liquidsoap starts.</p>
<p>Type:</p>
<pre><code>((() -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>)</li>
</ul>
<h3 id="os.type"><a href="#os.type"
class="anchor"><code>os.type</code></a></h3>
<p>Type of OS running liquidsoap.</p>
<p>Type:</p>
<pre><code>string</code></pre>
<p>Arguments:</p>
<h3 id="process.quote"><a href="#process.quote"
class="anchor"><code>process.quote</code></a></h3>
<p>Return a quoted copy of the given string, suitable for use as one
argument in a command line, escaping all meta-characters. Warning: under
Windows, the output is only suitable for use with programs that follow
the standard Windows quoting conventions.</p>
<p>Type:</p>
<pre><code>(string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): String to
escape</li>
</ul>
<h3 id="process.quote.command"><a href="#process.quote.command"
class="anchor"><code>process.quote.command</code></a></h3>
<p>Return a quoted command line, suitable for use as an argument to
<code>process.run</code>.</p>
<p>The optional arguments <code>stdin</code>, <code>stdout</code> and
<code>stderr</code> are file names used to redirect the standard input,
the standard output, or the standard error of the command.</p>
<p>If <code>stdin=f</code> is given, a redirection <code>&lt; f</code>
is performed and the standard input of the command reads from file
<code>f</code>.</p>
<p>If <code>stdout=f</code> is given, a redirection <code>&gt; f</code>
is performed and the standard output of the command is written to file
<code>f</code>.</p>
<p>If <code>stderr=f</code> is given, a redirection <code>2&gt; f</code>
is performed and the standard error of the command is written to file
<code>f</code>.</p>
<p>If both <code>stdout=f</code> and <code>stderr=f</code> are given,
with the exact same file name <code>f</code>, a <code>2&gt;&amp;1</code>
redirection is performed so that the standard output and the standard
error of the command are interleaved and redirected to the same file
<code>f</code>.</p>
<p>Type:</p>
<pre><code>(?stdin : string?, ?stdout : string?, ?stderr : string?,
 ?args : [string], string) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>stdin</code> (of type <code>string?</code>, which defaults to
<code>null</code>): command standard input</li>
<li><code>stdout</code> (of type <code>string?</code>, which defaults to
<code>null</code>): command standard output</li>
<li><code>stderr</code> (of type <code>string?</code>, which defaults to
<code>null</code>): command standard error</li>
<li><code>args</code> (of type <code>[string]</code>, which defaults to
<code>[]</code>): command arguments</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Command to
execute</li>
</ul>
<h3 id="process.read"><a href="#process.read"
class="anchor"><code>process.read</code></a></h3>
<p>Perform a shell call and return its output.</p>
<p>Type:</p>
<pre><code>(?timeout : float, ?env : [string * string],
 ?inherit_env : bool, ?log_errors : bool, string) -&gt;
string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>-1.</code>): Cancel process after <code>timeout</code> has
elapsed. Ignored if negative.</li>
<li><code>env</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Process environment</li>
<li><code>inherit_env</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Inherit calling process’s environment when
<code>env</code> parameter is empty.</li>
<li><code>log_errors</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log details if the command does not return
0.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Command to
run</li>
</ul>
<h3 id="process.read.lines"><a href="#process.read.lines"
class="anchor"><code>process.read.lines</code></a></h3>
<p>Perform a shell call and return the list of its output lines.</p>
<p>Type:</p>
<pre><code>(?timeout : float, ?env : [string * string],
 ?inherit_env : bool, ?log_errors : bool, string) -&gt;
[string]</code></pre>
<p>Arguments:</p>
<ul>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>-1.</code>): Cancel process after <code>timeout</code> has
elapsed. Ignored if negative.</li>
<li><code>env</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Process environment</li>
<li><code>inherit_env</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Inherit calling process’s environment when
<code>env</code> parameter is empty.</li>
<li><code>log_errors</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Log details if the command does not return
0.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Command to
run</li>
</ul>
<h3 id="process.run"><a href="#process.run"
class="anchor"><code>process.run</code></a></h3>
<p>Run a process in a shell environment. Returns the standard output, as
well as standard error and status as methods. The status can be “exit”
(the status code is set), “killed” or “stopped” (the status code is the
signal), or “exception” (the description is set) or “timeout” (the
description is the run time).</p>
<p>Type:</p>
<pre><code>(?env : [string * string], ?inherit_env : bool,
 ?rwdirs : [string], ?rodirs : [string],
 ?network : bool?, ?timeout : float?, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>env</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Process environment</li>
<li><code>inherit_env</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Inherit calling process’s environment when
<code>env</code> parameter is empty.</li>
<li><code>rwdirs</code> (of type <code>[string]</code>, which defaults
to <code>["default"]</code>): Read/write directories for sandboxing.
<code>"default"</code> expands to sandbox default.</li>
<li><code>rodirs</code> (of type <code>[string]</code>, which defaults
to <code>["default"]</code>): Read-only directories for sandboxing
<code>"default"</code> expands to sandbox default.</li>
<li><code>network</code> (of type <code>bool?</code>, which defaults to
<code>null</code>): Enable or disable network inside sandboxed
environment (sandbox default if not specified).</li>
<li><code>timeout</code> (of type <code>float?</code>, which defaults to
<code>null</code>): Cancel process after <code>timeout</code> has
elapsed. Ignored if negative.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Command to
run</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>status</code> (of type
<code>string.{code : int, description : string}</code>): Status when
process ended, can be one of <code>"exit"</code> (the program exited,
the <code>status</code> code is then relevant), <code>"killed"</code>
(the program was killed by signal given in <code>status</code> code),
<code>"stopped"</code> (the program was stopped by signal given in
<code>status</code> code) or <code>"exception"</code> (the program
raised and exception detailed in the <code>description</code>).</li>
<li><code>stderr</code> (of type <code>string</code>): Messages written
by process on standard error stream.</li>
<li><code>stdout</code> (of type <code>string</code>): Messages written
by process on standard output stream.</li>
</ul>
<h3 id="process.test"><a href="#process.test"
class="anchor"><code>process.test</code></a></h3>
<p>Return true if process exited with 0 code.</p>
<p>Type:</p>
<pre><code>(?timeout : float, ?env : [string * string],
 ?inherit_env : bool, string) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>timeout</code> (of type <code>float</code>, which defaults to
<code>-1.</code>): Cancel process after <code>timeout</code> has
elapsed. Ignored if negative.</li>
<li><code>env</code> (of type <code>[string * string]</code>, which
defaults to <code>[]</code>): Process environment</li>
<li><code>inherit_env</code> (of type <code>bool</code>, which defaults
to <code>true</code>): Inherit calling process’s environment when
<code>env</code> parameter is empty.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Command to
test</li>
</ul>
<h3 id="read"><a href="#read" class="anchor"><code>read</code></a></h3>
<p>Read some value from standard input (console).</p>
<p>Type:</p>
<pre><code>(?hide : bool) -&gt; string</code></pre>
<p>Arguments:</p>
<ul>
<li><code>hide</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Hide typed characters (for passwords).</li>
</ul>
<h3 id="reopen.stderr"><a href="#reopen.stderr"
class="anchor"><code>reopen.stderr</code></a></h3>
<p>Reopen standard error on the given file</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="reopen.stdin"><a href="#reopen.stdin"
class="anchor"><code>reopen.stdin</code></a></h3>
<p>Reopen standard input on the given file</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="reopen.stdout"><a href="#reopen.stdout"
class="anchor"><code>reopen.stdout</code></a></h3>
<p>Reopen standard output on the given file</p>
<p>Type:</p>
<pre><code>(string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>)</li>
</ul>
<h3 id="restart"><a href="#restart"
class="anchor"><code>restart</code></a></h3>
<p>Restart the application.</p>
<p>Type:</p>
<pre><code>() -&gt; unit</code></pre>
<p>Arguments:</p>
<h3 id="setenv"><a href="#setenv"
class="anchor"><code>setenv</code></a></h3>
<p>Set the value associated to a variable in the process
environment.</p>
<p>Type:</p>
<pre><code>(string, string) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>string</code>): Variable to
be set.</li>
<li><code>(unlabeled)</code> (of type <code>string</code>): Value to
set.</li>
</ul>
<h3 id="shutdown"><a href="#shutdown"
class="anchor"><code>shutdown</code></a></h3>
<p>Shutdown the application.</p>
<p>Type:</p>
<pre><code>(?code : int) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>code</code> (of type <code>int</code>, which defaults to
<code>0</code>): Exit code. Default: <code>0</code></li>
</ul>
<h3 id="sleep"><a href="#sleep"
class="anchor"><code>sleep</code></a></h3>
<p>Interrupt execution for a given amount of seconds. This freezes the
calling thread and should not be used in the main streaming loop.</p>
<p>Type:</p>
<pre><code>(float) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float</code>): Number of
seconds of sleep.</li>
</ul>
<h3 id="source.is_up"><a href="#source.is_up"
class="anchor"><code>source.is_up</code></a></h3>
<p>Check whether a source is up.</p>
<p>Type:</p>
<pre><code>(source(&#39;a)) -&gt; bool</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
</ul>
<h3 id="source.on_leave"><a href="#source.on_leave"
class="anchor"><code>source.on_leave</code></a></h3>
<p>Register a function to be called when source is not used anymore by
another source.</p>
<p>Type:</p>
<pre><code>(source(&#39;a), (() -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>)</li>
</ul>
<h3 id="source.on_shutdown"><a href="#source.on_shutdown"
class="anchor"><code>source.on_shutdown</code></a></h3>
<p>Register a function to be called when source shuts down.</p>
<p>Type:</p>
<pre><code>(source(&#39;a), (() -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>source('a)</code>)</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>)</li>
</ul>
<h3 id="thread.when"><a href="#thread.when"
class="anchor"><code>thread.when</code></a></h3>
<p>Execute a given action when a predicate is true.</p>
<p>Type:</p>
<pre><code>(?fast : bool, ?every : float, ?once : bool,
 ?changed : bool, (() -&gt; bool), (() -&gt; unit)) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>fast</code> (of type <code>bool</code>, which defaults to
<code>true</code>)</li>
<li><code>every</code> (of type <code>float</code>, which defaults to
<code>1.</code>): How often (in sec.) to check for the predicate.</li>
<li><code>once</code> (of type <code>bool</code>, which defaults to
<code>false</code>): Execute the function only once.</li>
<li><code>changed</code> (of type <code>bool</code>, which defaults to
<code>true</code>): Execute the function only if the predicate was false
when last checked.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; bool</code>):
Predicate indicating when to execute the function, typically a time
interval such as <code>{10h-10h30}</code>.</li>
<li><code>(unlabeled)</code> (of type <code>() -&gt; unit</code>):
Function to execute when the predicate is true.</li>
</ul>
<h3 id="time"><a href="#time" class="anchor"><code>time</code></a></h3>
<p>Return the current time since 00:00:00 GMT, Jan. 1, 1970, in
seconds.</p>
<p>Type:</p>
<pre><code>() -&gt; float</code></pre>
<p>Arguments:</p>
<h3 id="time.local"><a href="#time.local"
class="anchor"><code>time.local</code></a></h3>
<p>Convert a time in seconds into a date in the local time zone (current
time is used if no argument is provided).</p>
<p>Type:</p>
<pre><code>(?float?) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float?</code>, which
defaults to <code>null</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>day</code> (of type <code>int</code>): Day of month.</li>
<li><code>dst</code> (of type <code>bool</code>): Daylight time savings
in effect.</li>
<li><code>hour</code> (of type <code>int</code>): Hours.</li>
<li><code>min</code> (of type <code>int</code>): Minutes.</li>
<li><code>month</code> (of type <code>int</code>): Month of year.</li>
<li><code>sec</code> (of type <code>int</code>): Seconds.</li>
<li><code>week_day</code> (of type <code>int</code>): Day of week
(Sunday is 0 or 7, Saturday is 6).</li>
<li><code>year</code> (of type <code>int</code>): Year.</li>
<li><code>year_day</code> (of type <code>int</code>): Day of year,
between <code>1</code> and <code>366</code>.</li>
</ul>
<h3 id="time.up"><a href="#time.up"
class="anchor"><code>time.up</code></a></h3>
<p>Current time, in seconds, since the script has started.</p>
<p>Type:</p>
<pre><code>() -&gt; float</code></pre>
<p>Arguments:</p>
<h3 id="time.utc"><a href="#time.utc"
class="anchor"><code>time.utc</code></a></h3>
<p>Convert a time in seconds into a date in the UTC time zone (current
time is used if no argument is provided).</p>
<p>Type:</p>
<pre><code>(?float?) -&gt; unit</code></pre>
<p>Arguments:</p>
<ul>
<li><code>(unlabeled)</code> (of type <code>float?</code>, which
defaults to <code>null</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>day</code> (of type <code>int</code>): Day of month.</li>
<li><code>dst</code> (of type <code>bool</code>): Daylight time savings
in effect.</li>
<li><code>hour</code> (of type <code>int</code>): Hours.</li>
<li><code>min</code> (of type <code>int</code>): Minutes.</li>
<li><code>month</code> (of type <code>int</code>): Month of year.</li>
<li><code>sec</code> (of type <code>int</code>): Seconds.</li>
<li><code>week_day</code> (of type <code>int</code>): Day of week
(Sunday is 0 or 7, Saturday is 6).</li>
<li><code>year</code> (of type <code>int</code>): Year.</li>
<li><code>year_day</code> (of type <code>int</code>): Day of year,
between <code>1</code> and <code>366</code>.</li>
</ul>
<h2 id="visualization"><a href="#visualization"
class="anchor">Visualization</a></h2>
<h3 id="video.vumeter"><a href="#video.vumeter"
class="anchor"><code>video.vumeter</code></a></h3>
<p>VU meter: display the audio volume (RMS in dB). This adds a video
track to the source.</p>
<p>Type:</p>
<pre><code>(?rms_min : float, ?rms_max : float, ?window : float,
 ?color : int, ?persistence : float,
 source(audio=pcm(&#39;a), video=none, midi=&#39;b)) -&gt;
source(audio=pcm(&#39;a), video=internal(&#39;c), midi=&#39;b)</code></pre>
<p>Arguments:</p>
<ul>
<li><code>rms_min</code> (of type <code>float</code>, which defaults to
<code>-35.</code>): Minimal volume (dB).</li>
<li><code>rms_max</code> (of type <code>float</code>, which defaults to
<code>0.</code>): Maximal volume (dB).</li>
<li><code>window</code> (of type <code>float</code>, which defaults to
<code>0.1</code>): Duration in seconds of volume computation.</li>
<li><code>color</code> (of type <code>int</code>, which defaults to
<code>16711680</code>): Color of the display (0xRRGGBB).</li>
<li><code>persistence</code> (of type <code>float</code>, which defaults
to <code>0.</code>): Persistence of the display (s).</li>
<li><code>(unlabeled)</code> (of type
<code>source(audio=pcm('a), video=none, midi='b)</code>)</li>
</ul>
<p>Methods:</p>
<ul>
<li><code>duration</code> (of type <code>() -&gt; float</code>):
Estimation of the duration of the current track.</li>
<li><code>elapsed</code> (of type <code>() -&gt; float</code>): Elapsed
time in the current track.</li>
<li><code>fallible</code> (of type <code>bool</code>): Indicate if a
source may fail, i.e. may not be ready to stream.</li>
<li><code>id</code> (of type <code>() -&gt; string</code>): Identifier
of the source.</li>
<li><code>is_active</code> (of type <code>() -&gt; bool</code>):
<code>true</code> if the source is active, i.e. it is continuously
animated by its own clock whenever it is ready. Typically,
<code>true</code> for outputs and sources such as
<code>input.http</code>.</li>
<li><code>is_ready</code> (of type <code>() -&gt; bool</code>): Indicate
if a source is ready to stream. This does not mean that the source is
currently streaming, just that its resources are all properly
initialized.</li>
<li><code>is_up</code> (of type <code>() -&gt; bool</code>): Indicate
that the source can be asked to produce some data at any time. This is
<code>true</code> when the source is currently being used or if it could
be used at any time, typically inside a <code>switch</code> or
<code>fallback</code>.</li>
<li><code>last_metadata</code> (of type
<code>() -&gt; [string * string]?</code>): Return the last metadata from
the source.</li>
<li><code>log</code> (of type
<code>{level : (() -&gt; int?).{set : (int) -&gt; unit}}</code>): Get or
set the source’s log level, from <code>1</code> to <code>5</code>.</li>
<li><code>on_get_ready</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called after the source is asked to get ready. This is when, for
instance, the source’s final ID is set.</li>
<li><code>on_leave</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source is not used anymore by another source.</li>
<li><code>on_metadata</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on metadata packets.</li>
<li><code>on_shutdown</code> (of type
<code>((() -&gt; unit)) -&gt; unit</code>): Register a function to be
called when source shuts down.</li>
<li><code>on_track</code> (of type
<code>((([string * string]) -&gt; unit)) -&gt; unit</code>): Call a
given handler on new tracks.</li>
<li><code>remaining</code> (of type <code>() -&gt; float</code>):
Estimation of remaining time in the current track.</li>
<li><code>seek</code> (of type <code>(float) -&gt; float</code>): Seek
forward, in seconds (returns the amount of time effectively
seeked).</li>
<li><code>self_sync</code> (of type <code>() -&gt; bool</code>): Is the
source currently controling its own real-time loop.</li>
<li><code>skip</code> (of type <code>() -&gt; unit</code>): Skip to the
next track.</li>
<li><code>time</code> (of type <code>() -&gt; float</code>): Get a
source’s time, based on its assigned clock.</li>
</ul>
          <div id="footer"></div>
        </main>
      </div>
    </div>
    <!--   Core JS Files   -->

    <script src="/assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript"></script>
    <script src="/assets/js/liq-jquery.js" type="text/javascript"></script>
  </body>

</html>
